(function(p,g,l){'use strict';function m(b,a,f){var c=f.baseHref(),k=b[0];return function(b,d,e){var f,h;e=e||{};h=e.expires;f=g.isDefined(e.path)?e.path:c;d===l&&(h="Thu, 01 Jan 1970 00:00:00 GMT",d="");g.isString(h)&&(h=new Date(h));d=encodeURIComponent(b)+"="+encodeURIComponent(d);d=d+(f?";path="+f:"")+(e.domain?";domain="+e.domain:"");d+=h?";expires="+h.toUTCString():"";d+=e.secure?";secure":"";e=d.length+1;4096<e&&a.warn("Cookie '"+b+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!");k.cookie=d}}g.module("ngCookies",["ng"]).provider("$cookies",[function(){var b=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(a,f){return{get:function(c){return a()[c]},getObject:function(c){return(c=this.get(c))?g.fromJson(c):c},getAll:function(){return a()},put:function(c,a,n){f(c,a,n?g.extend({},b,n):b)},putObject:function(c,b,a){this.put(c,g.toJson(b),a)},remove:function(a,k){f(a,l,k?g.extend({},b,k):b)}}}]}]);g.module("ngCookies").factory("$cookieStore",["$cookies",function(b){return{get:function(a){return b.getObject(a)},put:function(a,f){b.putObject(a,f)},remove:function(a){b.remove(a)}}}]);m.$inject=["$document","$log","$browser"];g.module("ngCookies").provider("$$cookieWriter",function(){this.$get=m})})(window,window.angular);!function(a,b){"use strict";function c(a){return/^-?\d+\.?\d*$/.test(a.replace(/["']/g,""))}var d=b.isDefined,e=b.isUndefined,f=b.isNumber,g=b.isObject,h=b.isArray,i=b.extend,j=b.toJson,k=b.fromJson,l=b.module("LocalStorageModule",[]);l.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){return this.prefix=a,this},this.setStorageType=function(a){return this.storageType=a,this},this.setStorageCookie=function(a,b){return this.cookie={expiry:a,path:b},this},this.setStorageCookieDomain=function(a){return this.cookie.domain=a,this},this.setNotify=function(a,b){return this.notify={setItem:a,removeItem:b},this},this.$get=["$rootScope","$window","$document","$parse",function(a,b,l,m){var n,o=this,p=o.prefix,q=o.cookie,r=o.notify,s=o.storageType;l?l[0]&&(l=l[0]):l=document,"."!==p.substr(-1)&&(p=p?p+".":"");var t=function(a){return p+a},u=function(){try{var c=s in b&&null!==b[s],d=t("__"+Math.round(1e7*Math.random()));return c&&(n=b[s],n.setItem(d,""),n.removeItem(d)),c}catch(e){return s="cookie",a.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),v=function(b,c){if(e(c)?c=null:(g(c)||h(c)||f(+c||c))&&(c=j(c)),!u||"cookie"===o.storageType)return u||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),B(b,c);try{(g(c)||h(c))&&(c=j(c)),n&&n.setItem(t(b),c),r.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:o.storageType})}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),B(b,c)}return!0},w=function(b){if(!u||"cookie"===o.storageType)return u||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C(b);var d=n?n.getItem(t(b)):null;return d&&"null"!==d?"{"===d.charAt(0)||"["===d.charAt(0)||c(d)?k(d):d:null},x=function(b){if(!u||"cookie"===o.storageType)return u||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:"cookie"}),D(b);try{n.removeItem(t(b)),r.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:o.storageType})}catch(c){return a.$broadcast("LocalStorageModule.notification.error",c.message),D(b)}return!0},y=function(){if(!u)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var b=p.length,c=[];for(var d in n)if(d.substr(0,b)===p)try{c.push(d.substr(b))}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return c},z=function(b){b=b||"";var c=p.slice(0,-1),d=new RegExp(c+"."+b);if(!u||"cookie"===o.storageType)return u||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),E();var e=p.length;for(var f in n)if(d.test(f))try{x(f.substr(e))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.message),E()}return!0},A=function(){try{return b.navigator.cookieEnabled||"cookie"in l&&(l.cookie.length>0||(l.cookie="test").indexOf.call(l.cookie,"test")>-1)}catch(c){return a.$broadcast("LocalStorageModule.notification.error",c.message),!1}}(),B=function(b,c){if(e(c))return!1;if((h(c)||g(c))&&(c=j(c)),!A)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var d="",f=new Date,i="";if(null===c?(f.setTime(f.getTime()+-864e5),d="; expires="+f.toGMTString(),c=""):0!==q.expiry&&(f.setTime(f.getTime()+24*q.expiry*60*60*1e3),d="; expires="+f.toGMTString()),b){var k="; path="+q.path;q.domain&&(i="; domain="+q.domain),l.cookie=t(b)+"="+encodeURIComponent(c)+d+k+i}}catch(m){return a.$broadcast("LocalStorageModule.notification.error",m.message),!1}return!0},C=function(b){if(!A)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var c=l.cookie&&l.cookie.split(";")||[],d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t(b)+"=")){var f=decodeURIComponent(e.substring(p.length+b.length+1,e.length));try{var g=JSON.parse(f);return k(g)}catch(h){return f}}}return null},D=function(a){B(a,null)},E=function(){for(var a=null,b=p.length,c=l.cookie.split(";"),d=0;d<c.length;d++){for(a=c[d];" "===a.charAt(0);)a=a.substring(1,a.length);var e=a.substring(b,a.indexOf("="));D(e)}},F=function(){return s},G=function(a,b,c,e){e=e||b;var f=w(e);return null===f&&d(c)?f=c:g(f)&&g(c)&&(f=i(c,f)),m(b).assign(a,f),a.$watch(b,function(a){v(e,a)},g(a[b]))},H=function(){for(var a=0,c=b[s],d=0;d<c.length;d++)0===c.key(d).indexOf(p)&&a++;return a};return{isSupported:u,getStorageType:F,set:v,add:v,get:w,keys:y,remove:x,clearAll:z,bind:G,deriveKey:t,length:H,cookie:{isSupported:A,set:B,add:B,get:C,remove:D,clearAll:E}}}]})}(window,window.angular);!function(a,b){"use strict";b.module("ngToast.provider",[]).provider("ngToast",[function(){function a(a){for(var d=Math.floor(1e3*Math.random());c.indexOf(d)>-1;)d=Math.floor(1e3*Math.random());this.id=d,this.animation=e.animation,this.className=e.className,this.additionalClasses=e.additionalClasses,this.dismissOnTimeout=e.dismissOnTimeout,this.timeout=e.timeout,this.dismissButton=e.dismissButton,this.dismissButtonHtml=e.dismissButtonHtml,this.dismissOnClick=e.dismissOnClick,this.compileContent=e.compileContent,b.extend(this,a)}var c=[],d=[],e={animation:!1,className:"success",additionalClasses:null,dismissOnTimeout:!0,timeout:4e3,dismissButton:!1,dismissButtonHtml:"&times;",dismissOnClick:!0,compileContent:!1,horizontalPosition:"right",verticalPosition:"top",maxNumber:0};this.configure=function(a){b.extend(e,a)},this.$get=[function(){return{settings:e,messages:c,dismiss:function(a){if(a){for(var b=c.length-1;b>=0;b--)if(c[b].id===a)return c.splice(b,1),void d.splice(d.indexOf(a),1)}else{for(;c.length>0;)c.pop();d=[]}},create:function(b){e.maxNumber>0&&d.length>=e.maxNumber&&this.dismiss(d[0]),b="string"==typeof b?{content:b}:b;var f=new a(b);return"bottom"===e.verticalPosition?c.unshift(f):c.push(f),d.push(f.id),f.id}}}]}])}(window,window.angular),function(a,b){"use strict";b.module("ngToast.directives",["ngToast.provider"]).directive("toast",["ngToast","$templateCache","$log",function(a,b,c){return{replace:!0,restrict:"EA",template:'<div class="ng-toast ng-toast--{{hPos}} ng-toast--{{vPos}} {{animation ? \'ng-toast--animate-\' + animation : \'\'}}"><ul class="ng-toast__list"><toast-message ng-repeat="message in messages" message="message"><span ng-bind-html="message.content"></span></toast-message></ul></div>',compile:function(d,e){if(e.template){var f=b.get(e.template);f?d.replaceWith(f):c.warn("ngToast: Provided template could not be loaded. Please be sure that it is populated before the <toast> element is represented.")}return function(b){b.hPos=a.settings.horizontalPosition,b.vPos=a.settings.verticalPosition,b.animation=a.settings.animation,b.messages=a.messages}}}}]).directive("toastMessage",["$timeout","$compile","ngToast",function(a,b,c){return{replace:!0,transclude:!0,restrict:"EA",scope:{message:"="},controller:["$scope","ngToast",function(a,b){a.dismiss=function(){b.dismiss(a.message.id)}}],template:'<li class="ng-toast__message {{message.additionalClasses}}"><div class="alert alert-{{message.className}}" ng-class="{\'alert-dismissible\': message.dismissButton}"><button type="button" class="close" ng-if="message.dismissButton" ng-bind-html="message.dismissButtonHtml" ng-click="!message.dismissOnClick && dismiss()"></button><span ng-if="!message.compileContent" ng-transclude></span></div></li>',link:function(d,e,f,g,h){if(d.message.compileContent){var i;h(d,function(a){i=a,e.children().append(i)}),a(function(){b(i.contents())(d.$parent,function(a){i.replaceWith(a)})},0)}d.message.dismissOnTimeout&&a(function(){c.dismiss(d.message.id)},d.message.timeout),d.message.dismissOnClick&&e.bind("click",function(){c.dismiss(d.message.id),d.$apply()})}}}])}(window,window.angular),function(a,b){"use strict";b.module("ngToast",["ngSanitize","ngToast.directives","ngToast.provider"])}(window,window.angular);!function(){angular.module("ngCordova",["ngCordova.plugins"]),angular.module("ngCordova.plugins.actionSheet",[]).factory("$cordovaActionSheet",["$q","$window",function(e,n){return{show:function(t){var r=e.defer();return n.plugins.actionsheet.show(t,function(e){r.resolve(e)}),r.promise},hide:function(){return n.plugins.actionsheet.hide()}}}]),angular.module("ngCordova.plugins.adMob",[]).factory("$cordovaAdMob",["$q","$window",function(e,n){return{createBannerView:function(t){var r=e.defer();return n.plugins.AdMob.createBannerView(t,function(){r.resolve()},function(){r.reject()}),r.promise},createInterstitialView:function(t){var r=e.defer();return n.plugins.AdMob.createInterstitialView(t,function(){r.resolve()},function(){r.reject()}),r.promise},requestAd:function(t){var r=e.defer();return n.plugins.AdMob.requestAd(t,function(){r.resolve()},function(){r.reject()}),r.promise},showAd:function(t){var r=e.defer();return n.plugins.AdMob.showAd(t,function(){r.resolve()},function(){r.reject()}),r.promise},requestInterstitialAd:function(t){var r=e.defer();return n.plugins.AdMob.requestInterstitialAd(t,function(){r.resolve()},function(){r.reject()}),r.promise}}}]),angular.module("ngCordova.plugins.appAvailability",[]).factory("$cordovaAppAvailability",["$q",function(e){return{check:function(n){var t=e.defer();return appAvailability.check(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.appRate",[]).provider("$cordovaAppRate",[function(){this.setPreferences=function(e){e&&angular.isObject(e)&&(AppRate.preferences.useLanguage=e.language||null,AppRate.preferences.displayAppName=e.appName||"",AppRate.preferences.promptAgainForEachNewVersion=e.promptForNewVersion||!0,AppRate.preferences.openStoreInApp=e.openStoreInApp||!1,AppRate.preferences.usesUntilPrompt=e.usesUntilPrompt||3,AppRate.preferences.useCustomRateDialog=e.useCustomRateDialog||!1,AppRate.preferences.storeAppURL.ios=e.iosURL||null,AppRate.preferences.storeAppURL.android=e.androidURL||null,AppRate.preferences.storeAppURL.blackberry=e.blackberryURL||null,AppRate.preferences.storeAppURL.windows8=e.windowsURL||null)},this.setCustomLocale=function(e){var n={title:"Rate %@",message:"If you enjoy using %@, would you mind taking a moment to rate it? It wonâ€™t take more than a minute. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"Remind Me Later",rateButtonLabel:"Rate It Now"};n=angular.extend(n,e),AppRate.preferences.customLocale=n},this.$get=["$q",function(e){return{promptForRating:function(n){var t=e.defer(),r=AppRate.promptForRating(n);return t.resolve(r),t.promise},navigateToAppStore:function(){var n=e.defer(),t=AppRate.navigateToAppStore();return n.resolve(t),n.promise},onButtonClicked:function(e){AppRate.onButtonClicked=function(n){e.call(this,n)}},onRateDialogShow:function(e){AppRate.onRateDialogShow=e()}}}]}]),angular.module("ngCordova.plugins.appVersion",[]).factory("$cordovaAppVersion",["$q",function(e){return{getAppVersion:function(){var n=e.defer();return cordova.getAppVersion(function(e){n.resolve(e)}),n.promise}}}]),angular.module("ngCordova.plugins.backgroundGeolocation",[]).factory("$cordovaBackgroundGeolocation",["$q","$window",function(e,n){return{init:function(){n.navigator.geolocation.getCurrentPosition(function(e){return e})},configure:function(t){this.init();var r=e.defer();return n.plugins.backgroundGeoLocation.configure(function(e){r.notify(e),n.plugins.backgroundGeoLocation.finish()},function(e){r.reject(e)},t),this.start(),r.promise},start:function(){var t=e.defer();return n.plugins.backgroundGeoLocation.start(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},stop:function(){var t=e.defer();return n.plugins.backgroundGeoLocation.stop(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.badge",[]).factory("$cordovaBadge",["$q",function(e){return{hasPermission:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(!0):n.reject("You do not have permission")}),n.promise},promptForPermission:function(){return cordova.plugins.notification.badge.promptForPermission()},set:function(n){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(cordova.plugins.notification.badge.set(n)):t.reject("You do not have permission to set Badge")}),t.promise},get:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?cordova.plugins.notification.badge.get(function(e){n.resolve(e)}):n.reject("You do not have permission to get Badge")}),n.promise},clear:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(cordova.plugins.notification.badge.clear()):n.reject("You do not have permission to clear Badge")}),n.promise},configure:function(e){return cordova.plugins.notification.badge.configure(e)}}}]),angular.module("ngCordova.plugins.barcodeScanner",[]).factory("$cordovaBarcodeScanner",["$q",function(e){return{scan:function(){var n=e.defer();return cordova.plugins.barcodeScanner.scan(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},encode:function(n,t){var r=e.defer();return n=n||"TEXT_TYPE",cordova.plugins.barcodeScanner.encode(n,t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.batteryStatus",[]).factory("$cordovaBatteryStatus",["$rootScope","$window","$timeout",function(e,n,t){var r=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:status",n)})},o=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:critical",n)})},i=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:low",n)})};return document.addEventListener("deviceready",function(){navigator.battery&&(n.addEventListener("batterystatus",r,!1),n.addEventListener("batterycritical",o,!1),n.addEventListener("batterylow",i,!1))},!1),!0}]).run(["$cordovaBatteryStatus",function(){}]),angular.module("ngCordova.plugins.ble",[]).factory("$cordovaBLE",["$q",function(e){return{scan:function(n,t){var r=e.defer();return ble.scan(n,t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},connect:function(n){var t=e.defer();return ble.connect(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},disconnect:function(n){var t=e.defer();return ble.disconnect(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},read:function(n,t,r){var o=e.defer();return ble.read(n,t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},write:function(n,t,r,o){var i=e.defer();return ble.write(n,t,r,o,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},writeCommand:function(n,t,r,o){var i=e.defer();return ble.writeCommand(n,t,r,o,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},notify:function(n,t,r){var o=e.defer();return ble.notify(n,t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},indicate:function(n,t,r){var o=e.defer();return ble.indicate(n,t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},isConnected:function(n){var t=e.defer();return ble.isConnected(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},isEnabled:function(){var n=e.defer();return ble.isEnabled(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.bluetoothSerial",[]).factory("$cordovaBluetoothSerial",["$q","$window",function(e,n){return{connect:function(t){var r=e.defer();return n.bluetoothSerial.connect(t,function(){r.resolve()},function(e){r.reject(e)}),r.promise},connectInsecure:function(t){var r=e.defer();return n.bluetoothSerial.connectInsecure(t,function(){r.resolve()},function(e){r.reject(e)}),r.promise},disconnect:function(){var t=e.defer();return n.bluetoothSerial.disconnect(function(){t.resolve()},function(e){t.reject(e)}),t.promise},list:function(){var t=e.defer();return n.bluetoothSerial.list(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},isEnabled:function(){var t=e.defer();return n.bluetoothSerial.isEnabled(function(){t.resolve()},function(){t.reject()}),t.promise},isConnected:function(){var t=e.defer();return n.bluetoothSerial.isConnected(function(){t.resolve()},function(){t.reject()}),t.promise},available:function(){var t=e.defer();return n.bluetoothSerial.available(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},read:function(){var t=e.defer();return n.bluetoothSerial.read(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},readUntil:function(t){var r=e.defer();return n.bluetoothSerial.readUntil(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},write:function(t){var r=e.defer();return n.bluetoothSerial.write(t,function(){r.resolve()},function(e){r.reject(e)}),r.promise},subscribe:function(t){var r=e.defer();return n.bluetoothSerial.subscribe(t,function(e){r.notify(e)},function(e){r.reject(e)}),r.promise},subscribeRawData:function(){var t=e.defer();return n.bluetoothSerial.subscribeRawData(function(e){t.notify(e)},function(e){t.reject(e)}),t.promise},unsubscribe:function(){var t=e.defer();return n.bluetoothSerial.unsubscribe(function(){t.resolve()},function(e){t.reject(e)}),t.promise},unsubscribeRawData:function(){var t=e.defer();return n.bluetoothSerial.unsubscribeRawData(function(){t.resolve()},function(e){t.reject(e)}),t.promise},clear:function(){var t=e.defer();return n.bluetoothSerial.clear(function(){t.resolve()},function(e){t.reject(e)}),t.promise},readRSSI:function(){var t=e.defer();return n.bluetoothSerial.readRSSI(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.brightness",[]).factory("$cordovaBrightness",["$q","$window",function(e,n){return{get:function(){var t=e.defer();return n.cordova.plugins.brightness.getBrightness(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},set:function(t){var r=e.defer();return n.cordova.plugins.brightness.setBrightness(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setKeepScreenOn:function(t){var r=e.defer();return n.cordova.plugins.brightness.setKeepScreenOn(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.calendar",[]).factory("$cordovaCalendar",["$q","$window",function(e,n){return{createCalendar:function(t){var r=e.defer(),o=n.plugins.calendar.getCreateCalendarOptions();return"string"==typeof t?o.calendarName=t:o=angular.extend(o,t),n.plugins.calendar.createCalendar(o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteCalendar:function(t){var r=e.defer();return n.plugins.calendar.deleteCalendar(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEvent:function(t){var r=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,t),n.plugins.calendar.createEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventWithOptions:function(t){var r=e.defer(),o=[],i=window.plugins.calendar.getCalendarOptions(),a={title:null,location:null,notes:null,startDate:null,endDate:null};o=Object.keys(a);for(var c in t)-1===o.indexOf(c)?i[c]=t[c]:a[c]=t[c];return n.plugins.calendar.createEventWithOptions(a.title,a.location,a.notes,new Date(a.startDate),new Date(a.endDate),i,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInteractively:function(t){var r=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,t),n.plugins.calendar.createEventInteractively(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInNamedCalendar:function(t){var r=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null,calendarName:null};return o=angular.extend(o,t),n.plugins.calendar.createEventInNamedCalendar(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),o.calendarName,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},findEvent:function(t){var r=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,t),n.plugins.calendar.findEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},listEventsInRange:function(t,r){var o=e.defer();return n.plugins.calendar.listEventsInRange(t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},listCalendars:function(){var t=e.defer();return n.plugins.calendar.listCalendars(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},findAllEventsInNamedCalendar:function(t){var r=e.defer();return n.plugins.calendar.findAllEventsInNamedCalendar(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},modifyEvent:function(t){var r=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null,newTitle:null,newLocation:null,newNotes:null,newStartDate:null,newEndDate:null};return o=angular.extend(o,t),n.plugins.calendar.modifyEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),o.newTitle,o.newLocation,o.newNotes,new Date(o.newStartDate),new Date(o.newEndDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteEvent:function(t){var r=e.defer(),o={newTitle:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,t),n.plugins.calendar.deleteEvent(o.newTitle,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.camera",[]).factory("$cordovaCamera",["$q",function(e){return{getPicture:function(n){var t=e.defer();return navigator.camera?(navigator.camera.getPicture(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},cleanup:function(){var n=e.defer();return navigator.camera.cleanup(function(){n.resolve()},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.capture",[]).factory("$cordovaCapture",["$q",function(e){return{captureAudio:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureAudio(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},captureImage:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureImage(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},captureVideo:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureVideo(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)}}}]),angular.module("ngCordova.plugins.clipboard",[]).factory("$cordovaClipboard",["$q","$window",function(e,n){return{copy:function(t){var r=e.defer();return n.cordova.plugins.clipboard.copy(t,function(){r.resolve()},function(){r.reject()}),r.promise},paste:function(){var t=e.defer();return n.cordova.plugins.clipboard.paste(function(e){t.resolve(e)},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.contacts",[]).factory("$cordovaContacts",["$q",function(e){return{save:function(n){var t=e.defer(),r=navigator.contacts.create(n);return r.save(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},remove:function(n){var t=e.defer(),r=navigator.contacts.create(n);return r.remove(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},clone:function(e){var n=navigator.contacts.create(e);return n.clone(e)},find:function(n){var t=e.defer(),r=n.fields||["id","displayName"];return delete n.fields,navigator.contacts.find(r,function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},pickContact:function(){var n=e.defer();return navigator.contacts.pickContact(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.datePicker",[]).factory("$cordovaDatePicker",["$window","$q",function(e,n){return{show:function(t){var r=n.defer();return t=t||{date:new Date,mode:"date"},e.datePicker.show(t,function(e){r.resolve(e)}),r.promise}}}]),angular.module("ngCordova.plugins.device",[]).factory("$cordovaDevice",[function(){return{getDevice:function(){return device},getCordova:function(){return device.cordova},getModel:function(){return device.model},getName:function(){return device.name},getPlatform:function(){return device.platform},getUUID:function(){return device.uuid},getVersion:function(){return device.version}}}]),angular.module("ngCordova.plugins.deviceMotion",[]).factory("$cordovaDeviceMotion",["$q",function(e){return{getCurrentAcceleration:function(){var n=e.defer();return navigator.accelerometer.getCurrentAcceleration(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},watchAcceleration:function(n){var t=e.defer(),r=navigator.accelerometer.watchAcceleration(function(e){t.notify(e)},function(e){t.reject(e)},n);return t.promise.cancel=function(){navigator.accelerometer.clearWatch(r)},t.promise.clearWatch=function(e){navigator.accelerometer.clearWatch(e||r)},t.promise.watchID=r,t.promise},clearWatch:function(e){return navigator.accelerometer.clearWatch(e)}}}]),angular.module("ngCordova.plugins.deviceOrientation",[]).factory("$cordovaDeviceOrientation",["$q",function(e){return{getCurrentHeading:function(){var n=e.defer();return navigator.compass.getCurrentHeading(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},watchHeading:function(n){var t=e.defer(),r=navigator.compass.watchHeading(function(e){t.notify(e)},function(e){t.reject(e)},n);return t.promise.cancel=function(){navigator.compass.clearWatch(r)},t.promise.clearWatch=function(e){navigator.compass.clearWatch(e||r)},t.promise.watchID=r,t.promise},clearWatch:function(e){return navigator.compass.clearWatch(e)}}}]),angular.module("ngCordova.plugins.dialogs",[]).factory("$cordovaDialogs",["$q","$window",function(e,n){return{alert:function(t,r,o){var i=e.defer();return n.navigator.notification?navigator.notification.alert(t,function(){i.resolve()},r,o):(n.alert(t),i.resolve()),i.promise},confirm:function(t,r,o){var i=e.defer();return n.navigator.notification?navigator.notification.confirm(t,function(e){i.resolve(e)},r,o):i.resolve(n.confirm(t)?1:2),i.promise},prompt:function(t,r,o,i){var a=e.defer();if(n.navigator.notification)navigator.notification.prompt(t,function(e){a.resolve(e)},r,o,i);else{var c=n.prompt(t,i);a.resolve(null!==c?{input1:c,buttonIndex:1}:{input1:c,buttonIndex:2})}return a.promise},beep:function(e){return navigator.notification.beep(e)}}}]),angular.module("ngCordova.plugins.emailComposer",[]).factory("$cordovaEmailComposer",["$q",function(e){return{isAvailable:function(){var n=e.defer();return cordova.plugins.email.isAvailable(function(e){e?n.resolve():n.reject()}),n.promise},open:function(n){var t=e.defer();return cordova.plugins.email.open(n,function(){t.reject()}),t.promise},addAlias:function(e,n){cordova.plugins.email.addAlias(e,n)}}}]),angular.module("ngCordova.plugins.facebook",[]).provider("$cordovaFacebook",[function(){this.browserInit=function(e,n){this.appID=e,this.appVersion=n||"v2.0",facebookConnectPlugin.browserInit(this.appID,this.appVersion)},this.$get=["$q",function(e){return{login:function(n){var t=e.defer();return facebookConnectPlugin.login(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},showDialog:function(n){var t=e.defer();return facebookConnectPlugin.showDialog(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},api:function(n,t){var r=e.defer();return facebookConnectPlugin.api(n,t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},getAccessToken:function(){var n=e.defer();return facebookConnectPlugin.getAccessToken(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getLoginStatus:function(){var n=e.defer();return facebookConnectPlugin.getLoginStatus(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},logout:function(){var n=e.defer();return facebookConnectPlugin.logout(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]}]),angular.module("ngCordova.plugins.facebookAds",[]).factory("$cordovaFacebookAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.FacebookAds.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.FacebookAds.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.FacebookAds.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.FacebookAds.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.FacebookAds.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.FacebookAds.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.FacebookAds.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.FacebookAds.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.file",[]).provider("$cordovaFile",[function(){var e=this.defaults={fileSystem:{size:1048576}};this.setFileSystemSize=function(e){this.defaults.fileSystem.size=e},this.$get=["$q","$window","$log","$timeout",function(n,t,r,o){function i(e){var n=new FileReader;return n.onloadend=function(){this.error?e.reject(this.error):e.resolve(this.result)},n}function a(e,t){var r=n.defer();return u(e,t).then(function(e){e.file(r.resolve,r.reject)},r.reject),r.promise}function c(e,t){var r=n.defer();return u(e,t).then(function(e){e.createWriter(r.resolve,r.reject)},r.reject),r.promise}function u(e,t){var r=n.defer();return f().then(function(n){n.root.getFile(e,t,r.resolve,r.reject)},r.reject),r.promise}function s(e){var r=n.defer();return t.resolveLocalFileSystemURL(e,function(e){e.file(r.resolve,r.reject)},r.reject),r.promise}function l(e,t){var r=n.defer();return f().then(function(n){n.root.getDirectory(e,t,r.resolve,r.reject)},r.reject),r.promise}function f(){var r=n.defer();t.requestFileSystem=t.requestFileSystem||t.webkitRequestFileSystem;try{t.requestFileSystem(t.PERSISTENT,e.fileSystem.size,r.resolve,r.reject)}catch(o){r.reject(o)}return r.promise}return{checkDir:function(e){return l(e,{create:!1})},createDir:function(e,n){return l(e,{create:!0,exclusive:n})},listDir:function(e){var t=n.defer();return l(e,{create:!1}).then(function(n){var r=n.createReader();r.readEntries(function(e){t.resolve(e)},function(){t.reject("DIR_READ_ERROR : "+e)})},function(){t.reject("DIR_NOT_FOUND : "+e)}),t.promise},checkFile:function(e){return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),u(e,{create:!1})},createFile:function(e,n){return 3==arguments.length&&(e="/"+e+"/"+arguments[1],n=arguments[2]),u(e,{create:!0,exclusive:n})},removeFile:function(e){var t=n.defer();return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),u(e,{create:!1}).then(function(e){e.remove(t.resolve,t.reject)},t.reject),t.promise},writeFile:function(e,t,r){var o=n.defer();return c(e,{create:!0}).then(function(e){r&&r.append===!0&&e.seek(e.length),e.onwriteend=function(e){this.error?o.reject(this.error):o.resolve(e)},e.write(t)},o.reject),o.promise},readFile:function(e){return r.log("readFile is now deprecated as of v0.1.4-alpha, use readAsText instead"),this.readAsText(e)},readAsText:function(e){var t=n.defer();return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),a(e,{create:!1}).then(function(e){i(t).readAsText(e)},t.reject),t.promise},readAsDataURL:function(e){var t=n.defer();return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),a(e,{create:!1}).then(function(e){i(t).readAsDataURL(e)},t.reject),t.promise},readAsBinaryString:function(e){var t=n.defer();return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),a(e,{create:!1}).then(function(e){i(t).readAsBinaryString(e)},t.reject),t.promise},readAsArrayBuffer:function(e){var t=n.defer();return 2==arguments.length&&(e="/"+e+"/"+arguments[1]),a(e,{create:!1}).then(function(e){i(t).readAsArrayBuffer(e)},t.reject),t.promise},readFileMetadata:function(e){return a(e,{create:!1})},readFileAbsolute:function(e){var t=n.defer();return s(e).then(function(e){i(t).readAsText(e)},t.reject),t.promise},readFileMetadataAbsolute:function(e){return s(e)},downloadFile:function(e,t,r,i){console.warn("This method is deprecated as of v0.1.11-alpha, please refer to $cordovaFileTransfer");var a=n.defer(),c=new FileTransfer,u=encodeURI(e);return r&&void 0!==r.timeout&&null!==r.timeout&&(o(function(){c.abort()},r.timeout),r.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.download(u,t,a.resolve,a.reject,i,r),a.promise},uploadFile:function(e,t,r,i){console.warn("This method is deprecated as of v0.1.11-alpha, please refer to $cordovaFileTransfer");var a=n.defer(),c=new FileTransfer,u=encodeURI(e);return r&&void 0!==r.timeout&&null!==r.timeout&&(o(function(){c.abort()},r.timeout),r.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.upload(t,u,a.resolve,a.reject,r,i),a.promise}}}]}]),angular.module("ngCordova.plugins.fileOpener2",[]).factory("$cordovaFileOpener2",["$q",function(e){return{open:function(n,t){var r=e.defer();return cordova.plugins.fileOpener2.open(n,t,{error:function(e){r.reject(e)},success:function(){r.resolve()}}),r.promise},uninstall:function(n){var t=e.defer();return cordova.plugins.fileOpener2.uninstall(n,{error:function(e){t.reject(e)},success:function(){t.resolve()}}),t.promise},appIsInstalled:function(n){var t=e.defer();return cordova.plugins.fileOpener2.appIsInstalled(n,{success:function(e){t.resolve(e)}}),t.promise}}}]),angular.module("ngCordova.plugins.fileTransfer",[]).factory("$cordovaFileTransfer",["$q","$timeout",function(e,n){return{download:function(t,r,o,i){var a=e.defer(),c=new FileTransfer,u=o&&o.encodeURI===!1?t:encodeURI(t);return o&&void 0!==o.timeout&&null!==o.timeout&&(n(function(){c.abort()},o.timeout),o.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.download(u,r,a.resolve,a.reject,i,o),a.promise},upload:function(t,r,o,i){var a=e.defer(),c=new FileTransfer,u=o&&o.encodeURI===!1?t:encodeURI(t);return o&&void 0!==o.timeout&&null!==o.timeout&&(n(function(){c.abort()},o.timeout),o.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.upload(r,u,a.resolve,a.reject,o,i),a.promise}}}]),angular.module("ngCordova.plugins.flashlight",[]).factory("$cordovaFlashlight",["$q","$window",function(e,n){return{available:function(){var t=e.defer();return n.plugins.flashlight.available(function(e){t.resolve(e)}),t.promise},switchOn:function(){var t=e.defer();return n.plugins.flashlight.switchOn(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},switchOff:function(){var t=e.defer();return n.plugins.flashlight.switchOff(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},toggle:function(){var t=e.defer();return n.plugins.flashlight.toggle(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.flurryAds",[]).factory("$cordovaFlurryAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.FlurryAds.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.FlurryAds.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.FlurryAds.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.FlurryAds.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.FlurryAds.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.FlurryAds.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.FlurryAds.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.FlurryAds.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.ga",[]).factory("$cordovaGA",["$q","$window",function(e,n){return{init:function(t,r){var o=e.defer();return r=r>=0?r:10,n.plugins.gaPlugin.init(function(e){o.resolve(e)},function(e){o.reject(e)},t,r),o.promise},trackEvent:function(t,r,o,i,a,c){var u=e.defer();return n.plugins.gaPlugin.trackEvent(function(e){u.resolve(e)},function(e){u.reject(e)},o,i,a,c),u.promise},trackPage:function(t,r,o){var i=e.defer();return n.plugins.gaPlugin.trackPage(function(e){i.resolve(e)},function(e){i.reject(e)},o),i.promise},setVariable:function(t,r,o,i){var a=e.defer();return n.plugins.gaPlugin.setVariable(function(e){a.resolve(e)},function(e){a.reject(e)},o,i),a.promise},exit:function(){var t=e.defer();return n.plugins.gaPlugin.exit(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.geolocation",[]).factory("$cordovaGeolocation",["$q",function(e){return{getCurrentPosition:function(n){var t=e.defer();return navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},watchPosition:function(n){var t=e.defer(),r=navigator.geolocation.watchPosition(function(e){t.notify(e)},function(e){t.reject(e)},n);return t.promise.cancel=function(){navigator.geolocation.clearWatch(r)},t.promise.clearWatch=function(e){navigator.geolocation.clearWatch(e||r)},t.promise.watchID=r,t.promise},clearWatch:function(e){return navigator.geolocation.clearWatch(e)}}}]),angular.module("ngCordova.plugins.globalization",[]).factory("$cordovaGlobalization",["$q",function(e){return{getPreferredLanguage:function(){var n=e.defer();return navigator.globalization.getPreferredLanguage(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getLocaleName:function(){var n=e.defer();return navigator.globalization.getLocaleName(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getFirstDayOfWeek:function(){var n=e.defer();return navigator.globalization.getFirstDayOfWeek(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},dateToString:function(n,t){var r=e.defer();return navigator.globalization.dateToString(n,function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},stringToDate:function(n,t){var r=e.defer();return navigator.globalization.stringToDate(n,function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},getDatePattern:function(n){var t=e.defer();return navigator.globalization.getDatePattern(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},getDateNames:function(n){var t=e.defer();return navigator.globalization.getDateNames(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},isDayLightSavingsTime:function(n){var t=e.defer();return navigator.globalization.isDayLightSavingsTime(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},numberToString:function(n,t){var r=e.defer();return navigator.globalization.numberToString(n,function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},stringToNumber:function(n,t){var r=e.defer();return navigator.globalization.stringToNumber(n,function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},getNumberPattern:function(n){var t=e.defer();return navigator.globalization.getNumberPattern(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},getCurrencyPattern:function(n){var t=e.defer();return navigator.globalization.getCurrencyPattern(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.googleAds",[]).factory("$cordovaGoogleAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.AdMob.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.AdMob.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.AdMob.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.AdMob.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.AdMob.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.AdMob.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.AdMob.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.AdMob.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.googleAnalytics",[]).factory("$cordovaGoogleAnalytics",["$q","$window",function(e,n){return{startTrackerWithId:function(t){var r=e.defer();return n.analytics.startTrackerWithId(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setUserId:function(t){var r=e.defer();return n.analytics.setUserId(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},debugMode:function(){var t=e.defer();return n.analytics.debugMode(function(e){t.resolve(e)},function(){t.reject()}),t.promise},trackView:function(t){var r=e.defer();return n.analytics.trackView(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},addCustomDimension:function(t,r){var o=e.defer();return n.analytics.addCustomDimension(t,r,function(){o.resolve()},function(e){o.reject(e)}),o.promise},trackEvent:function(t,r,o,i){var a=e.defer();return n.analytics.trackEvent(t,r,o,i,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},addTransaction:function(t,r,o,i,a,c){var u=e.defer();return n.analytics.addTransaction(t,r,o,i,a,c,function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise},addTransactionItem:function(t,r,o,i,a,c,u){var s=e.defer();return n.analytics.addTransactionItem(t,r,o,i,a,c,u,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise}}}]),angular.module("ngCordova.plugins.googleMap",[]).factory("$cordovaGoogleMap",["$q","$window",function(e,n){var t=null;return{getMap:function(r){var o=e.defer();if(n.plugin.google.maps){var i=document.getElementById("map_canvas");t=n.plugin.google.maps.Map.getMap(r),t.setDiv(i),o.resolve(t)}else o.reject(null);return o.promise},isMapLoaded:function(){return!!t},addMarker:function(n){var r=e.defer();return t.addMarker(n,function(e){r.resolve(e)}),r.promise},getMapTypeIds:function(){return n.plugin.google.maps.mapTypeId},setVisible:function(n){var r=e.defer();return t.setVisible(n),r.promise},cleanup:function(){t=null}}}]),angular.module("ngCordova.plugins.healthKit",[]).factory("$cordovaHealthKit",["$q","$window",function(e,n){return{isAvailable:function(){var t=e.defer();return n.plugins.healthkit.available(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},requestAuthorization:function(t,r){var o=e.defer();return t=t||["HKCharacteristicTypeIdentifierDateOfBirth","HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight"],r=r||["HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight","HKQuantityTypeIdentifierDistanceCycling"],n.plugins.healthkit.requestAuthorization({readTypes:t,writeTypes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},readDateOfBirth:function(){var t=e.defer();return n.plugins.healthkit.readDateOfBirth(function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},readGender:function(){var t=e.defer();return n.plugins.healthkit.readGender(function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},saveWeight:function(t,r,o){var i=e.defer();return n.plugins.healthkit.saveWeight({unit:r||"lb",amount:t,date:o||new Date},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},readWeight:function(t){var r=e.defer();return n.plugins.healthkit.readWeight({unit:t||"lb"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},saveHeight:function(t,r,o){var i=e.defer();return n.plugins.healthkit.saveHeight({unit:r||"in",amount:t,date:o||new Date},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},readHeight:function(t){var r=e.defer();return n.plugins.healthkit.readHeight({unit:t||"in"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},findWorkouts:function(){var t=e.defer();return n.plugins.healthkit.findWorkouts({},function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},saveWorkout:function(t){var r=e.defer();return n.plugins.healthkit.saveWorkout(t,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},querySampleType:function(t){var r=e.defer();return n.plugins.healthkit.querySampleType(t,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise}}}]),angular.module("ngCordova.plugins.httpd",[]).factory("$cordovaHttpd",["$q",function(e){return{startServer:function(n){var t=e.defer();return cordova.plugins.CorHttpd.startServer(n,function(){t.resolve()},function(){t.reject()}),t.promise},stopServer:function(){var n=e.defer();return cordova.plugins.CorHttpd.stopServer(function(){n.resolve()},function(){n.reject()}),n.promise},getURL:function(){var n=e.defer();return cordova.plugins.CorHttpd.getURL(function(e){n.resolve(e)},function(){n.reject()}),n.promise},getLocalPath:function(){var n=e.defer();return cordova.plugins.CorHttpd.getLocalPath(function(e){n.resolve(e)},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.iAd",[]).factory("$cordovaiAd",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.iAd.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.iAd.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.iAd.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.iAd.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.iAd.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.iAd.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.iAd.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.iAd.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.imagePicker",[]).factory("$cordovaImagePicker",["$q","$window",function(e,n){return{getPictures:function(t){var r=e.defer();return n.imagePicker.getPictures(function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise}}}]),angular.module("ngCordova.plugins.inAppBrowser",[]).provider("$cordovaInAppBrowser",[function(){var e,n=this.defaultOptions={};this.setDefaultOptions=function(e){n=angular.extend(n,e)},this.$get=["$rootScope","$q","$window","$timeout",function(t,r,o,i){return{open:function(a,c,u){var s=r.defer();if(u&&!angular.isObject(u))return s.reject("options must be an object"),s.promise;var l=angular.extend({},n,u),f=[];angular.forEach(l,function(e,n){f.push(n+"="+e)});var d=f.join();return e=o.open(a,c,d),e.addEventListener("loadstart",function(e){i(function(){t.$broadcast("$cordovaInAppBrowser:loadstart",e)})},!1),e.addEventListener("loadstop",function(e){s.resolve(e),i(function(){t.$broadcast("$cordovaInAppBrowser:loadstop",e)})},!1),e.addEventListener("loaderror",function(e){s.reject(e),i(function(){t.$broadcast("$cordovaInAppBrowser:loaderror",e)})},!1),e.addEventListener("exit",function(e){i(function(){t.$broadcast("$cordovaInAppBrowser:exit",e)})},!1),s.promise},close:function(){e.close(),e=null},show:function(){e.show()},executeScript:function(n){var t=r.defer();return e.executeScript(n,function(e){t.resolve(e)}),t.promise},insertCSS:function(n){var t=r.defer();return e.insertCSS(n,function(e){t.resolve(e)}),t.promise}}}]}]),angular.module("ngCordova.plugins.keyboard",[]).factory("$cordovaKeyboard",[function(){return{hideAccessoryBar:function(e){return cordova.plugins.Keyboard.hideKeyboardAccessoryBar(e)},close:function(){return cordova.plugins.Keyboard.close()},disableScroll:function(e){return cordova.plugins.Keyboard.disableScroll(e)},isVisible:function(){return cordova.plugins.Keyboard.isVisible}}}]),angular.module("ngCordova.plugins.keychain",[]).factory("$cordovaKeychain",["$q","$window",function(e,n){if("Keychain"in n)var t=new Keychain;return{getForKey:function(n,r){var o=e.defer();return t.getForKey(o.resolve,o.reject,n,r),o.promise},setForKey:function(n,r,o){var i=e.defer();return t.setForKey(i.resolve,i.reject,n,r,o),i.promise},removeForKey:function(n,r){var o=e.defer();return t.removeForKey(o.resolve,o.reject,n,r),o.promise}}}]),angular.module("ngCordova.plugins.localNotification",[]).factory("$cordovaLocalNotification",["$q","$window","$rootScope","$timeout",function(e,n,t,r){return n.plugin&&n.plugin.notification&&(n.plugin.notification.local.oncancel=function(e,n,o){var i={id:e,state:n,json:o};r(function(){t.$broadcast("$cordovaLocalNotification:canceled",i)})},n.plugin.notification.local.onclick=function(e,n,o){var i={id:e,state:n,json:o};r(function(){t.$broadcast("$cordovaLocalNotification:clicked",i)})},n.plugin.notification.local.ontrigger=function(e,n,o){var i={id:e,state:n,json:o};r(function(){t.$broadcast("$cordovaLocalNotification:triggered",i)})},n.plugin.notification.local.onadd=function(e,n,o){var i={id:e,state:n,json:o};r(function(){t.$broadcast("$cordovaLocalNotification:added",i)})}),{add:function(t,r){var o=e.defer();return r=r||null,n.plugin.notification.local.add(t,function(e){o.resolve(e)},r),o.promise},cancel:function(t,r){var o=e.defer();return r=r||null,n.plugin.notification.local.cancel(t,function(e){o.resolve(e)},r),o.promise},cancelAll:function(t){var r=e.defer();return t=t||null,n.plugin.notification.local.cancelAll(function(e){r.resolve(e)},t),r.promise},isScheduled:function(t,r){var o=e.defer();return r=r||null,n.plugin.notification.local.isScheduled(t,function(e){o.resolve(e)},r),o.promise},hasPermission:function(t){var r=e.defer();return n.plugin.notification.local.hasPermission(function(e){e?r.resolve(e):r.reject(e)},t),r.promise},promptForPermission:function(){var t=e.defer();return n.plugin.notification.local.promptForPermission(function(e){e?t.resolve(e):t.reject(e)}),t.promise},registerPermission:function(){var t=e.defer();return n.plugin.notification.local.registerPermission(function(e){e?t.resolve(e):t.reject(e)}),t.promise},getScheduledIds:function(t){var r=e.defer();return n.plugin.notification.local.getScheduledIds(function(e){r.resolve(e)},t),r.promise},isTriggered:function(t,r){var o=e.defer();return n.plugin.notification.local.isTriggered(t,function(e){o.resolve(e)},r),o.promise},getTriggeredIds:function(t){var r=e.defer();return n.plugin.notification.local.getTriggeredIds(function(e){r.resolve(e)},t),r.promise},getDefaults:function(){return n.plugin.notification.local.getDefaults()},setDefaults:function(e){n.plugin.notification.local.setDefaults(e)}}}]),angular.module("ngCordova.plugins.mMediaAds",[]).factory("$cordovaMMediaAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.mMedia.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.mMedia.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.mMedia.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.mMedia.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.mMedia.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.mMedia.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.mMedia.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.mMedia.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.media",[]).factory("$cordovaMedia",["$q",function(e){return{newMedia:function(n){var t,r=e.defer(),o=null;return t=new Media(n,function(e){r.resolve(e)},function(e){r.reject(e)},function(e){o=e}),r.promise.getCurrentPosition=function(){t.getCurrentPosition(function(){},function(){})},r.promise.getDuration=function(){t.getDuration()},r.promise.play=function(e){"object"!=typeof e&&(e={}),t.play(e)},r.promise.pause=function(){t.pause()},r.promise.stop=function(){t.stop()},r.promise.release=function(){t.release()},r.promise.seekTo=function(e){t.seekTo(e)},r.promise.setVolume=function(e){t.setVolume(e)},r.promise.startRecord=function(){t.startRecord()},r.promise.stopRecord=function(){t.stopRecord()},r.promise}}}]),angular.module("ngCordova.plugins.mobfoxAds",[]).factory("$cordovaMobFoxAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.MobFox.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.MobFox.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.MobFox.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.MobFox.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.MobFox.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.MobFox.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.MobFox.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.MobFox.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins",["ngCordova.plugins.actionSheet","ngCordova.plugins.adMob","ngCordova.plugins.appAvailability","ngCordova.plugins.appRate","ngCordova.plugins.appVersion","ngCordova.plugins.backgroundGeolocation","ngCordova.plugins.badge","ngCordova.plugins.barcodeScanner","ngCordova.plugins.batteryStatus","ngCordova.plugins.ble","ngCordova.plugins.bluetoothSerial","ngCordova.plugins.brightness","ngCordova.plugins.calendar","ngCordova.plugins.camera","ngCordova.plugins.capture","ngCordova.plugins.clipboard","ngCordova.plugins.contacts","ngCordova.plugins.datePicker","ngCordova.plugins.device","ngCordova.plugins.deviceMotion","ngCordova.plugins.deviceOrientation","ngCordova.plugins.dialogs","ngCordova.plugins.emailComposer","ngCordova.plugins.facebook","ngCordova.plugins.facebookAds","ngCordova.plugins.file","ngCordova.plugins.fileTransfer","ngCordova.plugins.fileOpener2","ngCordova.plugins.flashlight","ngCordova.plugins.flurryAds","ngCordova.plugins.ga","ngCordova.plugins.geolocation","ngCordova.plugins.globalization","ngCordova.plugins.googleAds","ngCordova.plugins.googleAnalytics","ngCordova.plugins.googleMap","ngCordova.plugins.healthKit","ngCordova.plugins.httpd","ngCordova.plugins.iAd","ngCordova.plugins.imagePicker","ngCordova.plugins.inAppBrowser","ngCordova.plugins.keyboard","ngCordova.plugins.keychain","ngCordova.plugins.localNotification","ngCordova.plugins.media","ngCordova.plugins.mMediaAds","ngCordova.plugins.mobfoxAds","ngCordova.plugins.mopubAds","ngCordova.plugins.nativeAudio","ngCordova.plugins.network","ngCordova.plugins.oauth","ngCordova.plugins.oauthUtility","ngCordova.plugins.pinDialog","ngCordova.plugins.prefs","ngCordova.plugins.printer","ngCordova.plugins.progressIndicator","ngCordova.plugins.push","ngCordova.plugins.sms","ngCordova.plugins.socialSharing","ngCordova.plugins.spinnerDialog","ngCordova.plugins.splashscreen","ngCordova.plugins.sqlite","ngCordova.plugins.statusbar","ngCordova.plugins.toast","ngCordova.plugins.touchid","ngCordova.plugins.vibration","ngCordova.plugins.videoCapturePlus","ngCordova.plugins.zip"]),angular.module("ngCordova.plugins.mopubAds",[]).factory("$cordovaMoPubAds",["$q","$window",function(e,n){return{setOptions:function(t){var r=e.defer();return n.MoPub.setOptions(t,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(t){var r=e.defer();return n.MoPub.createBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var t=e.defer();return n.MoPub.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var r=e.defer();return n.MoPub.showBanner(t,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(t,r){var o=e.defer();return n.MoPub.showBannerAtXY(t,r,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var t=e.defer();return n.MoPub.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var r=e.defer();return n.MoPub.prepareInterstitial(t,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var t=e.defer();return n.MoPub.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.nativeAudio",[]).factory("$cordovaNativeAudio",["$q","$window",function(e,n){return{preloadSimple:function(t,r){var o=e.defer();return n.plugins.NativeAudio.preloadSimple(t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},preloadComplex:function(t,r,o,i){var a=e.defer();return n.plugins.NativeAudio.preloadComplex(t,r,o,i,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},play:function(t,r){var o=e.defer();return n.plugins.NativeAudio.play(t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},stop:function(t){var r=e.defer();return n.plugins.NativeAudio.stop(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},loop:function(t){var r=e.defer();return n.plugins.NativeAudio.loop(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},unload:function(t){var r=e.defer();return n.plugins.NativeAudio.unload(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setVolumeForComplexAsset:function(t,r){var o=e.defer();return n.plugins.NativeAudio.setVolumeForComplexAsset(t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.network",[]).factory("$cordovaNetwork",["$rootScope","$timeout",function(e,n){var t=function(){var t=navigator.connection.type;n(function(){e.$broadcast("$cordovaNetwork:offline",t)})},r=function(){var t=navigator.connection.type;n(function(){e.$broadcast("$cordovaNetwork:online",t)})};return document.addEventListener("deviceready",function(){navigator.connection&&(document.addEventListener("offline",t,!1),document.addEventListener("online",r,!1))}),{getNetwork:function(){return navigator.connection.type},isOnline:function(){var e=navigator.connection.type;return e!==Connection.UNKNOWN&&e!==Connection.NONE},isOffline:function(){var e=navigator.connection.type;return e===Connection.UNKNOWN||e===Connection.NONE},clearOfflineWatch:function(){document.removeEventListener("offline",t),e.$$listeners["$cordovaNetwork:offline"]=[]},clearOnlineWatch:function(){document.removeEventListener("online",t),e.$$listeners["$cordovaNetwork:online"]=[]}}}]).run(["$cordovaNetwork",function(){}]),angular.module("ngCordova.plugins.oauth",["ngCordova.plugins.oauthUtility"]).factory("$cordovaOauth",["$q","$http","$cordovaOauthUtility",function(e,n,t){return{adfs:function(t,r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open(r+"/adfs/oauth2/authorize?response_type=code&client_id="+t+"&redirect_uri=http://localhost/callback&resource="+o,"_blank","location=no");c.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var o=e.url.split("code=")[1];n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:r+"/adfs/oauth2/token",data:"client_id="+t+"&code="+o+"&redirect_uri=http://localhost/callback&grant_type=authorization_code"}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)})}}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},dropbox:function(n){var t=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://www.dropbox.com/1/oauth2/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],r=n.split("&"),i=[],a=0;a<r.length;a++)i[r[a].split("=")[0]]=r[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?t.resolve({access_token:i.access_token,token_type:i.token_type,uid:i.uid}):t.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin")}else t.reject("Cannot authenticate via a web browser");return t.promise},digitalOcean:function(t,r){var o=e.defer();if(window.cordova){var i=cordova.require("cordova/plugin_list").metadata;if(i.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var a=window.open("https://cloud.digitalocean.com/v1/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=code&scope=read%20write","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var i=e.url.split("code=")[1];n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://cloud.digitalocean.com/v1/oauth/token",data:"client_id="+t+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+i}).success(function(e){o.resolve(e)}).error(function(){o.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)})}}),a.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},google:function(n,t){var r=e.defer();if(window.cordova){var o=cordova.require("cordova/plugin_list").metadata;if(o.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://accounts.google.com/o/oauth2/auth?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+t.join(" ")+"&approval_prompt=force&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],t=n.split("&"),o=[],a=0;a<t.length;a++)o[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?r.resolve({access_token:o.access_token,token_type:o.token_type,expires_in:o.expires_in}):r.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},github:function(t,r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open("https://github.com/login/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+o.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.defaults.headers.post.accept="application/json",n({method:"post",url:"https://github.com/login/oauth/access_token",data:"client_id="+t+"&client_secret="+r+"&redirect_uri=http://localhost/callback&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},facebook:function(n,t){var r=e.defer();if(window.cordova){var o=cordova.require("cordova/plugin_list").metadata;if(o.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://www.facebook.com/dialog/oauth?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token&scope="+t.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],t=n.split("&"),o=[],a=0;a<t.length;a++)o[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?r.resolve({access_token:o.access_token,expires_in:o.expires_in}):r.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},linkedin:function(t,r,o,i){var a=e.defer();if(window.cordova){var c=cordova.require("cordova/plugin_list").metadata;if(c.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var u=window.open("https://www.linkedin.com/uas/oauth2/authorization?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+o.join(" ")+"&response_type=code&state="+i,"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://www.linkedin.com/uas/oauth2/accessToken",data:"client_id="+t+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){a.resolve(e)}).error(function(){a.reject("Problem authenticating")}).finally(function(){setTimeout(function(){u.close()},10)}))}),u.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},instagram:function(n,t){var r=e.defer();if(window.cordova){var o=cordova.require("cordova/plugin_list").metadata;if(o.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://api.instagram.com/oauth/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+t.join(" ")+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],t=n.split("&"),o=[],a=0;a<t.length;a++)o[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?r.resolve({access_token:o.access_token}):r.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},box:function(t,r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open("https://app.box.com/api/oauth2/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&state="+o+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://app.box.com/api/oauth2/token",data:"client_id="+t+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},reddit:function(t,r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open("https://ssl.reddit.com/api/v1/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&duration=permanent&state=ngcordovaoauth&scope="+o.join(",")+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.defaults.headers.post.Authorization="Basic "+btoa(t+":"+r),n({method:"post",url:"https://ssl.reddit.com/api/v1/access_token",data:"redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},twitter:function(r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0)if("undefined"!=typeof jsSHA){var c={oauth_consumer_key:r,oauth_nonce:t.createNonce(10),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},u=t.createSignature("POST","https://api.twitter.com/oauth/request_token",c,{oauth_callback:"http://localhost/callback"},o);n.defaults.headers.post.Authorization=u.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://api.twitter.com/oauth/request_token",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var r=e.split("&"),a={},u=0;u<r.length;u++)a[r[u].split("=")[0]]=r[u].split("=")[1];a.hasOwnProperty("oauth_token")===!1&&i.reject("Oauth request token was not received");var s=window.open("https://api.twitter.com/oauth/authenticate?oauth_token="+a.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var r=e.url.split("?")[1],a=r.split("&"),u={},l=0;l<a.length;l++)u[a[l].split("=")[0]]=a[l].split("=")[1];u.hasOwnProperty("oauth_verifier")===!1&&i.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete c.oauth_signature,c.oauth_token=u.oauth_token;var f=t.createSignature("POST","https://api.twitter.com/oauth/access_token",c,{oauth_verifier:u.oauth_verifier},o);n.defaults.headers.post.Authorization=f.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://api.twitter.com/oauth/access_token",data:"oauth_verifier="+u.oauth_verifier}).success(function(e){for(var n=e.split("&"),t={},r=0;r<n.length;r++)t[n[r].split("=")[0]]=n[r].split("=")[1];t.hasOwnProperty("oauth_token_secret")===!1&&i.reject("Oauth access token was not received"),i.resolve(t)}).error(function(e){i.reject(e)}).finally(function(){setTimeout(function(){s.close()},10)})}}),s.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}).error(function(e){i.reject(e)})}else i.reject("Missing jsSHA JavaScript library");else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},meetup:function(n){var t=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://secure.meetup.com/oauth2/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],r=n.split("&"),i={},a=0;a<r.length;a++)i[r[a].split("=")[0]]=r[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?t.resolve(i):t.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin")}else t.reject("Cannot authenticate via a web browser");return t.promise},salesforce:function(n,t){var r="http://localhost/callback",o=function(e,n,t){return e+"services/oauth2/authorize?display=touch&response_type=token&client_id="+escape(n)+"&redirect_uri="+escape(t)},i=function(e,n){return e.substr(0,n.length)===n},a=e.defer();if(window.cordova){var c=cordova.require("cordova/plugin_list").metadata;if(c.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var u=window.open(o(n,t,r),"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){if(i(e.url,r)){var n={},t=e.url.split("#")[1];if(t){var o=t.split("&");for(var c in o){var s=o[c].split("=");n[s[0]]=unescape(s[1])}}"undefined"==typeof n||"undefined"==typeof n.access_token?a.reject("Problem authenticating"):a.resolve(n),setTimeout(function(){u.close()},10)}}),u.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},strava:function(t,r,o){var i=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open("https://www.strava.com/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+o.join(",")+"&response_type=code&approval_prompt=force","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://www.strava.com/oauth/token",data:"client_id="+t+"&client_secret="+r+"&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},foursquare:function(n){var t=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://foursquare.com/oauth2/authenticate?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var n=e.url.split("#")[1],r=n.split("&"),i=[],a=0;a<r.length;a++)i[r[a].split("=")[0]]=r[a].split("=")[1];if(void 0!==i.access_token&&null!==i.access_token){var c={access_token:i.access_token,expires_in:i.expires_in};t.resolve(c)}else t.reject("Problem authenticating");setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin")}else t.reject("Cannot authenticate via a web browser");return t.promise},magento:function(r,o,i){var a=e.defer();if(window.cordova){var c=cordova.require("cordova/plugin_list").metadata;if(c.hasOwnProperty("org.apache.cordova.inappbrowser")===!0)if("undefined"!=typeof jsSHA){var u={oauth_callback:"http://localhost/callback",oauth_consumer_key:o,oauth_nonce:t.createNonce(5),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},s=t.createSignature("POST",r+"/oauth/initiate",u,{oauth_callback:"http://localhost/callback"},i);n.defaults.headers.post.Authorization=s.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:r+"/oauth/initiate",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var o=e.split("&"),c={},s=0;s<o.length;s++)c[o[s].split("=")[0]]=o[s].split("=")[1];c.hasOwnProperty("oauth_token")===!1&&a.reject("Oauth request token was not received");var l=c.oauth_token_secret,f=window.open(r+"/oauth/authorize?oauth_token="+c.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");f.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var o=e.url.split("?")[1],c=o.split("&"),s={},d=0;d<c.length;d++)s[c[d].split("=")[0]]=c[d].split("=")[1];s.hasOwnProperty("oauth_verifier")===!1&&a.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete u.oauth_signature,delete u.oauth_callback,u.oauth_token=s.oauth_token,u.oauth_nonce=t.createNonce(5),u.oauth_verifier=s.oauth_verifier;var p=t.createSignature("POST",r+"/oauth/token",u,{},i,l);n.defaults.headers.post.Authorization=p.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:r+"/oauth/token"}).success(function(e){for(var n=e.split("&"),t={},r=0;r<n.length;r++)t[n[r].split("=")[0]]=n[r].split("=")[1];t.hasOwnProperty("oauth_token_secret")===!1&&a.reject("Oauth access token was not received"),a.resolve(t)}).error(function(e){a.reject(e)}).finally(function(){setTimeout(function(){f.close()},10)})}}),f.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}).error(function(e){a.reject(e)})}else a.reject("Missing jsSHA JavaScript library");else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},vkontakte:function(n,t){var r=e.defer();if(window.cordova){var o=cordova.require("cordova/plugin_list").metadata;if(o.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://oauth.vk.com/authorize?client_id="+n+"&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&scope="+t.join(",")+"&display=touch&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){var n=e.url.split("#");if("https://oauth.vk.com/blank.html"==n[0]||"http://oauth.vk.com/blank.html"==n[0]){for(var t=e.url.split("#")[1],o=t.split("&"),a=[],c=0;c<o.length;c++)a[o[c].split("=")[0]]=o[c].split("=")[1];void 0!==a.access_token&&null!==a.access_token?r.resolve({access_token:a.access_token,expires_in:a.expires_in,user_id:a.user_id}):r.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise}}}]),angular.module("ngCordova.plugins.oauthUtility",[]).factory("$cordovaOauthUtility",["$q",function(){return{createSignature:function(e,n,t,r,o,i){if("undefined"!=typeof jsSHA){for(var a=angular.copy(t),c=Object.keys(r),u=0;u<c.length;u++)a[c[u]]=encodeURIComponent(r[c[u]]);var s=e+"&"+encodeURIComponent(n)+"&",l=Object.keys(a).sort();for(u=0;u<l.length;u++)s+=encodeURIComponent(u==l.length-1?l[u]+"="+a[l[u]]:l[u]+"="+a[l[u]]+"&");var f=new jsSHA(s,"TEXT"),d="";i&&(d=encodeURIComponent(i)),t.oauth_signature=encodeURIComponent(f.getHMAC(encodeURIComponent(o)+"&"+d,"TEXT","SHA-1","B64"));var p=Object.keys(t),v="OAuth ";for(u=0;u<p.length;u++)v+=u==p.length-1?p[u]+'="'+t[p[u]]+'"':p[u]+'="'+t[p[u]]+'",';return{signature_base_string:s,authorization_header:v,signature:t.oauth_signature}}return"Missing jsSHA JavaScript library"},createNonce:function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;e>r;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}}}]),angular.module("ngCordova.plugins.pinDialog",[]).factory("$cordovaPinDialog",["$q","$window",function(e,n){return{prompt:function(t,r,o){var i=e.defer();return n.plugins.pinDialog.prompt(t,function(e){i.resolve(e)},r,o),i.promise}}}]),angular.module("ngCordova.plugins.prefs",[]).factory("$cordovaPreferences",["$window","$q",function(e,n){return{set:function(t,r){var o=n.defer();return e.appgiraffe.plugins.applicationPreferences.set(t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},get:function(t){var r=n.defer();return e.appgiraffe.plugins.applicationPreferences.get(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.printer",[]).factory("$cordovaPrinter",["$q","$window",function(e,n){return{isAvailable:function(){var t=e.defer();return n.plugin.printer.isAvailable(function(e){t.resolve(e)}),t.promise},print:function(t,r){var o=e.defer();return n.plugin.printer.print(t,r,function(){o.resolve()}),o.promise}}}]),angular.module("ngCordova.plugins.progressIndicator",[]).factory("$cordovaProgress",["$q",function(){return{show:function(e){var n=e||"Please wait...";return ProgressIndicator.show(n)},showSimple:function(e){var n=e||!1;return ProgressIndicator.showSimple(n)},showSimpleWithLabel:function(e,n){var t=e||!1,r=n||"Loading...";return ProgressIndicator.showSimpleWithLabel(t,r)},showSimpleWithLabelDetail:function(e,n,t){var r=e||!1,o=n||"Loading...",i=t||"Please wait";return ProgressIndicator.showSimpleWithLabelDetail(r,o,i)},showDeterminate:function(e,n){var t=e||!1,r=n||5e4;return ProgressIndicator.showDeterminate(t,r)},showDeterminateWithLabel:function(e,n,t){var r=e||!1,o=n||5e4,i=t||"Loading...";return ProgressIndicator.showDeterminateWithLabel(r,o,i)},showAnnular:function(e,n){var t=e||!1,r=n||5e4;return ProgressIndicator.showAnnular(t,r)},showAnnularWithLabel:function(e,n,t){var r=e||!1,o=n||5e4,i=t||"Loading...";return ProgressIndicator.showAnnularWithLabel(r,o,i)},showBar:function(e,n){var t=e||!1,r=n||5e4;return ProgressIndicator.showBar(t,r)},showBarWithLabel:function(e,n,t){var r=e||!1,o=n||5e4,i=t||"Loading...";return ProgressIndicator.showBarWithLabel(r,o,i)},showSuccess:function(e,n){var t=e||!1,r=n||"Success";return ProgressIndicator.showSuccess(t,r)},showText:function(e,n,t){var r=e||!1,o=n||"Warning",i=t||"center";return ProgressIndicator.showText(r,o,i)},hide:function(){return ProgressIndicator.hide()}}}]),angular.module("ngCordova.plugins.push",[]).factory("$cordovaPush",["$q","$window","$rootScope","$timeout",function(e,n,t,r){return{onNotification:function(e){r(function(){t.$broadcast("$cordovaPush:notificationReceived",e)})},register:function(t){var r,o=e.defer();return void 0!==t&&void 0===t.ecb&&(r=null==document.querySelector("[ng-app]")?"document.body":"document.querySelector('[ng-app]')",t.ecb="angular.element("+r+").injector().get('$cordovaPush').onNotification"),n.plugins.pushNotification.register(function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},unregister:function(t){var r=e.defer();return n.plugins.pushNotification.unregister(function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},setBadgeNumber:function(t){var r=e.defer();return n.plugins.pushNotification.setApplicationIconBadgeNumber(function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise}}}]),angular.module("ngCordova.plugins.sms",[]).factory("$cordovaSms",["$q",function(e){return{send:function(n,t,r){var o=e.defer();return sms.send(n,t,r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.socialSharing",[]).factory("$cordovaSocialSharing",["$q","$window",function(e,n){return{share:function(t,r,o,i){var a=e.defer();return r=r||null,o=o||null,i=i||null,n.plugins.socialsharing.share(t,r,o,i,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaTwitter:function(t,r,o){var i=e.defer();return r=r||null,o=o||null,n.plugins.socialsharing.shareViaTwitter(t,r,o,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaWhatsApp:function(t,r,o){var i=e.defer();return r=r||null,o=o||null,n.plugins.socialsharing.shareViaWhatsApp(t,r,o,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaFacebook:function(t,r,o){var i=e.defer();return t=t||null,r=r||null,o=o||null,n.plugins.socialsharing.shareViaFacebook(t,r,o,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaFacebookWithPasteMessageHint:function(t,r,o,i){var a=e.defer();return r=r||null,o=o||null,n.plugins.socialsharing.shareViaFacebookWithPasteMessageHint(t,r,o,i,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaSMS:function(t,r){var o=e.defer();return n.plugins.socialsharing.shareViaSMS(t,r,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaEmail:function(t,r,o,i,a,c){var u=e.defer();return o=o||null,i=i||null,a=a||null,c=c||null,n.plugins.socialsharing.shareViaEmail(t,r,o,i,a,c,function(){u.resolve(!0)},function(){u.reject(!1)}),u.promise},shareVia:function(t,r,o,i,a){var c=e.defer();return r=r||null,o=o||null,i=i||null,a=a||null,n.plugins.socialsharing.shareVia(t,r,o,i,a,function(){c.resolve(!0)},function(){c.reject(!1)}),c.promise},canShareViaEmail:function(){var t=e.defer();return n.plugins.socialsharing.canShareViaEmail(function(){t.resolve(!0)},function(){t.reject(!1)}),t.promise},canShareVia:function(t,r,o,i,a){var c=e.defer();return n.plugins.socialsharing.canShareVia(t,r,o,i,a,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise},available:function(){var n=e.defer();window.plugins.socialsharing.available(function(e){e?n.resolve():n.reject()})}}}]),angular.module("ngCordova.plugins.spinnerDialog",[]).factory("$cordovaSpinnerDialog",["$window",function(e){return{show:function(n,t,r){return r=r||!1,e.plugins.spinnerDialog.show(n,t,r)},hide:function(){return e.plugins.spinnerDialog.hide()}}}]),angular.module("ngCordova.plugins.splashscreen",[]).factory("$cordovaSplashscreen",[function(){return{hide:function(){return navigator.splashscreen.hide()},show:function(){return navigator.splashscreen.show()}}}]),angular.module("ngCordova.plugins.sqlite",[]).factory("$cordovaSQLite",["$q","$window",function(e,n){return{openDB:function(e,t){return"undefined"==typeof t&&(t=0),n.sqlitePlugin.openDatabase({name:e,bgType:t})},execute:function(n,t,r){var o=e.defer();return n.transaction(function(e){e.executeSql(t,r,function(e,n){o.resolve(n)},function(e,n){o.reject(n)})}),o.promise},insertCollection:function(n,t,r){var o=e.defer(),i=r.slice(0);return n.transaction(function(e){!function n(){var r=i.splice(0,1)[0];try{e.executeSql(t,r,function(e,t){0===i.length?o.resolve(t):n()},function(e,n){o.reject(n)})}catch(a){o.reject(a)}}()}),o.promise},nestedExecute:function(n,t,r,o,i){var a=e.defer();return n.transaction(function(e){e.executeSql(t,o,function(e,n){a.resolve(n),e.executeSql(r,i,function(e,n){a.resolve(n)})})},function(e,n){a.reject(n)}),a.promise},deleteDB:function(t){var r=e.defer();return n.sqlitePlugin.deleteDatabase(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.statusbar",[]).factory("$cordovaStatusbar",[function(){return{overlaysWebView:function(e){return StatusBar.overlaysWebView(!!e)},style:function(e){switch(e){case 0:return StatusBar.styleDefault();case 1:return StatusBar.styleLightContent();case 2:return StatusBar.styleBlackTranslucent();case 3:return StatusBar.styleBlackOpaque();default:return StatusBar.styleDefault()}},styleColor:function(e){return StatusBar.backgroundColorByName(e)},styleHex:function(e){return StatusBar.backgroundColorByHexString(e)},hide:function(){return StatusBar.hide()},show:function(){return StatusBar.show()},isVisible:function(){return StatusBar.isVisible}}}]),angular.module("ngCordova.plugins.toast",[]).factory("$cordovaToast",["$q","$window",function(e,n){return{showShortTop:function(t){var r=e.defer();return n.plugins.toast.showShortTop(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortCenter:function(t){var r=e.defer();return n.plugins.toast.showShortCenter(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortBottom:function(t){var r=e.defer();return n.plugins.toast.showShortBottom(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongTop:function(t){var r=e.defer();return n.plugins.toast.showLongTop(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongCenter:function(t){var r=e.defer();return n.plugins.toast.showLongCenter(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongBottom:function(t){var r=e.defer();return n.plugins.toast.showLongBottom(t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},show:function(t,r,o){var i=e.defer();return n.plugins.toast.show(t,r,o,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.touchid",[]).factory("$cordovaTouchID",["$q",function(e){return{checkSupport:function(){var n=e.defer();return window.cordova?touchid.checkSupport(function(e){n.resolve(e)},function(e){n.reject(e)}):n.reject("Not supported without cordova.js"),n.promise},authenticate:function(n){var t=e.defer();return window.cordova?touchid.authenticate(function(e){t.resolve(e)},function(e){t.reject(e)},n):t.reject("Not supported without cordova.js"),t.promise}}}]),angular.module("ngCordova.plugins.vibration",[]).factory("$cordovaVibration",[function(){return{vibrate:function(e){return navigator.notification.vibrate(e)},vibrateWithPattern:function(e,n){return navigator.notification.vibrateWithPattern(e,n)},cancelVibration:function(){return navigator.notification.cancelVibration()}}}]),angular.module("ngCordova.plugins.videoCapturePlus",[]).provider("$cordovaVideoCapturePlus",[function(){var e={};this.setLimit=function(n){e.limit=n},this.setMaxDuration=function(n){e.duration=n},this.setHighQuality=function(n){e.highquality=n},this.useFrontCamera=function(n){e.frontcamera=n},this.setPortraitOverlay=function(n){e.portraitOverlay=n},this.setLandscapeOverlay=function(n){e.landscapeOverlay=n},this.setOverlayText=function(n){e.overlayText=n},this.$get=["$q","$window",function(n,t){return{captureVideo:function(r){var o=n.defer();return t.plugins.videocaptureplus?(t.plugins.videocaptureplus.captureVideo(o.resolve,o.reject,angular.extend({},e,r)),o.promise):(o.resolve(null),o.promise)}}}]}]),angular.module("ngCordova.plugins.zip",[]).factory("$cordovaZip",["$q","$window",function(e,n){return{unzip:function(t,r){var o=e.defer();return n.zip.unzip(t,r,function(e){0===e?o.resolve():o.reject()},function(e){o.notify(e)}),o.promise}}}])}();var openFB=(function(){var loginURL='https://www.facebook.com/dialog/oauth',logoutURL='https://www.facebook.com/logout.php',tokenStore=window.sessionStorage,fbAppId,context=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")),baseURL=location.protocol+'//'+location.hostname+(location.port?':'+location.port:'')+context,oauthRedirectURL=baseURL+'/oauthcallback.html',cordovaOAuthRedirectURL="https://www.facebook.com/connect/login_success.html",logoutRedirectURL=baseURL+'/logoutcallback.html',loginCallback,runningInCordova,loginProcessed;document.addEventListener("deviceready",function(){runningInCordova=!0},!1);function init(params){if(params.appId){fbAppId=params.appId}else{throw 'appId parameter not set in init()'}
if(params.tokenStore){tokenStore=params.tokenStore}
if(params.accessToken){tokenStore.fbAccessToken=params.accessToken}
loginURL=params.loginURL||loginURL;logoutURL=params.logoutURL||logoutURL;oauthRedirectURL=params.oauthRedirectURL||oauthRedirectURL;cordovaOAuthRedirectURL=params.cordovaOAuthRedirectURL||cordovaOAuthRedirectURL;logoutRedirectURL=params.logoutRedirectURL||logoutRedirectURL}
function getLoginStatus(callback){var token=tokenStore.fbAccessToken,loginStatus={};if(token){loginStatus.status='connected';loginStatus.authResponse={accessToken:token}}else{loginStatus.status='unknown'}
if(callback)callback(loginStatus)}
function login(callback,options){var loginWindow,startTime,scope='',redirectURL=runningInCordova?cordovaOAuthRedirectURL:oauthRedirectURL;if(!fbAppId){return callback({status:'unknown',error:'Facebook App Id not set.'})}
function loginWindow_loadStartHandler(event){var url=event.url;if(url.indexOf("access_token=")>0||url.indexOf("error=")>0){var timeout=600-(new Date().getTime()-startTime);setTimeout(function(){loginWindow.close()},timeout>0?timeout:0);oauthCallback(url)}}
function loginWindow_exitHandler(){console.log('exit and remove listeners');if(loginCallback&&!loginProcessed)loginCallback({status:'user_cancelled'});loginWindow.removeEventListener('loadstop',loginWindow_loadStopHandler);loginWindow.removeEventListener('exit',loginWindow_exitHandler);loginWindow=null;console.log('done removing listeners')}
if(options&&options.scope){scope=options.scope}
loginCallback=callback;loginProcessed=!1;startTime=new Date().getTime();loginWindow=window.open(loginURL+'?client_id='+fbAppId+'&redirect_uri='+redirectURL+'&response_type=token&scope='+scope,'_blank','location=no,clearcache=yes');if(runningInCordova){loginWindow.addEventListener('loadstart',loginWindow_loadStartHandler);loginWindow.addEventListener('exit',loginWindow_exitHandler)}}
function oauthCallback(url){var queryString,obj;loginProcessed=!0;if(url.indexOf("access_token=")>0){queryString=url.substr(url.indexOf('#')+1);obj=parseQueryString(queryString);tokenStore.fbAccessToken=obj.access_token;if(loginCallback)loginCallback({status:'connected',authResponse:{accessToken:obj.access_token}})}else if(url.indexOf("error=")>0){queryString=url.substring(url.indexOf('?')+1,url.indexOf('#'));obj=parseQueryString(queryString);if(loginCallback)loginCallback({status:'not_authorized',error:obj.error})}else{if(loginCallback)loginCallback({status:'not_authorized'})}}
function logout(callback){var logoutWindow,token=tokenStore.fbAccessToken;tokenStore.removeItem('fbtoken');if(token){logoutWindow=window.open(logoutURL+'?access_token='+token+'&next='+logoutRedirectURL,'_blank','location=no,clearcache=yes');if(runningInCordova){setTimeout(function(){logoutWindow.close()},700)}}
if(callback){callback()}}
function api(obj){var method=obj.method||'GET',params=obj.params||{},xhr=new XMLHttpRequest(),url;params.access_token=tokenStore.fbAccessToken;url='https://graph.facebook.com'+obj.path+'?'+toQueryString(params);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200){if(obj.success)obj.success(JSON.parse(xhr.responseText))}else{var error=xhr.responseText?JSON.parse(xhr.responseText).error:{message:'An error has occurred'};if(obj.error)obj.error(error)}}};xhr.open(method,url,!0);xhr.send()}
function revokePermissions(success,error){return api({method:'DELETE',path:'/me/permissions',success:function(){success()},error:error})}
function parseQueryString(queryString){var qs=decodeURIComponent(queryString),obj={},params=qs.split('&');params.forEach(function(param){var splitter=param.split('=');obj[splitter[0]]=splitter[1]});return obj}
function toQueryString(obj){var parts=[];for(var i in obj){if(obj.hasOwnProperty(i)){parts.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]))}}
return parts.join("&")}
return{init:init,login:login,logout:logout,revokePermissions:revokePermissions,api:api,oauthCallback:oauthCallback,getLoginStatus:getLoginStatus}}());function JPEGEncoder(quality){var self=this;var fround=Math.round;var ffloor=Math.floor;var YTable=new Array(64);var UVTable=new Array(64);var fdtbl_Y=new Array(64);var fdtbl_UV=new Array(64);var YDC_HT;var UVDC_HT;var YAC_HT;var UVAC_HT;var bitcode=new Array(65535);var category=new Array(65535);var outputfDCTQuant=new Array(64);var DU=new Array(64);var byteout=[];var bytenew=0;var bytepos=7;var YDU=new Array(64);var UDU=new Array(64);var VDU=new Array(64);var clt=new Array(256);var RGB_YUV_TABLE=new Array(2048);var currentQuality;var ZigZag=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var std_dc_luminance_nrcodes=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var std_dc_luminance_values=[0,1,2,3,4,5,6,7,8,9,10,11];var std_ac_luminance_nrcodes=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];var std_ac_luminance_values=[0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,0xf9,0xfa];var std_dc_chrominance_nrcodes=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var std_dc_chrominance_values=[0,1,2,3,4,5,6,7,8,9,10,11];var std_ac_chrominance_nrcodes=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];var std_ac_chrominance_values=[0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,0xf9,0xfa];function initQuantTables(sf){var YQT=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var i=0;i<64;i++){var t=ffloor((YQT[i]*sf+50)/100);if(t<1){t=1}else if(t>255){t=255}
YTable[ZigZag[i]]=t}
var UVQT=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var j=0;j<64;j++){var u=ffloor((UVQT[j]*sf+50)/100);if(u<1){u=1}else if(u>255){u=255}
UVTable[ZigZag[j]]=u}
var aasf=[1.0,1.387039845,1.306562965,1.175875602,1.0,0.785694958,0.541196100,0.275899379];var k=0;for(var row=0;row<8;row++){for(var col=0;col<8;col++){fdtbl_Y[k]=(1.0/(YTable[ZigZag[k]]*aasf[row]*aasf[col]*8.0));fdtbl_UV[k]=(1.0/(UVTable[ZigZag[k]]*aasf[row]*aasf[col]*8.0));k++}}}
function computeHuffmanTbl(nrcodes,std_table){var codevalue=0;var pos_in_table=0;var HT=new Array();for(var k=1;k<=16;k++){for(var j=1;j<=nrcodes[k];j++){HT[std_table[pos_in_table]]=[];HT[std_table[pos_in_table]][0]=codevalue;HT[std_table[pos_in_table]][1]=k;pos_in_table++;codevalue++}
codevalue*=2}
return HT}
function initHuffmanTbl(){YDC_HT=computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);UVDC_HT=computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);YAC_HT=computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);UVAC_HT=computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values)}
function initCategoryNumber(){var nrlower=1;var nrupper=2;for(var cat=1;cat<=15;cat++){for(var nr=nrlower;nr<nrupper;nr++){category[32767+nr]=cat;bitcode[32767+nr]=[];bitcode[32767+nr][1]=cat;bitcode[32767+nr][0]=nr}
for(var nrneg=-(nrupper-1);nrneg<=-nrlower;nrneg++){category[32767+nrneg]=cat;bitcode[32767+nrneg]=[];bitcode[32767+nrneg][1]=cat;bitcode[32767+nrneg][0]=nrupper-1+nrneg}
nrlower<<=1;nrupper<<=1}}
function initRGBYUVTable(){for(var i=0;i<256;i++){RGB_YUV_TABLE[i]=19595*i;RGB_YUV_TABLE[(i+256)>>0]=38470*i;RGB_YUV_TABLE[(i+512)>>0]=7471*i+0x8000;RGB_YUV_TABLE[(i+768)>>0]=-11059*i;RGB_YUV_TABLE[(i+1024)>>0]=-21709*i;RGB_YUV_TABLE[(i+1280)>>0]=32768*i+0x807FFF;RGB_YUV_TABLE[(i+1536)>>0]=-27439*i;RGB_YUV_TABLE[(i+1792)>>0]=-5329*i}}
function writeBits(bs){var value=bs[0];var posval=bs[1]-1;while(posval>=0){if(value&(1<<posval)){bytenew|=(1<<bytepos)}
posval--;bytepos--;if(bytepos<0){if(bytenew==0xFF){writeByte(0xFF);writeByte(0)}
else{writeByte(bytenew)}
bytepos=7;bytenew=0}}}
function writeByte(value){byteout.push(clt[value])}
function writeWord(value){writeByte((value>>8)&0xFF);writeByte((value)&0xFF)}
function fDCTQuant(data,fdtbl){var d0,d1,d2,d3,d4,d5,d6,d7;var dataOff=0;var i;const I8=8;const I64=64;for(i=0;i<I8;++i){d0=data[dataOff];d1=data[dataOff+1];d2=data[dataOff+2];d3=data[dataOff+3];d4=data[dataOff+4];d5=data[dataOff+5];d6=data[dataOff+6];d7=data[dataOff+7];var tmp0=d0+d7;var tmp7=d0-d7;var tmp1=d1+d6;var tmp6=d1-d6;var tmp2=d2+d5;var tmp5=d2-d5;var tmp3=d3+d4;var tmp4=d3-d4;var tmp10=tmp0+tmp3;var tmp13=tmp0-tmp3;var tmp11=tmp1+tmp2;var tmp12=tmp1-tmp2;data[dataOff]=tmp10+tmp11;data[dataOff+4]=tmp10-tmp11;var z1=(tmp12+tmp13)*0.707106781;data[dataOff+2]=tmp13+z1;data[dataOff+6]=tmp13-z1;tmp10=tmp4+tmp5;tmp11=tmp5+tmp6;tmp12=tmp6+tmp7;var z5=(tmp10-tmp12)*0.382683433;var z2=0.541196100*tmp10+z5;var z4=1.306562965*tmp12+z5;var z3=tmp11*0.707106781;var z11=tmp7+z3;var z13=tmp7-z3;data[dataOff+5]=z13+z2;data[dataOff+3]=z13-z2;data[dataOff+1]=z11+z4;data[dataOff+7]=z11-z4;dataOff+=8}
dataOff=0;for(i=0;i<I8;++i){d0=data[dataOff];d1=data[dataOff+8];d2=data[dataOff+16];d3=data[dataOff+24];d4=data[dataOff+32];d5=data[dataOff+40];d6=data[dataOff+48];d7=data[dataOff+56];var tmp0p2=d0+d7;var tmp7p2=d0-d7;var tmp1p2=d1+d6;var tmp6p2=d1-d6;var tmp2p2=d2+d5;var tmp5p2=d2-d5;var tmp3p2=d3+d4;var tmp4p2=d3-d4;var tmp10p2=tmp0p2+tmp3p2;var tmp13p2=tmp0p2-tmp3p2;var tmp11p2=tmp1p2+tmp2p2;var tmp12p2=tmp1p2-tmp2p2;data[dataOff]=tmp10p2+tmp11p2;data[dataOff+32]=tmp10p2-tmp11p2;var z1p2=(tmp12p2+tmp13p2)*0.707106781;data[dataOff+16]=tmp13p2+z1p2;data[dataOff+48]=tmp13p2-z1p2;tmp10p2=tmp4p2+tmp5p2;tmp11p2=tmp5p2+tmp6p2;tmp12p2=tmp6p2+tmp7p2;var z5p2=(tmp10p2-tmp12p2)*0.382683433;var z2p2=0.541196100*tmp10p2+z5p2;var z4p2=1.306562965*tmp12p2+z5p2;var z3p2=tmp11p2*0.707106781;var z11p2=tmp7p2+z3p2;var z13p2=tmp7p2-z3p2;data[dataOff+40]=z13p2+z2p2;data[dataOff+24]=z13p2-z2p2;data[dataOff+8]=z11p2+z4p2;data[dataOff+56]=z11p2-z4p2;dataOff++}
var fDCTQuant;for(i=0;i<I64;++i){fDCTQuant=data[i]*fdtbl[i];outputfDCTQuant[i]=(fDCTQuant>0.0)?((fDCTQuant+0.5)|0):((fDCTQuant-0.5)|0)}
return outputfDCTQuant}
function writeAPP0(){writeWord(0xFFE0);writeWord(16);writeByte(0x4A);writeByte(0x46);writeByte(0x49);writeByte(0x46);writeByte(0);writeByte(1);writeByte(1);writeByte(0);writeWord(1);writeWord(1);writeByte(0);writeByte(0)}
function writeSOF0(width,height){writeWord(0xFFC0);writeWord(17);writeByte(8);writeWord(height);writeWord(width);writeByte(3);writeByte(1);writeByte(0x11);writeByte(0);writeByte(2);writeByte(0x11);writeByte(1);writeByte(3);writeByte(0x11);writeByte(1)}
function writeDQT(){writeWord(0xFFDB);writeWord(132);writeByte(0);for(var i=0;i<64;i++){writeByte(YTable[i])}
writeByte(1);for(var j=0;j<64;j++){writeByte(UVTable[j])}}
function writeDHT(){writeWord(0xFFC4);writeWord(0x01A2);writeByte(0);for(var i=0;i<16;i++){writeByte(std_dc_luminance_nrcodes[i+1])}
for(var j=0;j<=11;j++){writeByte(std_dc_luminance_values[j])}
writeByte(0x10);for(var k=0;k<16;k++){writeByte(std_ac_luminance_nrcodes[k+1])}
for(var l=0;l<=161;l++){writeByte(std_ac_luminance_values[l])}
writeByte(1);for(var m=0;m<16;m++){writeByte(std_dc_chrominance_nrcodes[m+1])}
for(var n=0;n<=11;n++){writeByte(std_dc_chrominance_values[n])}
writeByte(0x11);for(var o=0;o<16;o++){writeByte(std_ac_chrominance_nrcodes[o+1])}
for(var p=0;p<=161;p++){writeByte(std_ac_chrominance_values[p])}}
function writeSOS(){writeWord(0xFFDA);writeWord(12);writeByte(3);writeByte(1);writeByte(0);writeByte(2);writeByte(0x11);writeByte(3);writeByte(0x11);writeByte(0);writeByte(0x3f);writeByte(0)}
function processDU(CDU,fdtbl,DC,HTDC,HTAC){var EOB=HTAC[0x00];var M16zeroes=HTAC[0xF0];var pos;const I16=16;const I63=63;const I64=64;var DU_DCT=fDCTQuant(CDU,fdtbl);for(var j=0;j<I64;++j){DU[ZigZag[j]]=DU_DCT[j]}
var Diff=DU[0]-DC;DC=DU[0];if(Diff==0){writeBits(HTDC[0])}else{pos=32767+Diff;writeBits(HTDC[category[pos]]);writeBits(bitcode[pos])}
var end0pos=63;for(;(end0pos>0)&&(DU[end0pos]==0);end0pos--){};if(end0pos==0){writeBits(EOB);return DC}
var i=1;var lng;while(i<=end0pos){var startpos=i;for(;(DU[i]==0)&&(i<=end0pos);++i){}
var nrzeroes=i-startpos;if(nrzeroes>=I16){lng=nrzeroes>>4;for(var nrmarker=1;nrmarker<=lng;++nrmarker)
writeBits(M16zeroes);nrzeroes=nrzeroes&0xF}
pos=32767+DU[i];writeBits(HTAC[(nrzeroes<<4)+category[pos]]);writeBits(bitcode[pos]);i++}
if(end0pos!=I63){writeBits(EOB)}
return DC}
function initCharLookupTable(){var sfcc=String.fromCharCode;for(var i=0;i<256;i++){clt[i]=sfcc(i)}}
this.encode=function(image,quality,toRaw){var time_start=new Date().getTime();if(quality)setQuality(quality);byteout=new Array();bytenew=0;bytepos=7;writeWord(0xFFD8);writeAPP0();writeDQT();writeSOF0(image.width,image.height);writeDHT();writeSOS();var DCY=0;var DCU=0;var DCV=0;bytenew=0;bytepos=7;this.encode.displayName="_encode_";var imageData=image.data;var width=image.width;var height=image.height;var quadWidth=width*4;var tripleWidth=width*3;var x,y=0;var r,g,b;var start,p,col,row,pos;while(y<height){x=0;while(x<quadWidth){start=quadWidth*y+x;p=start;col=-1;row=0;for(pos=0;pos<64;pos++){row=pos>>3;col=(pos&7)*4;p=start+(row*quadWidth)+col;if(y+row>=height){p-=(quadWidth*(y+1+row-height))}
if(x+col>=quadWidth){p-=((x+col)-quadWidth+4)}
r=imageData[p++];g=imageData[p++];b=imageData[p++];YDU[pos]=((RGB_YUV_TABLE[r]+RGB_YUV_TABLE[(g+256)>>0]+RGB_YUV_TABLE[(b+512)>>0])>>16)-128;UDU[pos]=((RGB_YUV_TABLE[(r+768)>>0]+RGB_YUV_TABLE[(g+1024)>>0]+RGB_YUV_TABLE[(b+1280)>>0])>>16)-128;VDU[pos]=((RGB_YUV_TABLE[(r+1280)>>0]+RGB_YUV_TABLE[(g+1536)>>0]+RGB_YUV_TABLE[(b+1792)>>0])>>16)-128}
DCY=processDU(YDU,fdtbl_Y,DCY,YDC_HT,YAC_HT);DCU=processDU(UDU,fdtbl_UV,DCU,UVDC_HT,UVAC_HT);DCV=processDU(VDU,fdtbl_UV,DCV,UVDC_HT,UVAC_HT);x+=32}
y+=8}
if(bytepos>=0){var fillbits=[];fillbits[1]=bytepos+1;fillbits[0]=(1<<(bytepos+1))-1;writeBits(fillbits)}
writeWord(0xFFD9);if(toRaw){var len=byteout.length;var data=new Uint8Array(len);for(var i=0;i<len;i++){data[i]=byteout[i].charCodeAt()}
byteout=[];var duration=new Date().getTime()-time_start;console.log('Encoding time: '+duration+'ms');return data}
var jpegDataUri='data:image/jpeg;base64,'+btoa(byteout.join(''));byteout=[];var duration=new Date().getTime()-time_start;console.log('Encoding time: '+duration+'ms');return jpegDataUri}
function setQuality(quality){if(quality<=0){quality=1}
if(quality>100){quality=100}
if(currentQuality==quality)return
var sf=0;if(quality<50){sf=Math.floor(5000/quality)}else{sf=Math.floor(200-quality*2)}
initQuantTables(sf);currentQuality=quality;console.log('Quality set to: '+quality+'%')}
function init(){var time_start=new Date().getTime();if(!quality)quality=50;initCharLookupTable()
initHuffmanTbl();initCategoryNumber();initRGBYUVTable();setQuality(quality);var duration=new Date().getTime()-time_start;console.log('Initialization '+duration+'ms')}
init()};'use strict';angular.module('bazaarr',['ionic','ngCordova','ngCookies','LocalStorageModule','ngToast']).value('server_url',window.location.protocol+'//'+window.location.host).value('connect_url',window.location.host).value('clip',{}).config(function($stateProvider,$urlRouterProvider,$httpProvider,$ionicConfigProvider,ngToastProvider,$locationProvider){$locationProvider.hashPrefix("!");$stateProvider.state('claim-user',{url:'/claim-user/:userId',cache:!1,controller:'ClaimCtrl',templateUrl:'views/user/claim-user.html'}).state('claim',{url:'/claim',cache:!1,controller:'ClaimCtrl',templateUrl:'views/user/claim-list.html'}).state('hashtag',{url:'/hashtag/:hashtagName?page',resolve:{clips:function(ClipsService,$stateParams){return ClipsService.load("hashtags",!1,{hashtags:$stateParams.hashtagName})}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('recent',{url:'/recent?page',resolve:{clips:function(ClipsService){return ClipsService.load("recent",!1)}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('following',{url:'/following',resolve:{clips:function(ClipsService){return ClipsService.load("following",!0)}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('shop',{url:'/shop?page',resolve:{clips:function(ClipsService){return ClipsService.load("shop",!1)}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('category',{url:'/category/:catId?page',resolve:{clips:function(ClipsService,$stateParams){return ClipsService.load("clips-category",!1,{"tid_raw":$stateParams.catId})}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('account',{url:"/account/:userId",resolve:{account:function(AccountService,$stateParams){return AccountService.load($stateParams.userId)}},controller:'UserCtrl',templateUrl:'views/user_tabs.html'}).state('account.collections',{url:"/collections",resolve:{collections:function(CollectionService){return CollectionService.load2()}},controller:'CollectionListCtrl',templateUrl:'views/user/collections.html'}).state('account.clips',{url:"/clips?page",resolve:{clips:function(ClipsService){return ClipsService.load("clips",!0)}},controller:'ClipsCtrl',templateUrl:'views/clip/scroll-list.html'}).state('account.likes',{url:"/likes?page",resolve:{clips:function(ClipsService){return ClipsService.load("likes",!0)}},controller:'ClipsCtrl',templateUrl:'views/clip/scroll-list.html'}).state('account.following-users',{url:"/following-users",resolve:{follows:function(FollowService){return FollowService.loadFollowing()}},controller:'FollowCtrl',templateUrl:'views/user/follow.html'}).state('account.following-collections',{url:"/following-collections",resolve:{collections:function(FollowService){return FollowService.loadCollections()}},controller:'CollectionListCtrl',templateUrl:'views/user/collections.html'}).state('account.followers',{url:"/followers",resolve:{follows:function(FollowService){return FollowService.loadFollowers()}},controller:'FollowCtrl',templateUrl:'views/user/follow.html'}).state('account.contact',{url:"/contact",controller:'ContactCtrl',templateUrl:'views/user/contact.html'}).state('account.about',{url:"/about",controller:'AboutCtrl',templateUrl:'views/user/about.html'}).state('collection',{url:'/collection/:colId',cache:!1,resolve:{collection:function(CollectionService,$stateParams){return CollectionService.singleLoad($stateParams.colId)},collection_counters:function(CollectionService,$stateParams){return CollectionService.getCounters($stateParams.colId)}},controller:'CollectionCoverCtrl',templateUrl:'views/collection/cover.html'}).state('login',{url:'/login',cache:!1,controller:'LoginCtrl',templateUrl:'views/login.html'}).state('add',{url:"/add",cache:!1,controller:'AddClipCtrl',templateUrl:'views/clip/add.html'}).state('edit-clip',{url:"/edit-clip/:clipId",cache:!1,controller:'AddClipCtrl',templateUrl:'views/clip/add.html'}).state('reclip',{url:"/reclip/:clipId",cache:!1,controller:'AddClipCtrl',templateUrl:'views/clip/reclip.html'}).state('edit_profile',{url:"/edit_profile",controller:'ProfileCtrl',templateUrl:'views/user/edit-profile.html'}).state('edit_account',{url:"/edit_account",controller:'ProfileCtrl',templateUrl:'views/user/account-settings.html'}).state('clip',{url:"/clip/:clipId",cache:!1,controller:"ClipCtrl",resolve:{clip:function(ClipService,$stateParams){return ClipService.load($stateParams.clipId)}},templateUrl:'views/clip/clip-view.html'}).state('feed',{url:"/feed/:clipId",controller:"FeedCtrl",resolve:{feed:function(FeedService,$stateParams){return FeedService.load($stateParams.clipId)}},templateUrl:'views/clip/feed.html'}).state('clip-full',{url:"/clip/:clipId/full",cache:!1,controller:"ClipCtrl",resolve:{clip:function(ClipService,$stateParams){return ClipService.load($stateParams.clipId)}},templateUrl:'views/clip/clip-full.html'}).state('ebay',{url:"/ebay/:clipId",controller:"FeedCtrl",resolve:{feed:function(FeedService,$stateParams){return FeedService.loadEbay($stateParams.clipId)}},templateUrl:'views/clip/ebay.html'}).state('search',{url:'/search/:query',controller:'SearchCtrl',resolve:{search:function(SearchService){return SearchService.init()}},templateUrl:'views/search-new.html'}).state('search-refine',{url:'/search-refine',controller:'SearchCtrl',templateUrl:'views/search-refine.html'}).state('search-users',{url:'/search-users/:query',controller:'SearchCtrl',templateUrl:'views/search-users.html'}).state('search-tags',{url:'/search-tags/:query',controller:'SearchCtrl',templateUrl:'views/search-tags.html'}).state('search-collections',{url:'/search-collections/:query',controller:'SearchCtrl',templateUrl:'views/search-collections.html'}).state('search-clips',{url:'/search-clips/:query',resolve:{clips:function(SearchService){return SearchService.load()}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('add-collection',{url:'/add-collection/:action/:clipId',params:{action:'account',clipId:''},resolve:{collection:function(){return{}}},controller:'CollectionCtrl',templateUrl:'views/collection/add.html'}).state('edit-collection',{url:'/edit-collection/:collectionId',resolve:{collection:function(CollectionService,$stateParams){return CollectionService.singleLoad($stateParams.collectionId)}},controller:'CollectionCtrl',templateUrl:'views/collection/add.html'}).state('comments',{url:'/comments/:clipId',resolve:{comments:function(CommentService,$stateParams){return CommentService.load($stateParams.clipId)},reclip_users:function(UserListService,$stateParams){return UserListService.getReclips($stateParams.clipId)},like_users:function(UserListService,$stateParams){return UserListService.getLikes($stateParams.clipId)}},controller:'CommentCtrl',templateUrl:'views/clip/comments.html'}).state('registration',{url:'/registration',controller:'LoginCtrl',templateUrl:'views/user/registration.html'}).state('contact',{url:'/contact/:userId',resolve:{account:function(AccountService,$stateParams){return AccountService.load($stateParams.userId)}},controller:'ContactCtrl'}).state('shared',{url:'/shared/:collectionId',cache:!1,controller:'CollectionCtrl',resolve:{collection:function(CollectionService,$stateParams){return[CollectionService.tmp_collection]}},templateUrl:'views/collection/shared.html',}).state('support',{url:'/support',controller:'AboutCtrl',templateUrl:'views/support.html',}).state('about-bazaarr',{url:'/about-bazaarr',controller:'AboutCtrl',templateUrl:'views/about-bazaarr.html',}).state('forgot-password',{url:'/forgot-password',cache:!1,controller:'ForgotPasswordCtrl',templateUrl:'views/user/forgot-password.html',}).state('reset-password',{url:'/reset-password/:userId/:timestamp/:hash',cache:!1,controller:'ResetPasswordCtrl'}).state('email-notification',{url:'/email-notification',controller:'EmailNotificationCtrl',cache:!1,templateUrl:'views/user/email-notification.html'}).state('login-link',{url:'/login-link/:hashLogin/:event',controller:'LoginLinkCtrl'}).state('collection-view',{url:'/collection-view/:colId?page',resolve:{clips:function(ClipsService,$stateParams){return ClipsService.load("collection_clips",!1,{"bid":$stateParams.colId})}},controller:'ClipsCtrl',templateUrl:'views/clips.html'}).state('collection-likes',{url:'/collection-likes/:colId',resolve:{users:function(UserListService,$stateParams){return UserListService.loadCollectionLikes($stateParams.colId)}},controller:'UserListCtrl',templateUrl:'views/user/list.html'}).state('collection-reclips',{url:'/collection-reclips/:colId',resolve:{users:function(UserListService,$stateParams){return UserListService.loadCollectionReclips($stateParams.colId)}},controller:'UserListCtrl',templateUrl:'views/user/list.html'}).state('collection-follows',{url:'/collection-follows/:colId',resolve:{users:function(UserListService,$stateParams){return UserListService.loadCollectionFollows($stateParams.colId)}},controller:'UserListCtrl',templateUrl:'views/user/list.html'}).state('intro',{url:'/intro',templateUrl:'views/intro.html'}).state('get-app',{url:'/get-app',templateUrl:'views/get-app.html'}).state('clip-reclips',{url:'/clip-reclips/:clipId',resolve:{users:function(UserListService,$stateParams){return UserListService.getReclips($stateParams.clipId)}},controller:'UserListCtrl',templateUrl:'views/user/list.html'}).state('clip-likes',{url:'/clip-likes/:clipId',resolve:{users:function(UserListService,$stateParams){return UserListService.getLikes($stateParams.clipId)}},controller:'UserListCtrl',templateUrl:'views/user/list.html'}).state('oauthcallback',{url:'/oauthcallback',controller:'OauthcallbackCtrl'}).state('logoutcallback',{url:'/logoutcallback',controller:'LogoutcallbackCtrl'}).state('maintenance',{url:'/maintenance',templateUrl:'views/maintenance.html'});$urlRouterProvider.otherwise('/recent');$httpProvider.defaults.withCredentials=!0;$httpProvider.defaults.useXDomain=!0;delete $httpProvider.defaults.headers.common['X-Requested-With'];$ionicConfigProvider.views.maxCache(20);$ionicConfigProvider.views.forwardCache(!0);$ionicConfigProvider.tabs.position('bottom');$ionicConfigProvider.navBar.positionPrimaryButtons('left');$ionicConfigProvider.navBar.alignTitle('center');if(ionic.Platform.isWebView()&&ionic.Platform.isAndroid()&&ionic.Platform.version()>4.3){$ionicConfigProvider.scrolling.jsScrolling(!1)}
$ionicConfigProvider.views.swipeBackEnabled(!1);$ionicConfigProvider.transitions.views.ios=function(enteringEle,leavingEle,direction,shouldAnimate){function setStyles(ele,opacity,x,boxShadowOpacity,direction){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?'':0;css.opacity=opacity;if(boxShadowOpacity>-1){css.boxShadow='0 0 10px rgba(0,0,0,'+(d.shouldAnimate?boxShadowOpacity*0.45:0.3)+')'}
if(direction==="vertical"){css[ionic.CSS.TRANSFORM]='translate3d(0,'+x+'%,0)'}
else{css[ionic.CSS.TRANSFORM]='translate3d('+x+'%,0,0)'}
ionic.DomUtil.cachedStyles(ele,css)}
var d={run:function(step){if(direction=='forward'){setStyles(enteringEle,1,(1-step)*99,1-step);setStyles(leavingEle,(1-0.1*step),step*-33,-1)}else if(direction=='back'){setStyles(enteringEle,(1-0.1*(1-step)),(1-step)*-33,-1);setStyles(leavingEle,1,step*100,1-step)}else if(direction=='up'){setStyles(enteringEle,1,(1-step)*99,1-step,"vertical");setStyles(leavingEle,(1-0.1*step),step*-99,-1,"vertical")}else if(direction=='down'){setStyles(enteringEle,(1-0.1*(1-step)),(1-step)*-99,-1,"vertical");setStyles(leavingEle,1,step*100,1-step,"vertical")}else{setStyles(enteringEle,1,0,-1);setStyles(leavingEle,0,0,-1)}},shouldAnimate:shouldAnimate&&(direction=='forward'||direction=='back'||direction=='up'||direction=='down')};return d};$ionicConfigProvider.transitions.views.android=function(enteringEle,leavingEle,direction,shouldAnimate){shouldAnimate=shouldAnimate&&(direction=='forward'||direction=='back'||direction=='up'||direction=='down');function setStyles(ele,x,direction){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?'':0;if(direction==="vertical"){css[ionic.CSS.TRANSFORM]='translate3d(0,'+x+'%,0)'}
else{css[ionic.CSS.TRANSFORM]='translate3d('+x+'%,0,0)'}
ionic.DomUtil.cachedStyles(ele,css)}
var d={run:function(step){if(direction=='forward'){setStyles(enteringEle,(1-step)*99);setStyles(leavingEle,step*-100)}else if(direction=='back'){setStyles(enteringEle,(1-step)*-100);setStyles(leavingEle,step*100)}else if(direction=='up'){setStyles(enteringEle,(1-step)*99,"vertical");setStyles(leavingEle,step*-100,"vertical")}else if(direction=='down'){setStyles(enteringEle,(1-step)*-100,"vertical");setStyles(leavingEle,step*100,"vertical")}else{setStyles(enteringEle,0);setStyles(leavingEle,0)}},shouldAnimate:shouldAnimate};return d};ngToastProvider.configure({verticalPosition:'middle',horizontalPosition:'center',maxNumber:1})}).run(function($rootScope,$location,$state,$ionicScrollDelegate,$ionicViewSwitcher,$cookies,$cordovaInAppBrowser,$cordovaStatusbar,$cordovaAppVersion,localStorageService,DeviceAdapterService,MenuService,UserService,AccountService,CollectionService,ConfigService,HttpService,ClipsService,StateService,MetaService){$rootScope.is_app=!1;document.addEventListener("deviceready",function(){DeviceAdapterService.is_ready=!0;$rootScope.is_app=!0;feedback.initialize('74a134a0-c14a-11e4-be9a-eb0bc9144ec0');window.analytics.Start();$cordovaStatusbar.overlaysWebView(!0);$cordovaStatusbar.style(1);$cordovaAppVersion.getAppVersion().then(function(version){var current_version=version;var version=localStorageService.get("version");if(current_version!==version){UserService.logout().then(function(data){HttpService.clearCache();UserService.clearUser()},function(reason){HttpService.clearCache();UserService.clearUser()})}
localStorageService.set("version",current_version)})},!1);document.addEventListener("pause",function(){window.analytics.Stop()});document.addEventListener("resume",function(){window.analytics.Start()});$rootScope.config={screenHeight:window.innerHeight-100};$rootScope.backState=[];$rootScope.$on('$stateChangeStart',function(event,toState,toParams,fromState,fromParams){var active_menu=MenuService.getActiveMenu(toState.url);var index=-1;if(!!active_menu===!0){index=active_menu.id}
$rootScope.active=[];$rootScope.active[index]="active";$ionicScrollDelegate.resize();if($rootScope.backState.length){var last_state=$rootScope.backState[$rootScope.backState.length-1];if(angular.isDefined(last_state.params)&&angular.isDefined(last_state.params.colId)&&last_state.state===toState.name&&last_state.params.colId===toParams.colId){$rootScope.backState.pop();$rootScope.backEvent=!0}}
if(!$rootScope.backEvent&&fromState.name&&!(fromState.name==="clip"&&toState.name==="clip")&&fromState.name!=="login"&&!(fromState.name.indexOf("account")===0&&toState.name.indexOf("account")===0&&fromParams.userId===toParams.userId)){$rootScope.backState.push({'state':fromState.name,'params':fromParams})}
if(fromState.name&&$rootScope.backState.length){localStorageService.set("backState",$rootScope.backState)}
$rootScope.backEvent=!1;MetaService.setDefault()});window.addEventListener('popstate',function(e){},!1);$rootScope.goUserMenu=function(state){$state.go(state)};$rootScope.getUserMenuActive=function(path){if(typeof path==='object'){for(var i=0;i<path.length;i++){if($state.includes("account."+path[i])){return "active"}}}else{if($state.includes("account."+path)){return "active"}}
return ""};$rootScope.isUserMenu=function(){var path=$location.path().substr(1);if($state.includes("collections")||path==="clips"||path==="likes"){return !0}
return !1};$rootScope.back=function(direction){direction=direction||"back";$ionicViewSwitcher.nextDirection(direction);$rootScope.backEvent=!0;if(!$rootScope.backState.length){$rootScope.backState=localStorageService.get("backState")}
if($rootScope.backState.length){var back_state=$rootScope.backState.pop();if(back_state.state){$state.go(back_state.state,back_state.params)}
else{$state.go("recent")}}
else{$state.go("recent")}};$rootScope.backTwice=function(){window.history.go(-2)};$rootScope.isMyAccount=function(){if(!$rootScope.isLogin()){return !1}
return AccountService.getAccountId()===UserService.user.uid?!0:!1};$rootScope.isLogin=function(){if(!Object.keys(UserService.user).length){return !1}
return !0};$rootScope.openInApp=function(url,self,is_target){if(!url){return !1}
if("standalone" in window.navigator&&window.navigator.standalone){var a=document.createElement('a');a.setAttribute("href",url);a.setAttribute("target","_blank");var dispatch=document.createEvent("HTMLEvents");dispatch.initEvent("click",!0,!0);a.dispatchEvent(dispatch);return !1}
var target=is_target?"_system":"_blank";var url=self?ConfigService.server_url()+'/'+url:url;var options=DeviceAdapterService.getInAppBrowserConfig();if(!DeviceAdapterService.is_ready){options.menubar="yes";options.toolbar="yes";if(window){window.open(url,target,options)}
return !1}
$cordovaInAppBrowser.open(url,target,options).then(function(event){}).catch(function(event){})};$rootScope.clearClipPager=function(){ClipsService.pager={}}
$rootScope.$$listeners['$ionicView.afterEnter']=[];window.addEventListener("resize",function(){$rootScope.$broadcast("orientation:change");$ionicScrollDelegate.resize()},!1);$rootScope.$state=$state;$rootScope.StateService=StateService;var session=localStorageService.get("session");if(session){UserService.is_login=!0;UserService.user=session.user;UserService.token=session.token;CollectionService.user_collections=session.collections;$cookies[session.session_name]=session.sessid}
if(UserService.is_login){$rootScope.user=UserService.user;UserService.getToken().then(function(data){UserService.token=data.data})}}).directive('textarea',function(){return{restrict:'E',scope:{'noIonic':'='},link:function(scope,element,attr){if(scope.noIonic){element.bind('touchend  touchmove touchstart',function(e){e.stopPropagation()})}}}})
angular.module('bazaarr').service('ConfigService',function(DeviceAdapterService,localStorageService){this.url="https://www.bazaarr.org";this.site_name="Bazaarr";this.title_keywords="Pakistani, Indian & Ethnic Fashion - Ethnic Fashion";this.meta_description="Bazaarr is a global fashion exchange encouraging users to browse and showcase style collections. Ethnic fashion from the world. Indian, Pakistani fashion etc.";this.server_url=function(){if(DeviceAdapterService.is_ready||"file:"==window.location.protocol||window.location.host.match(/bazaarr/g)==null){return localStorageService.get("server_url")||this.url}
return this.website_url()};this.connect_url=function(){return window.location.host};this.website_url=function(){var host=window.location.host.replace("m\.","");var prehost="";if(host.indexOf(".dev")===-1){prehost="www."}
return window.location.protocol+'//'+prehost+host};this.setUrl=function(url){localStorageService.set("server_url",url);this.url=url}});angular.module('bazaarr').service('MetaService',function($rootScope,$location,ConfigService,AccountService){this.head={};this.head.title="";this.head.description="";this.head.prev_href="";this.head.next_href="";this.head.canonical_url="";this.seo_cur_page=0;this.set=function(view,type,params,page){if(angular.isUndefined(this[view])){return !1}
var result=this[view](type,params,page);$rootScope.head=this.head;return result};this.setDefault=function(){this.head={};this.head.title=ConfigService.site_name+" | "+ConfigService.title_keywords;$rootScope.head=this.head};this.setTitle=function(title){title=title?title+" | ":"";this.head.title=title+ConfigService.site_name+" | "+ConfigService.title_keywords};this.setDescription=function(description){description=description||ConfigService.meta_description;this.head.description=description};this.setCanonicalUrl=function(path){path=path||"";this.head.canonical_url=ConfigService.website_url()+"/"+path}
this.login=function(){this.setTitle("Sign In");return !0};this.search=function(){this.setTitle("Search");this.setDescription("Search for fashion on Bazaarr");this.setCanonicalUrl("search");return !0};this.clip=function(type,params,page){this.setTitle(params.description+" - Clip "+params.nid);this.setDescription(params.description+" - Clip "+params.nid);this.setCanonicalUrl("clip/"+params.nid);return !0};this.user=function(type,params){params.about=params.about||params.name+" on "+ConfigService.site_name;this.setTitle(params.name);this.setDescription(params.about);this.setCanonicalUrl("user/"+params.name);return !0};this.following=function(type,params){this.setTitle(params.name+" following");this.setDescription("Followed by "+params.name);this.setCanonicalUrl("user/"+params.name+"/following");return !0};this.followers=function(type,params){this.setTitle(params.name+" followers");this.setDescription("Followers of "+params.name);this.setCanonicalUrl("user/"+params.name+"/followers");return !0};this.clips=function(type,params,page){if(type!=="following"){this.seo_cur_page=parseInt($location.search().page)||0;var prev_page=this.seo_cur_page===0?0:this.seo_cur_page-1;var next_page=this.seo_cur_page+1;var page_name=params.account_page?"account/"+AccountService.getAccountId()+"/"+type:type;this.head.prev_href=this.seo_cur_page?"#!/"+page_name:"";this.head.prev_href=prev_page?this.head.prev_href+"?page="+prev_page:this.head.prev_href;this.head.next_href=next_page?"#!/"+page_name+"?page="+next_page:""}
if(angular.isUndefined(this.clips[type])){return !1}
return this.clips[type](this,params,page)};this.clips.recent=function(that,params,page){that.setTitle();that.setDescription();that.setCanonicalUrl();return !0};this.clips.shop=function(that,params,page){that.setTitle("Shop");that.setDescription("Shop for fashion items");that.setCanonicalUrl("shop");return !0};this.clips.hashtag=function(that,params,page){that.setTitle("Viewing: "+params.name);that.setCanonicalUrl("hashtags/"+params.name);return !0};this.clips.clips=function(that,params,page){that.setTitle(params.name+" clips");that.setDescription("Clips that the "+params.name+" clipped");that.setCanonicalUrl("user/"+params.name+"/clips");return !0};this.clips.likes=function(that,params,page){that.setTitle(params.name+" likes");that.setDescription("Clips that are liked by "+params.name);that.setCanonicalUrl("user/"+params.name+"/likes");return !0};this.clips.collection_clips=function(that,params,page){if(angular.isUndefined(params.bid)){return !1}
params.description=params.description||"Collection "+params.name+" on Bazaarr";that.setTitle("Collection "+params.name+" on Bazaarr");that.setDescription(params.description);that.setCanonicalUrl("user/"+params.name+"/collection/"+params.bid);return !0}});var handleOpenURL=function(url){url=url.replace("bazaarr://","");window.location.hash="/"+url};function CutString(string,limit){this.tempDiv=document.createElement('div');this.tempDiv.id="TempNodeForTest";this.tempDiv.innerHTML=string;this.charCount=0;this.limit=limit}
window.onresize=function(){var cv=document.getElementsByClassName('clip-view')[0];if(cv){var c=document.getElementsByClassName('view-container')[0];if(c.clientWidth/c.clientHeight>0.67){cv.classList.add('tablet')}else{cv.classList.remove('tablet')}}};currency={"AED":{"code":"AED","symbol":"\u062f.\u0625","name":"United Arab Emirates Dirham","numeric_code":"784","code_placement":"before","minor_unit":"Fils","major_unit":"Dirham"},"AFN":{"code":"AFN","symbol":"Af","name":"Afghan Afghani","decimals":0,"numeric_code":"971","minor_unit":"Pul","major_unit":"Afghani"},"ANG":{"code":"ANG","symbol":"NAf.","name":"Netherlands Antillean Guilder","numeric_code":"532","minor_unit":"Cent","major_unit":"Guilder"},"AOA":{"code":"AOA","symbol":"Kz","name":"Angolan Kwanza","numeric_code":"973","minor_unit":"C\u00eantimo","major_unit":"Kwanza"},"ARM":{"code":"ARM","symbol":"m$n","name":"Argentine Peso Moneda Nacional","minor_unit":"Centavos","major_unit":"Peso"},"ARS":{"code":"ARS","symbol":"AR$","name":"Argentine Peso","numeric_code":"032","minor_unit":"Centavo","major_unit":"Peso"},"AUD":{"code":"AUD","symbol":"AU$","name":"Australian Dollar","numeric_code":"036","minor_unit":"Cent","major_unit":"Dollar"},"AWG":{"code":"AWG","symbol":"Afl.","name":"Aruban Florin","numeric_code":"533","minor_unit":"Cent","major_unit":"Guilder"},"AZN":{"code":"AZN","symbol":"man.","name":"Azerbaijanian Manat","minor_unit":"Q\u0259pik","major_unit":"New Manat"},"BAM":{"code":"BAM","symbol":"KM","name":"Bosnia-Herzegovina Convertible Mark","numeric_code":"977","minor_unit":"Fening","major_unit":"Convertible Marka"},"BBD":{"code":"BBD","symbol":"Bds$","name":"Barbadian Dollar","numeric_code":"052","minor_unit":"Cent","major_unit":"Dollar"},"BDT":{"code":"BDT","symbol":"Tk","name":"Bangladeshi Taka","numeric_code":"050","minor_unit":"Paisa","major_unit":"Taka"},"BGN":{"code":"BGN","symbol":"\u043b\u0432","name":"Bulgarian lev","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","numeric_code":"975","minor_unit":"Stotinka","major_unit":"Lev"},"BHD":{"code":"BHD","symbol":"BD","name":"Bahraini Dinar","decimals":3,"numeric_code":"048","minor_unit":"Fils","major_unit":"Dinar"},"BIF":{"code":"BIF","symbol":"FBu","name":"Burundian Franc","decimals":0,"numeric_code":"108","minor_unit":"Centime","major_unit":"Franc"},"BMD":{"code":"BMD","symbol":"BD$","name":"Bermudan Dollar","numeric_code":"060","minor_unit":"Cent","major_unit":"Dollar"},"BND":{"code":"BND","symbol":"BN$","name":"Brunei Dollar","numeric_code":"096","minor_unit":"Sen","major_unit":"Dollar"},"BOB":{"code":"BOB","symbol":"Bs","name":"Bolivian Boliviano","numeric_code":"068","minor_unit":"Centavo","major_unit":"Bolivianos"},"BRL":{"code":"BRL","symbol":"R$","name":"Brazilian Real","numeric_code":"986","symbol_placement":"before","code_placement":"","thousands_separator":".","decimal_separator":",","minor_unit":"Centavo","major_unit":"Reais"},"BSD":{"code":"BSD","symbol":"BS$","name":"Bahamian Dollar","numeric_code":"044","minor_unit":"Cent","major_unit":"Dollar"},"BTN":{"code":"BTN","symbol":"Nu.","name":"Bhutanese Ngultrum","numeric_code":"064","minor_unit":"Chetrum","major_unit":"Ngultrum"},"BWP":{"code":"BWP","symbol":"BWP","name":"Botswanan Pula","numeric_code":"072","minor_unit":"Thebe","major_unit":"Pulas"},"BYR":{"code":"BYR","symbol":"\u0440\u0443\u0431.","name":"Belarusian ruble","numeric_code":"974","symbol_placement":"after","code_placement":"","decimals":0,"thousands_separator":" ","major_unit":"Ruble"},"BZD":{"code":"BZD","symbol":"BZ$","name":"Belize Dollar","numeric_code":"084","minor_unit":"Cent","major_unit":"Dollar"},"CAD":{"code":"CAD","symbol":"CA$","name":"Canadian Dollar","numeric_code":"124","minor_unit":"Cent","major_unit":"Dollar"},"CDF":{"code":"CDF","symbol":"CDF","name":"Congolese Franc","numeric_code":"976","minor_unit":"Centime","major_unit":"Franc"},"CHF":{"code":"CHF","symbol":"Fr.","name":"Swiss Franc","rounding_step":"0.05","numeric_code":"756","minor_unit":"Rappen","major_unit":"Franc"},"CLP":{"code":"CLP","symbol":"CL$","name":"Chilean Peso","decimals":0,"numeric_code":"152","minor_unit":"Centavo","major_unit":"Peso"},"CNY":{"code":"CNY","symbol":"CN\u00a5","name":"Chinese Yuan Renminbi","numeric_code":"156","minor_unit":"Fe","major_unit":"Yuan Renminbi"},"COP":{"code":"COP","symbol":"$","name":"Colombian Peso","decimals":0,"numeric_code":"170","symbol_placement":"before","code_placement":"hidden","thousands_separator":".","decimal_separator":",","minor_unit":"Centavo","major_unit":"Peso"},"CRC":{"code":"CRC","symbol":"\u00a2","name":"Costa Rican Col\u00f3n","decimals":0,"numeric_code":"188","minor_unit":"C\u00e9ntimo","major_unit":"Col\u00f3n"},"CUC":{"code":"CUC","symbol":"CUC$","name":"Cuban Convertible Peso","minor_unit":"Centavo","major_unit":"Peso"},"CUP":{"code":"CUP","symbol":"CU$","name":"Cuban Peso","numeric_code":"192","minor_unit":"Centavo","major_unit":"Peso"},"CVE":{"code":"CVE","symbol":"CV$","name":"Cape Verdean Escudo","numeric_code":"132","minor_unit":"Centavo","major_unit":"Escudo"},"CZK":{"code":"CZK","symbol":"K\u010d","name":"Czech Republic Koruna","numeric_code":"203","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","minor_unit":"Hal\u00e9\u0159","major_unit":"Koruna"},"DJF":{"code":"DJF","symbol":"Fdj","name":"Djiboutian Franc","numeric_code":"262","decimals":0,"minor_unit":"Centime","major_unit":"Franc"},"DKK":{"code":"DKK","symbol":"kr.","name":"Danish Krone","numeric_code":"208","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","minor_unit":"\u00d8re","major_unit":"Kroner"},"DOP":{"code":"DOP","symbol":"RD$","name":"Dominican Peso","numeric_code":"214","minor_unit":"Centavo","major_unit":"Peso"},"DZD":{"code":"DZD","symbol":"DA","name":"Algerian Dinar","numeric_code":"012","minor_unit":"Santeem","major_unit":"Dinar"},"EEK":{"code":"EEK","symbol":"Ekr","name":"Estonian Kroon","thousands_separator":" ","decimal_separator":",","numeric_code":"233","minor_unit":"Sent","major_unit":"Krooni"},"EGP":{"code":"EGP","symbol":"EG\u00a3","name":"Egyptian Pound","numeric_code":"818","minor_unit":"Piastr","major_unit":"Pound"},"ERN":{"code":"ERN","symbol":"Nfk","name":"Eritrean Nakfa","numeric_code":"232","minor_unit":"Cent","major_unit":"Nakfa"},"ETB":{"code":"ETB","symbol":"Br","name":"Ethiopian Birr","numeric_code":"230","minor_unit":"Santim","major_unit":"Birr"},"EUR":{"code":"EUR","symbol":"\u20ac","name":"Euro","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","numeric_code":"978","minor_unit":"Cent","major_unit":"Euro"},"FJD":{"code":"FJD","symbol":"FJ$","name":"Fijian Dollar","numeric_code":"242","minor_unit":"Cent","major_unit":"Dollar"},"FKP":{"code":"FKP","symbol":"FK\u00a3","name":"Falkland Islands Pound","numeric_code":"238","minor_unit":"Penny","major_unit":"Pound"},"GBP":{"code":"GBP","symbol":"\u00a3","name":"British Pound Sterling","numeric_code":"826","symbol_placement":"before","code_placement":"","minor_unit":"Penny","major_unit":"Pound"},"GHS":{"code":"GHS","symbol":"GH\u20b5","name":"Ghanaian Cedi","minor_unit":"Pesewa","major_unit":"Cedi"},"GIP":{"code":"GIP","symbol":"GI\u00a3","name":"Gibraltar Pound","numeric_code":"292","minor_unit":"Penny","major_unit":"Pound"},"GMD":{"code":"GMD","symbol":"GMD","name":"Gambian Dalasi","numeric_code":"270","minor_unit":"Butut","major_unit":"Dalasis"},"GNF":{"code":"GNF","symbol":"FG","name":"Guinean Franc","decimals":0,"numeric_code":"324","minor_unit":"Centime","major_unit":"Franc"},"GTQ":{"code":"GTQ","symbol":"GTQ","name":"Guatemalan Quetzal","numeric_code":"320","minor_unit":"Centavo","major_unit":"Quetzales"},"GYD":{"code":"GYD","symbol":"GY$","name":"Guyanaese Dollar","decimals":0,"numeric_code":"328","minor_unit":"Cent","major_unit":"Dollar"},"HKD":{"code":"HKD","symbol":"HK$","name":"Hong Kong Dollar","numeric_code":"344","symbol_placement":"before","code_placement":"","minor_unit":"Cent","major_unit":"Dollar"},"HNL":{"code":"HNL","symbol":"HNL","name":"Honduran Lempira","numeric_code":"340","minor_unit":"Centavo","major_unit":"Lempiras"},"HRK":{"code":"HRK","symbol":"kn","name":"Croatian Kuna","numeric_code":"191","minor_unit":"Lipa","major_unit":"Kuna"},"HTG":{"code":"HTG","symbol":"HTG","name":"Haitian Gourde","numeric_code":"332","minor_unit":"Centime","major_unit":"Gourde"},"HUF":{"code":"HUF","symbol":"Ft","name":"Hungarian Forint","numeric_code":"348","decimal_separator":",","thousands_separator":" ","decimals":0,"symbol_placement":"after","code_placement":"","major_unit":"Forint"},"IDR":{"code":"IDR","symbol":"Rp","name":"Indonesian Rupiah","decimals":0,"numeric_code":"360","minor_unit":"Sen","major_unit":"Rupiahs"},"ILS":{"code":"ILS","symbol":"\u20aa","name":"Israeli New Shekel","numeric_code":"376","symbol_placement":"before","code_placement":"","minor_unit":"Agora","major_unit":"New Shekels"},"INR":{"code":"INR","symbol":"Rs","name":"Indian Rupee","numeric_code":"356","minor_unit":"Paisa","major_unit":"Rupee"},"IRR":{"code":"IRR","symbol":"\ufdfc","name":"Iranian Rial","numeric_code":"364","symbol_placement":"after","code_placement":"","minor_unit":"Rial","major_unit":"Toman"},"ISK":{"code":"ISK","symbol":"Ikr","name":"Icelandic Kr\u00f3na","decimals":0,"thousands_separator":" ","numeric_code":"352","minor_unit":"Eyrir","major_unit":"Kronur"},"JMD":{"code":"JMD","symbol":"J$","name":"Jamaican Dollar","numeric_code":"388","symbol_placement":"before","code_placement":"","minor_unit":"Cent","major_unit":"Dollar"},"JOD":{"code":"JOD","symbol":"JD","name":"Jordanian Dinar","decimals":3,"numeric_code":"400","minor_unit":"Piastr","major_unit":"Dinar"},"JPY":{"code":"JPY","symbol":"\u00a5","name":"Japanese Yen","decimals":0,"numeric_code":"392","symbol_placement":"before","code_placement":"","minor_unit":"Sen","major_unit":"Yen"},"KES":{"code":"KES","symbol":"Ksh","name":"Kenyan Shilling","numeric_code":"404","minor_unit":"Cent","major_unit":"Shilling"},"KGS":{"code":"KGS","code_placement":"","symbol":"\u0441\u043e\u043c","symbol_placement":"after","name":"Kyrgyzstani Som","numeric_code":"417","thousands_separator":"","major_unit":"Som","minor_unit":"Tyiyn"},"KMF":{"code":"KMF","symbol":"CF","name":"Comorian Franc","decimals":0,"numeric_code":"174","minor_unit":"Centime","major_unit":"Franc"},"KRW":{"code":"KRW","symbol":"\u20a9","name":"South Korean Won","decimals":0,"numeric_code":"410","minor_unit":"Jeon","major_unit":"Won"},"KWD":{"code":"KWD","symbol":"KD","name":"Kuwaiti Dinar","decimals":3,"numeric_code":"414","minor_unit":"Fils","major_unit":"Dinar"},"KYD":{"code":"KYD","symbol":"KY$","name":"Cayman Islands Dollar","numeric_code":"136","minor_unit":"Cent","major_unit":"Dollar"},"KZT":{"code":"KZT","symbol":"\u0442\u0433.","name":"Kazakhstani tenge","numeric_code":"398","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","minor_unit":"Tiyn","major_unit":"Tenge"},"LAK":{"code":"LAK","symbol":"\u20adN","name":"Laotian Kip","decimals":0,"numeric_code":"418","minor_unit":"Att","major_unit":"Kips"},"LBP":{"code":"LBP","symbol":"LB\u00a3","name":"Lebanese Pound","decimals":0,"numeric_code":"422","minor_unit":"Piastre","major_unit":"Pound"},"LKR":{"code":"LKR","symbol":"SLRs","name":"Sri Lanka Rupee","numeric_code":"144","minor_unit":"Cent","major_unit":"Rupee"},"LRD":{"code":"LRD","symbol":"L$","name":"Liberian Dollar","numeric_code":"430","minor_unit":"Cent","major_unit":"Dollar"},"LSL":{"code":"LSL","symbol":"LSL","name":"Lesotho Loti","numeric_code":"426","minor_unit":"Sente","major_unit":"Loti"},"LTL":{"code":"LTL","symbol":"Lt","name":"Lithuanian Litas","numeric_code":"440","minor_unit":"Centas","major_unit":"Litai"},"LVL":{"code":"LVL","symbol":"Ls","name":"Latvian Lats","numeric_code":"428","minor_unit":"Santims","major_unit":"Lati"},"LYD":{"code":"LYD","symbol":"LD","name":"Libyan Dinar","decimals":3,"numeric_code":"434","minor_unit":"Dirham","major_unit":"Dinar"},"MAD":{"code":"MAD","symbol":" Dhs","name":"Moroccan Dirham","numeric_code":"504","symbol_placement":"after","code_placement":"","minor_unit":"Santimat","major_unit":"Dirhams"},"MDL":{"code":"MDL","symbol":"MDL","name":"Moldovan leu","symbol_placement":"after","numeric_code":"498","code_placement":"","minor_unit":"bani","major_unit":"Lei"},"MMK":{"code":"MMK","symbol":"MMK","name":"Myanma Kyat","decimals":0,"numeric_code":"104","minor_unit":"Pya","major_unit":"Kyat"},"MNT":{"code":"MNT","symbol":"\u20ae","name":"Mongolian Tugrik","decimals":0,"numeric_code":"496","minor_unit":"M\u00f6ng\u00f6","major_unit":"Tugriks"},"MOP":{"code":"MOP","symbol":"MOP$","name":"Macanese Pataca","numeric_code":"446","minor_unit":"Avo","major_unit":"Pataca"},"MRO":{"code":"MRO","symbol":"UM","name":"Mauritanian Ouguiya","decimals":0,"numeric_code":"478","minor_unit":"Khoums","major_unit":"Ouguiya"},"MTP":{"code":"MTP","symbol":"MT\u00a3","name":"Maltese Pound","minor_unit":"Shilling","major_unit":"Pound"},"MUR":{"code":"MUR","symbol":"MURs","name":"Mauritian Rupee","decimals":0,"numeric_code":"480","minor_unit":"Cent","major_unit":"Rupee"},"MXN":{"code":"MXN","symbol":"$","name":"Mexican Peso","numeric_code":"484","symbol_placement":"before","code_placement":"","minor_unit":"Centavo","major_unit":"Peso"},"MYR":{"code":"MYR","symbol":"RM","name":"Malaysian Ringgit","numeric_code":"458","symbol_placement":"before","code_placement":"","minor_unit":"Sen","major_unit":"Ringgits"},"MZN":{"code":"MZN","symbol":"MTn","name":"Mozambican Metical","minor_unit":"Centavo","major_unit":"Metical"},"NAD":{"code":"NAD","symbol":"N$","name":"Namibian Dollar","numeric_code":"516","minor_unit":"Cent","major_unit":"Dollar"},"NGN":{"code":"NGN","symbol":"\u20a6","name":"Nigerian Naira","numeric_code":"566","minor_unit":"Kobo","major_unit":"Naira"},"NIO":{"code":"NIO","symbol":"C$","name":"Nicaraguan Cordoba Oro","numeric_code":"558","minor_unit":"Centavo","major_unit":"Cordoba"},"NOK":{"code":"NOK","symbol":"Nkr","name":"Norwegian Krone","thousands_separator":" ","decimal_separator":",","numeric_code":"578","minor_unit":"\u00d8re","major_unit":"Krone"},"NPR":{"code":"NPR","symbol":"NPRs","name":"Nepalese Rupee","numeric_code":"524","minor_unit":"Paisa","major_unit":"Rupee"},"NZD":{"code":"NZD","symbol":"NZ$","name":"New Zealand Dollar","numeric_code":"554","minor_unit":"Cent","major_unit":"Dollar"},"PAB":{"code":"PAB","symbol":"B\/.","name":"Panamanian Balboa","numeric_code":"590","minor_unit":"Cent\u00e9simo","major_unit":"Balboa"},"PEN":{"code":"PEN","symbol":"S\/.","name":"Peruvian Nuevo Sol","numeric_code":"604","symbol_placement":"before","code_placement":"","minor_unit":"C\u00e9ntimo","major_unit":"Nuevos Sole"},"PGK":{"code":"PGK","symbol":"PGK","name":"Papua New Guinean Kina","numeric_code":"598","minor_unit":"Toea","major_unit":"Kina "},"PHP":{"code":"PHP","symbol":"\u20b1","name":"Philippine Peso","numeric_code":"608","minor_unit":"Centavo","major_unit":"Peso"},"PKR":{"code":"PKR","symbol":"PKRs","name":"Pakistani Rupee","decimals":0,"numeric_code":"586","minor_unit":"Paisa","major_unit":"Rupee"},"PLN":{"code":"PLN","symbol":"z\u0142","name":"Polish Z\u0142oty","decimal_separator":",","thousands_separator":" ","numeric_code":"985","symbol_placement":"after","code_placement":"","minor_unit":"Grosz","major_unit":"Z\u0142otych"},"PYG":{"code":"PYG","symbol":"\u20b2","name":"Paraguayan Guarani","decimals":0,"numeric_code":"600","minor_unit":"C\u00e9ntimo","major_unit":"Guarani"},"QAR":{"code":"QAR","symbol":"QR","name":"Qatari Rial","numeric_code":"634","minor_unit":"Dirham","major_unit":"Rial"},"RHD":{"code":"RHD","symbol":"RH$","name":"Rhodesian Dollar","minor_unit":"Cent","major_unit":"Dollar"},"RON":{"code":"RON","symbol":"RON","name":"Romanian Leu","minor_unit":"Ban","major_unit":"Leu"},"RSD":{"code":"RSD","symbol":"din.","name":"Serbian Dinar","decimals":0,"minor_unit":"Para","major_unit":"Dinars"},"RUB":{"code":"RUB","symbol":"\u0440\u0443\u0431.","name":"Russian Ruble","thousands_separator":" ","decimal_separator":",","numeric_code":"643","symbol_placement":"after","code_placement":"","minor_unit":"Kopek","major_unit":"Ruble"},"SAR":{"code":"SAR","symbol":"SR","name":"Saudi Riyal","numeric_code":"682","minor_unit":"Hallallah","major_unit":"Riyals"},"SBD":{"code":"SBD","symbol":"SI$","name":"Solomon Islands Dollar","numeric_code":"090","minor_unit":"Cent","major_unit":"Dollar"},"SCR":{"code":"SCR","symbol":"SRe","name":"Seychellois Rupee","numeric_code":"690","minor_unit":"Cent","major_unit":"Rupee"},"SDD":{"code":"SDD","symbol":"LSd","name":"Old Sudanese Dinar","numeric_code":"736","minor_unit":"None","major_unit":"Dinar"},"SEK":{"code":"SEK","symbol":"kr","name":"Swedish Krona","numeric_code":"752","thousands_separator":" ","decimal_separator":",","symbol_placement":"after","code_placement":"","minor_unit":"\u00d6re","major_unit":"Kronor"},"SGD":{"code":"SGD","symbol":"S$","name":"Singapore Dollar","numeric_code":"702","minor_unit":"Cent","major_unit":"Dollar"},"SHP":{"code":"SHP","symbol":"SH\u00a3","name":"Saint Helena Pound","numeric_code":"654","minor_unit":"Penny","major_unit":"Pound"},"SLL":{"code":"SLL","symbol":"Le","name":"Sierra Leonean Leone","decimals":0,"numeric_code":"694","minor_unit":"Cent","major_unit":"Leone"},"SOS":{"code":"SOS","symbol":"Ssh","name":"Somali Shilling","decimals":0,"numeric_code":"706","minor_unit":"Cent","major_unit":"Shilling"},"SRD":{"code":"SRD","symbol":"SR$","name":"Surinamese Dollar","minor_unit":"Cent","major_unit":"Dollar"},"SRG":{"code":"SRG","symbol":"Sf","name":"Suriname Guilder","numeric_code":"740","minor_unit":"Cent","major_unit":"Guilder"},"STD":{"code":"STD","symbol":"Db","name":"S\u00e3o Tom\u00e9 and Pr\u00edncipe Dobra","decimals":0,"numeric_code":"678","minor_unit":"C\u00eantimo","major_unit":"Dobra"},"SYP":{"code":"SYP","symbol":"SY\u00a3","name":"Syrian Pound","decimals":0,"numeric_code":"760","minor_unit":"Piastre","major_unit":"Pound"},"SZL":{"code":"SZL","symbol":"SZL","name":"Swazi Lilangeni","numeric_code":"748","minor_unit":"Cent","major_unit":"Lilangeni"},"THB":{"code":"THB","symbol":"\u0e3f","name":"Thai Baht","numeric_code":"764","minor_unit":"Satang","major_unit":"Baht"},"TND":{"code":"TND","symbol":"DT","name":"Tunisian Dinar","decimals":3,"numeric_code":"788","minor_unit":"Millime","major_unit":"Dinar"},"TOP":{"code":"TOP","symbol":"T$","name":"Tongan Pa\u02bbanga","numeric_code":"776","minor_unit":"Senit","major_unit":"Pa\u02bbanga"},"TRY":{"code":"TRY","symbol":"TL","name":"Turkish Lira","numeric_code":"949","thousands_separator":".","decimal_separator":",","symbol_placement":"after","code_placement":"","minor_unit":"Kurus","major_unit":"Lira"},"TTD":{"code":"TTD","symbol":"TT$","name":"Trinidad and Tobago Dollar","numeric_code":"780","minor_unit":"Cent","major_unit":"Dollar"},"TWD":{"code":"TWD","symbol":"NT$","name":"New Taiwan Dollar","numeric_code":"901","minor_unit":"Cent","major_unit":"New Dollar"},"TZS":{"code":"TZS","symbol":"TSh","name":"Tanzanian Shilling","decimals":0,"numeric_code":"834","minor_unit":"Senti","major_unit":"Shilling"},"UAH":{"code":"UAH","symbol":"\u0433\u0440\u043d.","name":"Ukrainian Hryvnia","numeric_code":"980","thousands_separator":"","decimal_separator":".","symbol_placement":"after","code_placement":"","minor_unit":"Kopiyka","major_unit":"Hryvnia"},"UGX":{"code":"UGX","symbol":"USh","name":"Ugandan Shilling","decimals":0,"numeric_code":"800","minor_unit":"Cent","major_unit":"Shilling"},"USD":{"code":"USD","symbol":"$","name":"United States Dollar","numeric_code":"840","symbol_placement":"before","code_placement":"","minor_unit":"Cent","major_unit":"Dollar"},"UYU":{"code":"UYU","symbol":"$U","name":"Uruguayan Peso","numeric_code":"858","minor_unit":"Cent\u00e9simo","major_unit":"Peso"},"VEF":{"code":"VEF","symbol":"Bs.F.","name":"Venezuelan Bol\u00edvar Fuerte","minor_unit":"C\u00e9ntimo","major_unit":"Bolivares Fuerte"},"VND":{"code":"VND","symbol":"\u0111","name":"Vietnamese Dong","decimals":0,"thousands_separator":".","symbol_placement":"after","symbol_spacer":"","code_placement":"","numeric_code":"704","minor_unit":"H\u00e0","major_unit":"Dong"},"VUV":{"code":"VUV","symbol":"VT","name":"Vanuatu Vatu","decimals":0,"numeric_code":"548","major_unit":"Vatu"},"WST":{"code":"WST","symbol":"WS$","name":"Samoan Tala","numeric_code":"882","minor_unit":"Sene","major_unit":"Tala"},"XAF":{"code":"XAF","symbol":"FCFA","name":"CFA Franc BEAC","decimals":0,"numeric_code":"950","minor_unit":"Centime","major_unit":"Franc"},"XCD":{"code":"XCD","symbol":"EC$","name":"East Caribbean Dollar","numeric_code":"951","minor_unit":"Cent","major_unit":"Dollar"},"XOF":{"code":"XOF","symbol":"CFA","name":"CFA Franc BCEAO","decimals":0,"numeric_code":"952","minor_unit":"Centime","major_unit":"Franc"},"XPF":{"code":"XPF","symbol":"CFPF","name":"CFP Franc","decimals":0,"numeric_code":"953","minor_unit":"Centime","major_unit":"Franc"},"YER":{"code":"YER","symbol":"YR","name":"Yemeni Rial","decimals":0,"numeric_code":"886","minor_unit":"Fils","major_unit":"Rial"},"ZAR":{"code":"ZAR","symbol":"R","name":"South African Rand","numeric_code":"710","symbol_placement":"before","code_placement":"","minor_unit":"Cent","major_unit":"Rand"},"ZMK":{"code":"ZMK","symbol":"ZK","name":"Zambian Kwacha","decimals":0,"numeric_code":"894","minor_unit":"Ngwee","major_unit":"Kwacha"}};var p=console.log.bind(console);'use strict';angular.module('bazaarr').controller('MainCtrl',function($scope,$state,$rootScope,$ionicPopover,$ionicPopup,MenuService,UserService,ToastService,ConfigService,HttpService){$scope.setActive=function(){MenuService.setActive()}
$scope.swipeLeft=function(){MenuService.nextMenu()}
$scope.swipeRight=function(){MenuService.prevMenu()}
$scope.isLogin=function(){var is_login=!1;if(UserService.is_login){is_login=!0}
return is_login}
$scope.logout=function(){UserService.logout().then(function(data){HttpService.clearCache();UserService.clearUser();$state.go('login')},function(reason){HttpService.clearCache();UserService.clearUser();$state.go('login')})}
$scope.addClip=function(){$state.go("add")};$scope.goHome=function(){$state.go('recent')};$scope.isSearch=function(){return SearchService.isSearch()};$scope.isCurrentAccount=function(){return $rootScope.isMyAccount()&&$rootScope.isUserMenu()};$ionicPopover.fromTemplateUrl('views/menu/userAccount.html',{scope:$scope}).then(function(popover){$scope.userAccountPopover=popover});$ionicPopover.fromTemplateUrl('views/menu/myAccount.html',{scope:$scope}).then(function(popover){$scope.myAccountPopover=popover});$scope.openPopover=function($event){if($scope.user.uid!=$state.params.userId){$scope.userAccountPopover.show($event)}else{$scope.myAccountPopover.show($event)}};$scope.closePopover=function(){if($scope.myAccountPopover){$scope.myAccountPopover.hide()}
if($scope.userAccountPopover){$scope.userAccountPopover.hide()}};$scope.popoverLogout=function($event){this.closePopover();this.logout()};$scope.goToEditProfile=function($event){this.closePopover();$state.go('edit_profile')}
$scope.goToEditAccount=function($event){this.closePopover();$state.go('edit_account')}
$scope.goToAboutAccount=function($event){this.closePopover();$state.go('about-bazaarr')}
$scope.goToAboutSupport=function($event){this.closePopover();$state.go('support')}
$scope.goUserMenu=function(path,params){this.closePopover();$state.go(path,params)}
$scope.goLogin=function(){ToastService.showMessage("danger","Please sign in to continue");$state.go('login')}
$scope.selectServer=function(){$scope.server_popup=$ionicPopup.show({title:"Select server",templateUrl:'views/popups/select_server.html',scope:$scope,buttons:[{text:'Cancel'}]})}
$scope.setServer=function(url){HttpService.clearCache();ConfigService.setUrl(url);$scope.server_popup.close();window.location.reload()}
$scope.isInstructionBarHidden=function(){if("standalone" in window.navigator){if(!window.navigator.standalone){return !!window.localStorage.isBookmarkHidden}else{return !0}}else{return !!window.localStorage.isBookmarkHidden}}
$scope.hideBookmarkBar=function(){window.localStorage.setItem('isBookmarkHidden',!0)}
$scope.resetInstructions=function(){window.localStorage.removeItem('isBookmarkHidden')}
$scope.isAndroid=function(){return ionic.Platform.isAndroid()}
$scope.isIOS=function(){return ionic.Platform.isIOS()}
if(!$scope.isLogin()){$scope.resetInstructions()}});angular.module('bazaarr').service('ArrayService',function(){this.dropKeys=function(arr){return arr.filter(function(){return !0})}
this.url_domain=function(link){var a=document.createElement('a');a.href=link;return a.hostname}});angular.module('bazaarr').service('MenuService',function($ionicScrollDelegate,$stateParams,$location,$ionicTabsDelegate){this.active_id=0,this.get=function(){return[{"id":"0","name":"Recent","url":"recent","api":{"url":"views/clip_pages","display_id":"page_3"}},{"id":"1","name":"Following","url":"following","api":{"url":"views/clip_pages","display_id":"page_4"}},{"id":"2","name":"Shop","url":"shop","api":{"url":"views/clip_pages","display_id":"page_2"}},{"id":"3","name":"Search","url":"search"},{"id":"4","name":"My Account","url":"collections"},{"id":"5","name":"Clips","url":"clips","api":{"url":"views/clip_pages","display_id":"page_7"}},{"id":"6","name":"Likes","url":"likes","api":{"url":"views/clip_pages","display_id":"page_8"}},]},this.setActiveMenuCss=function(index){var $menus=document.body.querySelectorAll(".main-menu a");for(var i=0;i<$menus.length;i++){$menus[i].className=""}
document.getElementById("main-menu_"+index).className="active"},this.setActive=function(active_id){this.active_id=active_id||$ionicTabsDelegate.selectedIndex()-1},this.getTitle=function(){var title="Recent";if($stateParams){var url="";if($stateParams.contentTitle){title=$stateParams.contentTitle;url="content/"+title}
else if($stateParams.clipsPage){title=$stateParams.clipsPage;url="clips/"+title}
else{return title}}
return title},this.getActiveMenu=function(url){url=url||$location.url();url=url.replace(/\/:(.*)/,"");var menus=this.get();for(var i=0;i<menus.length;i++){if("/"+menus[i].url==url){return menus[i]}}
return{}},this.nextMenu=function(){var menus=this.get();if(this.active_id>=menus.length){return !1}
$location.url(menus[this.active_id+1].url);this.setActive(this.active_id+1)},this.prevMenu=function(){var menus=this.get();if(this.active_id<=0){return !1}
$location.url(menus[this.active_id-1].url);this.setActive(this.active_id-1)}});'use strict';angular.module('bazaarr').controller('ClipsCtrl',function($scope,$rootScope,$state,$timeout,$cacheFactory,$ionicPopup,$ionicScrollDelegate,$ionicPosition,$ionicNavBarDelegate,$ionicLoading,$ionicHistory,MenuService,ClipsService,SearchService,ClipService,UserService,CollectionService,ToastService,HttpService,FollowService,AccountService,MetaService,clips){var menu=MenuService.getActiveMenu();if(angular.isDefined(clips.data)&&clips.data!=null&&clips.data.length){$scope.clips=ClipsService.prepare(clips.data,"",!0);$scope.block_height=0;$scope.vis_clips=$scope.clips;if(clips.data.length>=10){$timeout(function(){$scope.is_load_more=!0},1000)}
else{$rootScope.head.next_href=""}}
else{if(SearchService.isSearch()){ToastService.showMessage("danger","We did not find results. Please type a new query")}
else{ToastService.showMessage("danger","No clips")}}
$scope.subtitle="";$scope.title=Object.keys(menu).length?menu.name:SearchService.getTitle();$scope.loading_more=!1;if($state.includes("collection-view")){setCollection()}
if($state.includes("hashtag")){$scope.title='#'+$state.params.hashtagName;MetaService.set("clips","hashtag",{"name":$state.params.hashtagName});if(clips.data.length<10){$rootScope.head.next_href=""}}
if($state.includes("category")&&angular.isDefined(clips.data)&&angular.isDefined(clips.data[0])){$scope.title=clips.data[0].category_name}
if($state.includes("search-clips")){$scope.search={};$scope.search.search_api_views_fulltext=$state.params.query}
$scope.swipeLeft=function(){MenuService.nextMenu()};$scope.swipeRight=function(){MenuService.prevMenu()};$scope.openClip=function(clip){$state.go("clip",{clipId:clip.nid}).then(function(){})};$scope.loadMore=function(){if($scope.loading_more===!0){$scope.$broadcast('scroll.infiniteScrollComplete');return !1}
$scope.loading_more=!0;var service={};if($state.includes("search-clips")){service=SearchService.loadMore()}
else{service=ClipsService.loadMore()}
service.then(function(data){if(data.data==null){$scope.is_load_more=!1;$scope.$broadcast('scroll.infiniteScrollComplete');$scope.loading_more=!1;return !1}
clips.data=clips.data.concat(data.data);$scope.clips=ClipsService.prepare(data.data);$timeout(function(){$scope.$broadcast('scroll.infiniteScrollComplete');$scope.loading_more=!1},500);if(data.data.length<10){$scope.is_load_more=!1}},function(reason){$scope.$broadcast('scroll.infiniteScrollComplete');$scope.loading_more=!1})};$scope.onHold=function(clip){ClipService.clip=clip;$scope.clip=ClipService.clip;$scope.clip_owner=ClipService.clip.uid==UserService.user.uid;$scope.clip_actions_popup=$ionicPopup.show({title:'Clip actions',cssClass:'popup-actions',templateUrl:'views/popups/clip_actions.html',buttons:[{text:'Cancel'}],scope:$scope})};$scope.getBlockedClass=function(block){return block===0?'blocked':''};$scope.isSearch=function(){return SearchService.isSearch()};$scope.is_scroll=!1;$scope.onScroll=function(){if(clips.data.length<30){return !1}
if($scope.is_scroll){return !1}
$scope.is_scroll=!0;var pos=$ionicScrollDelegate.$getByHandle('clipList').getScrollPosition();var pos_top=pos.top-300;var pos_bot=pos.top+window.innerHeight+300;var all_clips=$scope.clips;var vis_clips=[];var block_height=0;p(all_clips);angular.forEach(all_clips,function(clips_row,i){var height=0;vis_clips[i]=[];angular.forEach(clips_row,function(clip,j){height+=all_clips[i][j].wrap_h;if(height>pos_top&&height<pos_bot){vis_clips[i].push(all_clips[i][j]);block_height=block_height||height}
else if((height<pos_top||height>pos_bot)){}})});$timeout(function(){p(block_height);$scope.block_height=block_height;$scope.vis_clips=vis_clips;$scope.is_scroll=!1},700)};$scope.doRefresh=function(){if($state.includes("search-results")){$scope.$broadcast('scroll.refreshComplete');return !1}
if($state.current.name.indexOf("account.")>-1){AccountService.update()}
var $httpDefaultCache=$cacheFactory.get('$http');$httpDefaultCache.removeAll();ClipsService.pager[ClipsService.page_api_url]=0;ClipsService.load(ClipsService.page_api_url,ClipsService.is_user_page,ClipsService.params).then(function(data){$scope.clips=ClipsService.prepare(data.data,"",!0);$rootScope.$broadcast('scroll.refreshComplete')})};$scope.$parent.doRefresh=$scope.doRefresh;$scope.canEdit=function(){if($rootScope.isMyAccount()&&$state.includes("account.collections")){return !0}
return !1}
$scope.$on('orientation:change',function(){if(ClipsService.getColsNumber()===ClipsService.size){return !1}
if($scope.$$phase){$scope.clips=ClipsService.prepare(clips.data)}
else{$scope.$apply(function(){$scope.clips=ClipsService.prepare(clips.data)})}
$ionicHistory.clearCache()});$scope.accept_collection=function(coll,type){var bid=coll.bid;CollectionService.accept_collection(bid,type).then(function(data){if(type==0||type==3){$state.go('account.collections',{"userId":$rootScope.user.uid})}else{$scope.collection.accepted='1'}
HttpService.clearCache();ToastService.showMessage("success",data.data.messages.status[0])})};$scope.addClipFromCollection=function(collection){CollectionService.add_clip_collection=collection;$state.go("add")}
$scope.goEditCollection=function(bid){$state.go("edit-collection",{collectionId:bid})};$scope.backCondition=function(){if($state.includes('collection')||$state.includes('hashtag')){$rootScope.back()}};function setCollection(){CollectionService.singleLoad($state.params.colId).then(function(data){$scope.collection=data.data[0];$scope.title=data.data[0].name;$timeout(function(){$ionicNavBarDelegate.title(data.data[0].name)},800);MetaService.set("clips","collection_clips",{"bid":$scope.collection.bid,"name":$scope.title,"description":$scope.collection.description,"user_name":$scope.collection.user_name})})}});angular.module('bazaarr').service('ClipsService',function($rootScope,$state,$timeout,$location,$ionicLoading,HttpService,AccountService,ArrayService,MetaService,UserService){this.pager={};this.page_api_url="recent";this.is_user_page=!1;this.params={};this.clips={};this.newArr=[];this.newArrSize=[];this.size=0;this.account_page=!1;this.head_title="";this.head_description="";this.loadMore=function(){this.is_more=!0;this.pager[this.page_api_url]=typeof this.pager[this.page_api_url]==="undefined"?1:this.pager[this.page_api_url]+1;return this.loadAdapter()};this.load=function(page,is_user_page,params){this.params=params||{};this.is_more=!1;this.account_page=!1;if(page==="clips"||page==="likes"){this.pager[page]=0;this.account_page=!0}
MetaService.set("clips",page,{"account_page":this.account_page});return this.loadAdapter(page,is_user_page,params)};this.loadAdapter=function(page,is_user_page,params){this.page_api_url=page||this.page_api_url;this.is_user_page=is_user_page||this.is_user_page;if(angular.isDefined(params)&&angular.isDefined(params.bid)){this.page_api_url=this.page_api_url+"-"+params.bid}
if(angular.isDefined(params)&&angular.isDefined(params.tid_raw)){this.page_api_url=this.page_api_url+"-"+params.tid_raw}
HttpService.view_url=this.page_api_url.replace(/\-\d+/gi,"");HttpService.page=this.pager[this.page_api_url]||MetaService.seo_cur_page;HttpService.is_auth="following"===page?!0:!1;HttpService.params=params||this.params;if(this.is_user_page){HttpService.params.uid=AccountService.getAccountId()}
var promise=HttpService.get();var that=this;promise.then(function(){if(that.account_page){var account=AccountService.getAccount();MetaService.set("clips",page,{"name":account.name})}});return promise}
this.chunk_wall=function(arr,size){if(!!arr===!1){return !1}
if((this.size&&this.size!==size)||!this.is_more){this.newArr[this.page_api_url]=[];this.newArrSize[this.page_api_url]=[]}
this.size=size;var newArr=[];var newArrSize=[];var j=0;var j_value=0;if(angular.isUndefined(this.newArr[this.page_api_url])||!this.newArr[this.page_api_url].length){this.newArr[this.page_api_url]=[];this.newArrSize[this.page_api_url]=[];for(var i=0;i<size;i++){this.newArr[this.page_api_url][i]=[];this.newArrSize[this.page_api_url][i]=0}}
for(var i=0;i<arr.length;i++){j_value=this.newArrSize[this.page_api_url].reduce(function(p,v){return(p<v?p:v)});j=this.newArrSize[this.page_api_url].indexOf(j_value);this.newArr[this.page_api_url][j].push(arr[i]);if(typeof arr[i].img_h!=="undefined"){this.newArrSize[this.page_api_url][j]+=arr[i].img_h}
if(typeof arr[i].desc!=="undefined"){this.newArrSize[this.page_api_url][j]+=Math.ceil(10/size)*15}}
return this.newArr[this.page_api_url]},this.chunk_collection=function(arr,size){if(!!arr===!1){return !1}
var newArr=[];var newArrSize=[];var j=0;var j_value=0;for(var i=0;i<size;i++){newArr[i]=[];newArrSize[i]=0}
for(var i=0;i<arr.length;i++){j_value=newArrSize.reduce(function(p,v){return(p<v?p:v)});j=newArrSize.indexOf(j_value);newArr[j].push(arr[i]);if(typeof arr[i].img_h!=="undefined"){newArrSize[j]+=arr[i].img_h}
if(typeof arr[i].desc!=="undefined"){newArrSize[j]+=Math.ceil(arr[i].desc.length/(7*size))*15}}
return newArr},this.chunk_table=function(arr,size){if(arr){var chunks=[],i=0,n=arr.length;while(i<n){chunks.push(arr.slice(i,i+=size))}
return chunks}},this.applyOrientation=function(data,type){type=type||"wall";var cols=this.getColsNumber();if("table"==type){return this.chunk_table(data,cols)}
switch(type){case "table":return this.chunk_table(data,cols);break;case "collection":return this.chunk_collection(data,cols);break;default:return this.chunk_wall(data,cols);break}};this.getColsNumber=function(){var cols=2;if(window.matchMedia("(orientation: landscape)").matches){cols=3}
if(ionic.Platform.isIPad()){cols++}
return cols};this.getCollection=function(bid){HttpService.view_url="collection_clips";HttpService.params={"bid":bid};return HttpService.get()};CutString.prototype.cut=function(){var newDiv=document.createElement('div');this.searchEnd(this.tempDiv,newDiv);return newDiv.innerHTML};CutString.prototype.searchEnd=function(parseDiv,newParent){var ele;var newEle;for(var j=0;j<parseDiv.childNodes.length;j++){ele=parseDiv.childNodes[j];if(ele.nodeType!=3){newEle=ele.cloneNode(!0);newParent.appendChild(newEle);if(ele.childNodes.length===0)
continue;newEle.innerHTML='';var res=this.searchEnd(ele,newEle);if(res)
return res;else{continue}}
if(ele.nodeValue.length+this.charCount>=this.limit){newEle=ele.cloneNode(!0);newEle.nodeValue=ele.nodeValue.substr(0,this.limit-this.charCount)+'...';newParent.appendChild(newEle);return !0}
newEle=ele.cloneNode(!0);newParent.appendChild(newEle);this.charCount+=ele.nodeValue.length}
return !1};function cutHtmlString($string,$limit){var output=new CutString($string,$limit);return output.cut()}
this.prepare=function(data,page,clear){page=page||this.page_api_url;clear=clear||!1;var width=Math.round(window.innerWidth/this.getColsNumber());if(angular.isUndefined(this.clips[page])||clear){this.clips[page]=[]}
for(var i=0;i<data.length;i++){data[i]=this.preRenderSingle(data[i],width,page);var clips_length=this.clips[page].push(data[i]);data[i].index=clips_length-1}
return this.applyOrientation(data)};this.hashtagUrlWrap=function(str){if(angular.isUndefined(str)){return ""}
var count=(str.match(/href/g)||[]).length;if(count){return str}
return str.replace(/#(\w*)/g,'<a href="#!/hashtag/$1">#$1</a>')};this.fakeHashtagUrlWrap=function(str){var count=(str.match(/href/g)||[]).length;if(count){return str}
return str.replace(/#(\w*)/g,'<span class="tag">#$1</span>')};this.preRenderSingle=function(data,width,page){page=page||this.page_api_url;data.source_domain=ArrayService.url_domain(data.source_url);if(data.desc){var hashtags=data.desc.match(/#\w*/g);data.random_hashtag=hashtags?hashtags[Math.floor(Math.random()*hashtags.length)].substr(1):""}
data.desc_text=data.desc;data.desc=this.hashtagUrlWrap(data.desc);if(data.desc_text&&data.desc_text.length>50){var obj=new CutString(this.fakeHashtagUrlWrap(data.desc_text),50)}else{var obj=new CutString(data.desc,50)}
data.full_short_desc=obj.cut();if(data.full_short_desc.length-data.full_short_desc.lastIndexOf('...')==3){data.full_short_desc=data.full_short_desc.substr(0,data.full_short_desc.lastIndexOf('...'))+'<span class="expand">...</span>'}
data.wrap_h=Math.round(width*data.img_h*0.9/data.img_w);data.img_large_h=Math.round(window.innerWidth*0.9*data.img_h/data.img_w);data.list_img=data.img;data.comment_count=parseInt(data.comment_count);data.price=parseFloat(data.price);data.page_list=page;data.index=0;var color=data.color;data.color=[];for(var s=0;s<color.length;s++){if(color[s].name!='noname'){data.color.push(color[s])}}
data.is_ebay=data.source_url.indexOf("ebay.com")===-1?!1:!0;var c=document.getElementsByClassName('view-container')[0];if(c.clientWidth/c.clientHeight>0.67){data.tablet=1}else{data.tablet=0}
window.wideClip=data.wideClip=data.img_w>data.img_h;return data};this.getScreenWidth=function(){if(window.matchMedia("(orientation: landscape)").matches){return screen.height}
return screen.width};this.updateClipInList=function(clip){this.clips[clip.page_list][clip.index]=clip}});angular.module('bazaarr').filter('inSlicesOf',['ClipsService',function(ClipsService){this.makeSlices=function(items,count){count=count||2;if(!angular.isArray(items))
return items;var array=[];var chunkIndex=-1;for(var i=0;i<items.length;i++){chunkIndex=chunkIndex===count-1?0:chunkIndex+1;if(angular.isUndefined(array[chunkIndex])){array[chunkIndex]=[]}
array[chunkIndex].push(items[i])}
if(!angular.equals(ClipsService.arrayinSliceOf,array)){ClipsService.arrayinSliceOf=array}
return ClipsService.arrayinSliceOf};return this.makeSlices}]);'use strict';angular.module('bazaarr').controller('LoginCtrl',function($scope,$rootScope,$state,$cookies,$cordovaPush,UserService,RegistrationService,DeviceAdapterService,CollectionService,ToastService,HttpService,MetaService){if(UserService.is_login){$state.go('account.collections',{"userId":UserService.user.uid});return !1}
MetaService.set("login");$scope.getToken=function(){UserService.getToken().then(function(data){UserService.token=data.data;$cookies["CSRF-TOKEN"]=data.data;$state.go('user.collections')})}
$scope.isConnect=function(){UserService.isConnect().then(function(data){p(data.data.user)})}
$scope.checkKey=function($event){if($event.keyCode==13){$scope.signIn($scope.user)}};$scope.signIn=function(user,type){if(UserService.is_login){$state.go('account.collections',{"userId":UserService.user.uid});return !1}
user.device_id="";$scope.login(user,type)}
$scope.login=function(user,type){UserService.signIn(user,type).then(function(data){CollectionService.user_collections=data.data.collections;HttpService.clearCache();UserService.loginCallback(data.data)},function(reason){UserService.clearUser();ToastService.showMessage("danger",reason.data)})}
$scope.create=function(user){RegistrationService.add(user).then(function(data){var login={};login.username=user.name;login.password=user.pass;$scope.signIn(login)},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})};var domain=window.location.host.split('.').pop(),appId='';switch(domain){case 'dev':appId=1679150075655169;break;case 'org':appId=430153587174464;break;case 'net':appId=430153653841124;break;case 'com':appId=302850933231229;break}
openFB.init({appId:appId});$scope.fbLogin=function(){openFB.login(function(response){if(response.status==='connected'){openFB.api({path:'/me',success:function(data){data.is_fb=!0;$scope.signIn(data,"social")}});p('Facebook login succeeded, got access token: '+response.authResponse.token)}
else{p('Facebook login failed: '+response.error)}},{scope:'email,user_about_me,user_birthday,user_friends,user_hometown,user_website,publish_actions'})};$scope.user={}});angular.module('bazaarr').controller('ForgotPasswordCtrl',function($scope,ForgotPasswordService,ToastService){$scope.forgot={};$scope.forgot.name="";$scope.sendPassword=function(name){ForgotPasswordService.sendPassword(name).then(function(data){$scope.forgot.name="";ToastService.showMessage("success","Further instructions have been sent to your e-mail address")},function(reason){ToastService.showMessage("danger",reason.data)})}});angular.module('bazaarr').controller('ResetPasswordCtrl',function($state,ForgotPasswordService){var hash_data={};hash_data.uid=$state.params.userId
hash_data.timestamp=$state.params.timestamp;hash_data.hashed_pass=$state.params.hash;ForgotPasswordService.hashLogin(hash_data)});angular.module('bazaarr').controller('LoginLinkCtrl',function(LoginService){LoginService.remoteLogin()});angular.module('bazaarr').controller('OauthcallbackCtrl',function($state,UserService,ToastService,CollectionService,HttpService){openFB.api({path:'/me',success:function(user){user.is_fb=!0;if(UserService.is_login){$state.go('account.collections',{"userId":UserService.user.uid});return !1}
user.device_id="";UserService.signIn(user,"social").then(function(data){CollectionService.user_collections=data.data.collections;HttpService.clearCache();UserService.loginCallback(data.data)},function(reason){UserService.clearUser();ToastService.showMessage("danger",reason.data)})}})});angular.module('bazaarr').controller('LogoutcallbackCtrl',function(){alert('closing');window.close()});angular.module('bazaarr').service('LoginService',function($state,$rootScope,HttpService,UserService,ToastService,CollectionService){this.remoteLogin=function(){if(angular.isDefined(UserService.user.uid)&&UserService.user.uid){this.remoteLoginCallback();return !0}
HttpService.view_url="remote-login";HttpService.is_auth=!1;HttpService.params={"hash":$state.params.hashLogin};var promise=HttpService.post();var that=this;promise.then(function(data){CollectionService.user_collections=data.data.collections;UserService.store(data.data);that.remoteLoginCallback()},function(reason){ToastService.showMessage("danger",reason.data);$state.go("login")})};this.remoteLoginCallback=function(){var event=$state.params.event.split("_");switch(event[0]){case "collections":$state.go("account.collections",{'userId':UserService.user.uid}).then(function(){p(event[1])});break;case "like":$state.go("clip",{'clipId':event[1]}).then(function(){$rootScope.$broadcast('clip:like')});break}}});angular.module('bazaarr').service('ForgotPasswordService',function($state,$q,HttpService,UserService,CollectionService,ToastService){this.sendPassword=function(name){if(!name){return $q.reject({"data":"Please enter your username or e-mail address"})}
HttpService.view_url="user/request_new_password";HttpService.is_auth=!1;HttpService.params={"name":name};return HttpService.post()};this.hashLogin=function(hash_data){if(UserService.is_login){ToastService.showMessage("danger","You are already logged in");$state.go("account.collections",{"userId":UserService.user.id});return !1}
HttpService.view_url="hash-login";HttpService.is_auth=!1;HttpService.params=hash_data;HttpService.post().then(function(data){ToastService.showMessage("success","You have just used your one-time login link. It is no longer necessary to use this link to log in. \n\
                Please change your password.");CollectionService.user_collections=data.data.collections;data.data.user.forgot_password=1;UserService.loginCallback(data.data)},function(reason){ToastService.showMessage("danger",reason.data);$state.go("forgot-password")})}});'use strict';angular.module('bazaarr').controller('ClaimCtrl',function($scope,$rootScope,$state,$ionicPopup,ClaimService,ToastService,DeviceAdapterService){$scope.users=[];$scope.search='';$scope.is_ready=DeviceAdapterService.is_ready;$scope.file=null;$scope.params={claim:$state.params.userId,firstname:'',lastname:'',email:'',claim_image:0,app:1};$scope.goToClaim=function(uid,claim){$state.go('claim-user',{"userId":uid});return;if(!claim){$state.go('claim-user',{"userId":uid});return}
$state.go('login')}
$scope.searchInputKeyPress=function(e,search){if(e.keyCode==13){$scope.goSearchResults(search)}}
$scope.goSearchResults=function(search){ClaimService.load_users(search).then(function(data){$scope.users=data.data})};$scope.validateClaim=function(params){if(params.firstname==''){ToastService.showMessage('danger','Field Firstname is required!');return !1}
if(params.lastname==''){ToastService.showMessage('danger','Field Lastname is required!');return !1}
if(params.email==''){ToastService.showMessage('danger','Field Email is required!');return !1}
return !0}
$scope.submitClaim=function(params,claim_image){if(!$scope.validateClaim(params)){return !1}
params.app=claim_image;ClaimService.claim(params).then(function(data){ToastService.showMessage("success",data.data.message);$state.go("account.collections",{userId:params.claim})},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})}
$scope.changedFile=function(element){$scope.$apply(function($scope){var f=element.files[0],FR=new FileReader();FR.onload=function(e){$scope.file=e.target.result};FR.readAsDataURL(f)})};$scope.openPhotoSourcePopup=function(){$scope.photo_source_popup=$ionicPopup.show({title:'Select source',templateUrl:'views/popups/photo_source.html',scope:$scope})}});angular.module('bazaarr').controller('ContactCtrl',function($scope,$state,AccountService,HttpService,ToastService){$scope.contact={uid:$scope.account.uid};$scope.sendMessage=function(contact){AccountService.contactAccount(contact).then(function(data){$scope.contact={uid:$scope.account.uid};ToastService.showMessage("success",'Message sent successfully!')},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})}});angular.module('bazaarr').controller('AboutCtrl',function($scope,$timeout,$state,$sce,$ionicPlatform,AboutService,ConfigService){if($state.includes('support')){}else{$scope.about_data=[];AboutService.loadVar('about_pages_data').then(function(data){if(data.data.length){for(var i=0;i<data.data.length;i++){$scope.about_data.push({title:data.data[i].form.item_name,body:$sce.trustAsHtml(data.data[i].form.item_body.replace(/<a[^>]+>/gm,''))})}}})}
if($scope.closePopover){$scope.closePopover()}})
angular.module('bazaarr').directive('script',function(){return{restrict:'E',scope:!1,link:function(scope,elem,attr){if(attr.type==='text/javascript-lazy'){var s=document.createElement("script");s.type="text/javascript";var src=elem.attr('src');if(src!==undefined){s.src=src}else{var code=elem.text();s.text=code}
document.head.appendChild(s);elem.remove()}}}});angular.module('bazaarr').controller('ProfileCtrl',function($scope,$state,$ionicPopup,$ionicLoading,$cordovaCamera,UserService,AccountService,DeviceAdapterService,ToastService,StateService,HttpService,userPicture){if(!UserService.is_login){$state.go('login');return !1}
$scope.account=angular.copy(UserService.user);$scope.image_src=$scope.account.picture;$scope.file={};$scope.is_ready=DeviceAdapterService.is_ready;var deff_pass={confirmPassword:'',password:'',mess:null,is_valid:!1};$scope.pass=angular.copy(deff_pass);$scope.checkPass=function(pass){$scope.pass.is_valid=!1;if(!pass.password){$scope.pass.mess='';return ''}
if(pass.password.length<6){$scope.pass.mess='Password is too short';return 'error'}
if(!pass.confirmPassword){$scope.pass.mess='Please fill Confirm Password field';return 'error'}
if(pass.password!=pass.confirmPassword){$scope.pass.mess='Passwords do not match';return 'error'}
if(!pass.current_password&&!UserService.user.forgot_password){$scope.pass.mess='Enter current password';return 'error'}
$scope.pass.mess=null;$scope.pass.is_valid=!0;return 'good'}
$scope.passwordChange=function(){$scope.popup=$ionicPopup.show({title:'Change Password',templateUrl:'views/popups/inputs/password.html',scope:$scope,cssClass:'password',buttons:[{text:'Confirm',onTap:function(e){if($scope.pass.is_valid){$scope.account.pass=$scope.pass.password;$scope.account.current_password=$scope.pass.current_password}else{e.preventDefault()}}},{text:'Cancel',onTap:function(e){$scope.pass=angular.copy(deff_pass)}}]})};$scope.openPhotoPopup=function(){userPicture.imgPopup($scope)};$scope.closeImagePopup=function(){userPicture.closeImagePopup($scope)};$scope.saveAccount=function(account,file){if(UserService.user.forgot_password&&$scope.pass.password.length==0){ToastService.showMessage("danger","Please set your password!");return}
$scope.account.forgot_password=0;$ionicLoading.show();saveAccount(account)};function saveAccount(account,file){AccountService.saveAccount(account,file).then(function(data){ToastService.showMessage("success","Profile saved successfully!");if(!angular.isUndefined(file)&&file.fid){account.picture=file.url}
HttpService.clearCache();delete account.forgot_password;delete account.pass_reset_token;delete account.pass;UserService.setUser(account);if(AccountService.account.uid==UserService.user.uid){AccountService.account=account}
StateService.go('account.collections',{"userId":account.uid},'profile:update');$ionicLoading.hide();$scope.pass=angular.copy(deff_pass)},function(reason){$ionicLoading.hide();ToastService.showDrupalFormMessage("danger",reason.data)})}
$scope.openPhotoSourcePopup=function(){userPicture.openPhotoSourcePopup($scope,DeviceAdapterService.is_ready)};$scope.changedFile=function(element){userPicture.changedFile(element,$scope)};$scope.addPhoto=function(type){userPicture.addPhoto(type,$scope,DeviceAdapterService)}});angular.module('bazaarr').controller('UserCtrl',function($scope,$rootScope,$timeout,AccountService,FollowService,ToastService,userPicture,DeviceAdapterService){$scope.account=AccountService.account;$scope.$on('profile:update',function(event){if(AccountService.account.about&&AccountService.account.about.length>150){var obj=new CutString(AccountService.account.about,150);AccountService.account.about_short=obj.cut();if(AccountService.account.about_short.length-AccountService.account.about_short.lastIndexOf('...')==3){AccountService.account.about_short=AccountService.account.about_short.substr(0,AccountService.account.about_short.lastIndexOf('...'))+' <span class="expand">(More...)</span>'}}else{AccountService.account.about_short=AccountService.account.about}
$scope.account=AccountService.account});$scope.followUser=function(is_follow){var type=(1==is_follow)?0:1;FollowService.followUser(AccountService.getAccountId(),type).then(function(data){$scope.account.is_follow=type;FollowService.followElseUserCallback(type);if(data.data.message){ToastService.showMessage("success",data.data.message)}})}
$scope.openPhotoPopup=function(){userPicture.imgPopup($scope)};$scope.openPhotoSourcePopup=function(){userPicture.openPhotoSourcePopup($scope,DeviceAdapterService.is_ready)};$scope.changedFile=function(element){userPicture.changedFile(element,$scope)};$scope.closeImagePopup=function(){userPicture.closeImagePopup($scope)};$scope.addPhoto=function(type){userPicture.addPhoto(type,$scope,DeviceAdapterService)};$scope.toggleUserDesc=function(open){if($scope.account.about.length>150){$scope.isDescOpen=open}}});angular.module('bazaarr').controller('FollowCtrl',function($scope,$rootScope,$state,FollowService,AccountService,CollectionService,HttpService,follows){$scope.follows=follows.data;$scope.followUser=function(uid,type,index){FollowService.followUser(uid,type).then(function(){$scope.follows[index].type=(0===type)?1:0;FollowService.followUserCallback(type)})}
$scope.goFollowing=function(){}
$scope.$parent.doRefresh=function(){var promise={};if($state.includes("account.following-users")){HttpService.addNoCache("following-users");promise=FollowService.loadFollowing()}
else if($state.includes("account.followers")){HttpService.addNoCache("followed-users");promise=FollowService.loadFollowers()}
else{return !1}
AccountService.update();promise.then(function(data){$scope.follows=data.data;$rootScope.$broadcast('scroll.refreshComplete')})}});angular.module('bazaarr').controller('EmailNotificationCtrl',function($scope,$state,$ionicPopup,$timeout,EmailNotificationService,UserService,ToastService){if(!UserService.is_login){UserService.post_login.redirect="email-notification";ToastService.showMessage("danger","Please sign in to continue");$state.go('login');return !1}
$scope.notifications={};$scope.mail_speed_name="Once a day at most";$scope.selectMailSpeed=function(){$scope.mail_speed_popup=$ionicPopup.show({title:"Select server",templateUrl:'views/popups/inputs/select-mail_speed.html',scope:$scope,buttons:[{text:'Cancel'}]})}
$scope.setMailSpeed=function(name,value){$scope.mail_speed_name=name;$scope.notifications.mail_speed=value;$scope.mail_speed_popup.close();this.saveSettings($scope.notifications)}
var tpromise=null;$scope.saveSettings=function(notifs){if(tpromise){$timeout.cancel(tpromise)}
tpromise=$timeout(function(){EmailNotificationService.saveNotifs(notifs,UserService.user.uid).then(function(data){ToastService.showMessage("success","Notification settings successfully saved!")})},1000)}
EmailNotificationService.loadSubscribes(UserService.user.uid).then(function(data){$scope.notifications=data.data;if($scope.notifications.mail_speed=='immediate'){$scope.mail_speed_name='When they happen'}})});angular.module('bazaarr').controller('UserListCtrl',function($scope,users,UserListService){$scope.users=users.data;$scope.title=UserListService.title});angular.module('bazaarr').service('UserListService',function(HttpService){this.getReclips=function(nid){this.title='Reclips';HttpService.view_url="users-recliped-clip";HttpService.params={nid:nid};HttpService.is_auth=!1;return HttpService.get()};this.getLikes=function(nid){this.title='Likes';HttpService.view_url="users-liked-clips";HttpService.params={nid:nid};HttpService.is_auth=!1;return HttpService.get()};this.loadCollectionLikes=function(bid){this.title='People who like collection';HttpService.view_url="collection-likes";HttpService.params={"bid":bid}
HttpService.is_auth=!1;return HttpService.get()};this.loadCollectionReclips=function(bid){this.title='People who reclip collection';HttpService.view_url="collection-reclips";HttpService.params={"bid":bid}
HttpService.is_auth=!1;return HttpService.get()};this.loadCollectionFollows=function(bid){this.title='People who follow collection';HttpService.view_url="collection-followed";HttpService.params={"bid":bid}
HttpService.is_auth=!1;return HttpService.get()}});angular.module('bazaarr').service('EmailNotificationService',function(HttpService){this.saveNotifs=function(notifs,uid){HttpService.view_url="subscribes/"+uid;HttpService.params={data:notifs};return HttpService.put()}
this.loadSubscribes=function(uid){HttpService.view_url="subscribes/"+uid;HttpService.cache=!1;return HttpService.get()}});angular.module('bazaarr').service('StateService',function($state,$rootScope,UserService){this.go=function(state,params,broadcast){$state.go(state,params).then(function(){if(broadcast){$rootScope.$broadcast(broadcast)}})};this.goMyAccount=function(){this.goAccount(UserService.user.uid)};this.goAccount=function(uid){$state.go("account.collections",{userId:uid})};this.goFeed=function(nid,is_ebay){is_ebay=is_ebay||!1;if(is_ebay){$state.go("ebay",{clipId:nid});return !0}
$state.go("feed",{clipId:nid})}});angular.module('bazaarr').service('AboutService',function($state,$rootScope,HttpService){this.loadVar=function(name){HttpService.view_url="system/get_variable";HttpService.params={name:name};return HttpService.post()}});angular.module('bazaarr').service('ToastService',function(ngToast){this.showMessage=function(type,message){if(angular.isUndefined(message)||message.length===0){return !1}
ngToast.create({className:type,content:message})};this.showDrupalFormMessage=function(type,message){var toast_mess="";angular.forEach(message.form_errors,function(value,key){value=value.replace(/href=\"\/user\/password\"/gi,'href="#/forgot-password"');toast_mess+=value+"<br />"});this.showMessage(type,toast_mess)}});angular.module('bazaarr').service('RegistrationService',function($q,HttpService,ToastService){this.add=function(user){if(!this.validate(user)){return $q.reject({"data":""})}
HttpService.view_url="user/register";HttpService.is_auth=!1;HttpService.params=user;return HttpService.post()};this.validate=function(user){if(angular.isUndefined(user.name)){ToastService.showMessage("danger","Please, enter your Username");return !1}
if(user.name.length<3){ToastService.showMessage("danger","Username should be longer than 3 characters");return !1}
var re=/^([A-Za-z0-9]{1}[\w-]*(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(angular.isUndefined(user.mail)||!re.test(user.mail)){ToastService.showMessage("danger","Please, enter correct e-mail");return !1}
if(angular.isUndefined(user.pass)){ToastService.showMessage("danger","Please, enter your Password");return !1}
if(user.pass.length<6){ToastService.showMessage("danger","Password should be longer than 6 characters");return !1}
return !0}});angular.module('bazaarr').service('AccountService',function($rootScope,$state,$timeout,$ionicHistory,HttpService,UserService){this.account={};this.account_id=0;this.is_my_account=!0;this.counts_update=!1;this.fileLoad=function(fid){HttpService.view_url="file/"+fid;return HttpService.get()}
this.contactAccount=function(contact){HttpService.view_url="contact";HttpService.params={"contact":contact};return HttpService.post()}
this.loadAbout=function(){return this.account_id||UserService.user.uid};this.getAccountId=function(){return this.account_id||UserService.user.uid};this.getAccount=function(){return !!this.account.uid?this.account:UserService.user};this.load=function(uid){this.account_id=uid;this.is_my_account=!1;if(UserService.user.uid===uid){this.is_my_account=!0;this.counts_update=!1}
HttpService.view_url="user/"+uid;HttpService.is_auth=!1;var promise=HttpService.get();var that=this;promise.then(function(data){that.account=data.data;$timeout(function(){$rootScope.$broadcast("profile:update")},200)});return promise};this.saveAccount=function(account,file){HttpService.view_url="user/"+account.uid;var params={"data":{"uid":account.uid,"name":account.name,"description":account.about,"website":account.website,"location":account.location}};if(account.current_pass){params.data.current_pass=account.current_pass}
if(UserService.user.mail!=account.mail&&account.current_pass){params.data.mail=account.mail;params.data.current_pass=account.current_pass}
if(account.pass){params.data.pass=account.pass;params.data.current_pass=account.current_password}
if(file){params.data.picture=file.fid}
HttpService.params=params;if(UserService.user.forgot_password){HttpService._params={'pass-reset-token':UserService.user.pass_reset_token}}
return HttpService.put()}
this.addFile=function(file,account){if(typeof file.fid=='undefined'){return !1}
file.filename="device.jpg";file.filepath="public://pictures/"+file.filename;HttpService.view_url="file";HttpService.params=file;return HttpService.post()}
this.updateCounts=function(){this.counts_update=!0};this.updateCounters=function(counter_name,type,not_my_account){not_my_account=not_my_account||!1;HttpService.addNoCache("user/"+UserService.user.uid);if(this.account_id==UserService.user.uid||not_my_account){var counter=parseInt(this.account[counter_name]);this.account[counter_name]=type?counter+1:counter-1;$rootScope.$broadcast("profile:update")}};this.update=function(){var that=this;$ionicHistory.clearCache();HttpService.addNoCache("user/"+this.getAccountId());this.load($state.params.userId).then(function(data){that.account=data.data;$rootScope.$broadcast("profile:update")})}});angular.module('bazaarr').service('FollowService',function($rootScope,$ionicHistory,HttpService,AccountService,CollectionService,MetaService){this.params={};this.type=0;this.colls={};this.loadFollowing=function(){this.type=0;HttpService.view_url="following-users";HttpService.params={"uid":AccountService.getAccountId()};HttpService.is_auth=!1;var promise=HttpService.get();return this.preRender(promise,"following")};this.loadCollections=function(){HttpService.view_url="collections-followed";HttpService.params={"uid":AccountService.getAccountId()};HttpService.is_auth=!1;return HttpService.get()};this.loadFollowers=function(){this.type=1;HttpService.view_url="followed-users";HttpService.params={"uid":AccountService.getAccountId()};HttpService.is_auth=!1;var promise=HttpService.get();return this.preRender(promise,"followers")};this.followUser=function(uid,type){HttpService.addNoCache("user/"+uid);HttpService.view_url="follow/"+uid;HttpService.params={"type":"user","action":type};return HttpService.put()};this.followCollection=function(bid,type){HttpService.view_url="follow/"+bid;HttpService.params={"type":"collection","action":type};var promise=HttpService.put();promise.then(function(){CollectionService.updateCollectionField(bid,"followed",type,"update")});return promise};this.followUserCallback=function(type){this.clearCache();AccountService.updateCounters('following_count',type)};this.followElseUserCallback=function(type){this.followUserCallback();AccountService.updateCounters('followers_count',type,!0);$rootScope.$broadcast("collections:follow",{type:type})};this.clearCache=function(){HttpService.addNoCache("following-users");HttpService.addNoCache("followed-users");HttpService.addNoCache("following");HttpService.addNoCache("collections-followed");HttpService.addNoCache("get_user_collections/"+AccountService.getAccountId());HttpService.addNoCache("user/"+AccountService.getAccountId())}
this.preRender=function(promise,page){var type=this.type;promise.then(function(data){var account=AccountService.getAccount();MetaService.set(page,"",{"name":account.name,"about":account.about});data.data=data.data.map(function(d){d.type=1;if(0===type||angular.isDefined(d.is_folowed)){d.type=0}
return d})});return promise};this.followCollectionCallback=function(user_follow){this.clearCache();if(user_follow===!1){HttpService.addNoCache("following-users");HttpService.addNoCache("followed-users");AccountService.updateCounters('following_count',0)}}});angular.module('bazaarr').service('HttpService',function($q,$http,$state,$cacheFactory,$rootScope,$ionicLoading,$ionicHistory,$cordovaNetwork,ConfigService,UserService,DeviceAdapterService,ToastService){this.view_url="";this.params={};this._params={};this.page=0;this.method="get";this.is_auth=!0;this.cache=!0;this.no_cache={};this.show_cnt=0;this.online=!0;this.show_loading=!0;this.setDefault=function(){this.view_url="";this.params={};this.page=0;this.method="get";this.is_auth=!0;this.cache=!0};this.get=function(){this.method="get";return this.load()};this.post=function(){this.method="post";return this.load()};this.put=function(){this.method="put";return this.load()};this.dell=function(){this.method="delete";return this.load()};this.delete=function(){return this.dell()};this.load=function(){var config={};var api_url="api/v1";if(this.is_auth){config=UserService.getConfig();if(!config){return !1}}
var url=ConfigService.server_url()+"/"+api_url+"/"+this.view_url+"/"+"?prot="+window.location.protocol+"&dom="+ConfigService.connect_url()+(this.page?"&page="+this.page:"")+(("get"===this.method&&Object.keys(this.params).length)?this.objToGet(this.params):"")+((Object.keys(this._params).length)?this.objToGet(this._params):"");url=url.replace("#","%23");if(this.no_cache[this.view_url]){var $httpDefaultCache=$cacheFactory.get('$http');$httpDefaultCache.remove(url);delete this.no_cache[this.view_url]}
if(this.cache){config.cache=!0}
var dfd=$q.defer();this.online=!0;if(DeviceAdapterService.is_ready&&$cordovaNetwork.isOffline()){this.online=!1;ToastService.showMessage("danger","No Internet Connection")}
if(!this.online&&this.page){return $q.reject({"data":"No Internet Connection"})}
switch(this.method){case "get":dfd.resolve($http.get(url,config));break;case "post":dfd.resolve($http.post(url,this.params,config));break;case "put":dfd.resolve($http.put(url,this.params,config));break;case "delete":dfd.resolve($http.delete(url,config));break}
var promise=dfd.promise;if("get"==this.method&&!this.page&&this.online&&this.show_loading){$ionicLoading.show();this.show_cnt++;var that=this;promise.then(function(){if(that.show_cnt===1){$ionicLoading.hide()}
that.show_cnt--},function(reason){$ionicLoading.hide();if(503===reason.status){$state.go("maintenance")}})}
this.setDefault();return promise};this.objToGet=function(obj){var str='';for(var p in obj){if(obj.hasOwnProperty(p)){str+='&'+p+'='+obj[p]}}
return str};this.addNoCache=function(view_url){this.no_cache[view_url]=!0};this.clearCache=function(){$ionicHistory.clearCache();var $httpDefaultCache=$cacheFactory.get('$http');$httpDefaultCache.removeAll();$rootScope.clearClipPager()}});angular.module('bazaarr').service('UserService',function($q,$http,$rootScope,$cookies,$cookieStore,$state,$timeout,localStorageService,ConfigService,ToastService){this.is_login=!1;this.token="";this.user={};this.session_name="";this.post_login={};this.getToken=function(){var dfd=$q.defer();dfd.resolve($http.post(ConfigService.server_url()+'/services/session/token'+'?prot='+window.location.protocol+'&dom='+ConfigService.connect_url(),{"uid":this.user.uid}));var promise=dfd.promise;promise.then(function(){},function(reason){});return promise},this.setUser=function(user){this.user=user;var session=localStorageService.get("session");session.user=user;localStorageService.set("session",session)};this.store=function(user){$cookies[user.session_name]=user.sessid;localStorageService.set("session",user);this.token=user.token;this.is_login=!0;this.user=user.user;this.session_name=user.session_name;$rootScope.user=this.user};this.loginCallback=function(data){this.store(data);if(Object.keys(this.post_login).length){$state.go(this.post_login.redirect,this.post_login.params);if(angular.isDefined(this.post_login.broadcast)&&this.post_login.broadcast.length){var broadcast=this.post_login.broadcast;$timeout(function(){$rootScope.$broadcast(broadcast)},500)}
this.post_login={}}
else{$state.go('account.collections',{"userId":data.user.uid})}};this.isConnect=function(){var config=this.getConfig();var dfd=$q.defer();dfd.resolve($http.post(ConfigService.server_url()+'/api/v1/system/connect'+'?prot='+window.location.protocol+'&dom='+ConfigService.connect_url(),{},config));return dfd.promise}
this.signIn=function(user,type){if(!this.signInValidate(user,type)){return $q.reject({"data":""})}
type=type||"user/login";var config=this.getConfig();var dfd=$q.defer();dfd.resolve($http.post(ConfigService.server_url()+'/api/v1/'+type+'/'+'?prot='+window.location.protocol+'&dom='+ConfigService.connect_url(),user));return dfd.promise},this.signInValidate=function(user,type){if((angular.isUndefined(user.username)||angular.isUndefined(user.password))&&type!='social'){ToastService.showMessage("danger","Please make sure that you've entered your username and password correctly");return !1}
return !0};this.logout=function(){var config=this.getConfig();if(!config){return !1}
var dfd=$q.defer();dfd.resolve($http.post(ConfigService.server_url()+'/api/v1/user/logout/'+'?prot='+window.location.protocol+'&dom='+ConfigService.connect_url(),{},config));return dfd.promise},this.getConfig=function(){if(!this.is_login||!this.token){return !1}
var config={"headers":{'Content-Type':'application/json','X-CSRF-Token':this.token},'withCredentials':!0,'crossDomain':!0}
return config},this.clearCookies=function(){angular.forEach($cookies,function(v,k){$cookieStore.remove(k)})},this.clearUser=function(){this.token="";this.is_login=!1;this.user={};$rootScope.user={};this.clearCookies();this.session_name="";localStorageService.remove("session")}
this.updateCounts=function(name,value){return !0;if(typeof this.user[name]!='undefined'){var val=parseInt(value),old_val=parseInt(this.user[name]);this.user[name]=val?old_val+val:old_val-1;this.setUser(this.user);return this.user[name]}}});angular.module('bazaarr').service('DeviceAdapterService',function($cordovaDevice,$cordovaCamera,$compile){this.is_ready=!1,this.getUUID=function(){return this.is_ready?$cordovaDevice.getUUID():""},this.getCameraPhoto=function(){},this.getCameraOptions=function(source_type_id,camera_direction){camera_direction=camera_direction||0;return{quality:85,destinationType:Camera.DestinationType.DATA_URL,sourceType:source_type_id,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,cameraDirection:camera_direction,correctOrientation:!0}},this.getAndroidPushConfig=function(){return{"senderID":"708812439397"}};this.getInAppBrowserConfig=function(){if(ionic.Platform.isAndroid()){return{location:'yes',clearcache:'no',toolbar:'no',clearsessioncache:'no'}}
if(ionic.Platform.isIOS()){return{location:'yes',clearcache:'no',clearsessioncache:'no'}}}});angular.module('bazaarr').service('userPicture',function($ionicLoading,$ionicPopup,$cordovaCamera,UserService,DeviceAdapterService,AccountService,ToastService,HttpService){this.popup=null;this.imgPopup=function(scope){if(AccountService.account.uid!=UserService.user.uid){return !1}
scope.image_src=UserService.user.big_picture;this.popup=$ionicPopup.show({title:'Change your picture',templateUrl:'views/popups/inputs/profile-photo.html',scope:scope,cssClass:'profile-photo',buttons:[{text:'Cancel'}]})};this.closePopup=function(){if(this.popup){this.popup.close()}}
this.uploadImage=function(scope){$ionicLoading.show();AccountService.addFile(scope.file,scope.account).then(function(data){var file=data.data;scope.account.fid=file.fid;AccountService.saveAccount(scope.account,file).then(function(data){if(!angular.isUndefined(file)&&file.fid){scope.account.fid=file.fid;scope.account.picture=data.data.img;scope.account.big_picture=data.data.img;HttpService.clearCache()}
if(AccountService.account.uid==UserService.user.uid){AccountService.account=scope.account}
UserService.setUser(scope.account);$ionicLoading.hide();ToastService.showMessage("success","You changed your picture!")})},function(reason){ToastService.showMessage("danger",reason.data);$ionicLoading.hide()})}
this.openPhotoSourcePopup=function(scope,is_ready){this.closePopup();var opts={title:'Select source',templateUrl:'views/popups/photo_source.html',scope:scope},self=this;if(!is_ready){opts.title='Select Picture';opts.templateUrl='views/popups/web_photo_source.html';opts.buttons=[{text:'Select',onTap:function(){if(angular.isUndefined(scope.file)){p('error');return !1}
scope.image_src=scope.file.file;scope.file.fid=null;self.uploadImage(scope)}},{text:'Cancel'}]}
this.photo_source_popup=$ionicPopup.show(opts)};this.closeImagePopup=function(scope){this.photo_source_popup.close()}
this.setCanvasImage=function(element,_url,scope){if(angular.isUndefined(scope.file)){scope.file={file:null}}
var canvas=document.getElementById('canvas'),MAX_WIDTH=document.getElementById('canvas_wrapp').clientWidth,img=new Image();var f=element.files[0],url=window.URL||window.webkitURL,src=url.createObjectURL(f);var FR=new FileReader();FR.onload=function(e){scope.file.file=e.target.result;img.src=src};FR.readAsDataURL(f);img.onload=function(){if(img.width>MAX_WIDTH){img.height*=MAX_WIDTH/img.width;img.width=MAX_WIDTH}
var ctx=canvas.getContext('2d');ctx.clearRect(0,0,canvas.width,canvas.height);canvas.style.display='block';canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0,img.width,img.height);url.revokeObjectURL(src)}}
this.changedFile=function(element,scope){var p=this;scope.$apply(function(scope){p.setCanvasImage(element,null,scope)})};this.addPhoto=function(source_type_id,scope,Device){this.closeImagePopup(scope);if(!Device.is_ready){return !1}
var p=this;$cordovaCamera.getPicture(Device.getCameraOptions(source_type_id,1)).then(function(imageData){if(angular.isUndefined(scope.file)){scope.file={}}
scope.file.file=imageData;scope.file.fid=null;scope.image_src="data:image/jpeg;base64,"+imageData;p.uploadImage(scope)},function(err){ToastService.showMessage("danger",err)})}});angular.module('bazaarr').service('ClaimService',function($rootScope,$state,$timeout,HttpService){this.claim=function(params){HttpService.view_url="claim-account/create";HttpService.is_auth=!1;HttpService.params={'data':params};return HttpService.post()}
this.load_users=function(search){HttpService.view_url="claim-account";HttpService.is_auth=!1;HttpService.params={'name':search};return HttpService.get()}});'use strict';angular.module('bazaarr').controller('AddClipCtrl',function($scope,$state,$q,$timeout,$window,$interval,$cordovaCamera,$cordovaInAppBrowser,$ionicPopup,$rootScope,$ionicLoading,$ionicScrollDelegate,UserService,AddClipService,DeviceAdapterService,CollectionService,ClipService,AccountService,ClipsService,ToastService,HttpService,ImageService,ValidateService){if(!UserService.is_login){if($state.includes('reclip')){UserService.post_login.redirect="reclip";UserService.post_login.params={clipId:$state.params.clipId};ToastService.showMessage("danger","Please sign in to make reclips")}
$state.go('login');return !1}
var defaultClip={category:{tid:'_none',name:'None'},node:{currency:'USD'}};$scope.is_ready=DeviceAdapterService.is_ready;$scope.allCurrency=currency;$scope.categories=[];$scope.old_bid=0;$scope.clip=angular.copy(defaultClip);CollectionService.load(UserService.user.uid).then(function(data){$scope.collections=data.data;var default_collection=Object.keys(CollectionService.add_clip_collection).length?CollectionService.add_clip_collection:data.data[0];CollectionService.add_clip_collection={};if(angular.isUndefined($scope.clip.node.ph_bid)||$scope.clip.node.ph_bid===''){$scope.setCollection(default_collection.bid,default_collection.name)}
$ionicScrollDelegate.resize()});CollectionService.getCategories(2).then(function(data){$scope.categories=data.data});$scope.deleteClip=function(nid){var confirmPopup=$ionicPopup.confirm({title:'Delete clip',template:'Are you sure you want to delete this clip?',cssClass:'confirm'});confirmPopup.then(function(res){if(res){AddClipService.deleteClip(nid).then(function(data){ToastService.showMessage("success","Clip successfully deleted!");$scope.image_src=null;HttpService.clearCache();CollectionService.clear($scope.clip.node.collection_id);if(angular.isDefined($rootScope.backState[$rootScope.backState.length-1])&&$rootScope.backState[$rootScope.backState.length-1].state==="clip"){$rootScope.backState.pop()}
$rootScope.back();AddClipService.postProcessClipDelete($scope.clip.node.ph_bid)},function(reason){$scope.err_mess=reason.data})}else{}})}
$scope.setCollection=function(bid,name){if(!bid){$scope.data={};$scope.clip.node.ph_bid='';$scope.clip.node.ph_bid_search='';var setCollectionPopup=$ionicPopup.show({title:'Enter new collection',template:'<input type="text" ng-model="data.new_col">',scope:$scope,buttons:[{text:'Cancel',onTap:function(e){$scope.data={}}},{text:'Save',type:'button-positive',onTap:function(e){if(!$scope.data.new_col){e.preventDefault()}else{return $scope.data.new_col}}}]});setCollectionPopup.then(function(res){if(angular.isDefined(res)){var new_col={name:res};CollectionService.add(new_col).then(function(data){$scope.collections.push(data.data);$scope.clip.node.ph_bid=data.data.bid;$scope.clip.node.ph_bid_search=data.data.name},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})}});return}
$scope.clip.node.ph_bid=bid;$scope.clip.node.ph_bid_search=name}
$scope.addClip=function(clip,file){$ionicLoading.show();if(clip.node.nid){var node={node:{nid:clip.node.nid,uid:clip.node.uid,type:'clip',ph_bid:clip.node.ph_bid,body_value:clip.node.body_value,title:clip.node.title,reclip:clip.node.reclip=="1"?1:null,currency:clip.node.currency,price_value:clip.node.price_value,ph_bid_title:clip.node.ph_bid_search,is_cover:parseInt(clip.node.is_cover),send_to_facebook:parseInt(clip.node.send_to_facebook)}}
if(angular.isDefined(clip.category.tid)&&clip.category.tid){node.node.field_category={};node.node.field_category.und={}
node.node.field_category.und.values=clip.category.tid}
AddClipService.saveClip(node).then(function(data){ToastService.showMessage("success","Clip successfully saved");$scope.image_src=null;ClipService.load_from_server=!0;HttpService.clearCache();AddClipService.postProcessClipUpdate(clip.node.ph_bid,$scope.old_bid);if(clip.node.ph_bid!==$scope.old_bid){CollectionService.updateCollectionField($scope.old_bid,"clips_count",-1,"increment");CollectionService.updateCollectionField(clip.node.ph_bid,"clips_count",1,"increment")}
if(parseInt(clip.node.is_cover)){CollectionService.updateCollectionField(clip.node.ph_bid,"cover_img",clip.node.img_large,"update")}
$rootScope.back();$ionicLoading.hide()},function(reason){$ionicLoading.hide();ToastService.showDrupalFormMessage("danger",reason.data)});return}
AddClipService.addFile(file).then(function(data){clip.node.type="clip";clip.node.field_clip_image={"und":[{"fid":data.data.fid}]};clip.node.img_large=data.data.url;if(clip.category){clip.node.field_category={"und":{"values":clip.category.tid}}}
delete clip.category;delete clip.currency;AddClipService.saveClip(clip).then(function(data){$scope.image_src=null;if(!DeviceAdapterService.is_ready){var canvas=document.getElementById('canvas');if(angular.isDefined(canvas)){canvas.style.display='none'}}
AccountService.updateCounts();HttpService.clearCache();$ionicLoading.hide();ToastService.showMessage("success","Clip successfully added!");$rootScope.backEvent=!0;$rootScope.backState.push({'state':'recent'});$state.go('clip',{clipId:data.data.nid});AddClipService.postProcessClipInsert(clip.node.ph_bid,data.data.nid);if(parseInt(clip.node.is_cover)){CollectionService.updateCollectionField(clip.node.ph_bid,"cover_img",clip.node.img_large,"update")}},function(reason){$ionicLoading.hide();ToastService.showDrupalFormMessage("danger",reason.data)})},function(reason){$ionicLoading.hide();if(angular.isDefined(reason.data)){ToastService.showMessage("danger",reason.data)}
else{ToastService.showDrupalFormMessage("danger",reason.data)}})}
$scope.files=[]
$scope.changedFile=function(element){$scope.$apply(function($scope){setCanvasImage(element)})};$scope.openPhotoSourcePopup=function(){$scope.photo_source_popup=$ionicPopup.show({title:'Select source',templateUrl:'views/popups/photo_source.html',scope:$scope})};$scope.closeImagePopup=function(){$scope.photo_source_popup.close()}
$scope.addPhoto=function(source_type_id){$scope.photo_source_popup.close();if(!DeviceAdapterService.is_ready){return !1}
$cordovaCamera.getPicture(DeviceAdapterService.getCameraOptions(source_type_id)).then(function(imageData){$scope.file.file=imageData;$scope.image_src="data:image/jpeg;base64,"+imageData},function(err){ToastService.showMessage("danger",err)})}
$scope.reclipClip=function(clip,bid,cacheClean){if(!clip){$state.go('add-collection',{action:'reclip',clipId:$state.params.clipId});return !1}
$ionicLoading.show();var reclip=ClipService.formatReclip(clip,bid);AddClipService.addReclip(reclip).then(function(data){ToastService.showMessage("success","Reclip succesfully added");$scope.reclip={};HttpService.clearCache();$ionicLoading.hide();$rootScope.back();AddClipService.postProcessClipInsert(bid)},function(reason){ToastService.showMessage("danger",reason.data)})};$scope.scrollToAdvance=function(){$ionicScrollDelegate.scrollBottom()};var clipit_loop=0;var button_added=!1;var ref={};$scope.openUrlPopup=function(){$scope.photo_source_popup.close();ref=$window.open('https://google.com','_blank','location=yes,clearcache=no,clearsessioncache=no');ref.addEventListener('loadstart',function(){button_added=!1;clearInterval(clipit_loop)});ref.addEventListener('loadstop',addClipItBtn);ref.addEventListener('loaderror',addClipItBtn);ref.addEventListener('exit',function(){button_added=!1;clearInterval(clipit_loop);ref.removeEventListener('loadstart');ref.removeEventListener('loadstop');ref.removeEventListener('loaderror');ref.removeEventListener('exit')})};function addClipItBtn(){button_added=!1;clearInterval(clipit_loop);$timeout(function(){ref.insertCSS({code:'.bazaarr-clip-it{width:100%;top:100%;position:fixed;bottom:0;padding:0;box-sizing:border-box;z-index:99999;background:#fff;}.bazaarr-clip-it.expanded{top:0; overflow-y: scroll;} .bazaarr-clip-it.expanded > span {display: none;} .images-list {text-align: center; padding-top: 46px;}.bazaarr-clip-it .cancel-btn{display:none}.bazaarr-clip-it.expanded .cancel-btn{display:block;position:absolute;top:0;right:0;font-size:20px;padding:10px;color:#43a5a6;text-decoration:none}.bazaarr-clip-it span{display:block;position:fixed;bottom:0;left:0;font-size:22px;background:#43a5a6;color:#FFF;text-align:center;text-decoration:none;width:100px;padding:10px;margin:20px;box-sizing:border-box}.bazaarr-clip-it img{  margin: 0 1%; max-width: 48%; margin-top: 20px;} .bazaarr-clip-it.expanded .error-message {font-size: 16px; max-width: 80%; margin: 0 auto;}'},function(){$timeout(function(){ref.executeScript({code:'localStorage.setItem("clip",{});var bazaarrClipItShow=function(){var a=document.getElementsByClassName("bazaarr-clip-it")[0];if(!a.classList.contains("expanded")){a.classList.add("expanded");for(var e=document.querySelectorAll("img"),t=!1,r=0;r<e.length;r++){var i=e[r].parentNode.getAttribute("href"),n="";null!==i&&(n=bazaarrGetQueryVariable(i,"imgurl"));var l=n||e[r].src,t=r===e.length-1?!0:!1;bazaarrLoadImage(l,t)}}},bazaarrClipImage=function(a){var e={};e.img=a.src,e.url=window.location.href,localStorage.setItem("clip",JSON.stringify(e))},bazaarrClipItHide=function(a){var e=document.getElementsByClassName("bazaarr-clip-it")[0];e.classList.remove("expanded");var t=e.getElementsByClassName("images-list")[0];t.innerHTML="",a.preventDefault()},bazaarrClipItInsert=function(){if(!document.getElementsByClassName("bazaarr-clip-it").length>0){var a=document.createElement("div");a.className="bazaarr-clip-it",a.innerHTML=\'<span onclick="bazaarrClipItShow()">Clip It!</span><a href="#" class="cancel-btn" onclick="bazaarrClipItHide(event)">Cancel</a><div class="images-list"></div>\',document.body.insertBefore(a,document.body.firstChild)}},bazaarrGetQueryVariable=function(a,e){for(var t=a.substring(a.indexOf("?")+1).split("&"),r=0;r<t.length;r++){var i=t[r].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}},bazaarrLoadImage=function(a,e){var t=document.getElementsByClassName("bazaarr-clip-it")[0],r=t.getElementsByClassName("images-list")[0],i=new Image;i.onload=function(){i.width>320&&i.height>320&&(r.appendChild(i),i.addEventListener("click",function(){bazaarrClipImage(this)})),e&&!r.querySelectorAll("img").length&&(r.innerHTML=\'<div class="error-message">Image not found or is too small to add - it should be more then 320*320</div>\')},i.src=a};bazaarrClipItInsert();'},function(){button_added=!0})},500)})},1500);clipit_loop=setInterval(function(){if(button_added){ref.executeScript({code:'localStorage.getItem("clip")'},function(values){var clip=JSON.parse(values[0]);if(Object.keys(clip).length){ref.close();setClipFromWeb(clip)}})}},500)}
function setClipFromWeb(clip){$scope.selectWebImage(clip.img);$scope.clip.node.source_url=clip.url.substring(0,255)}
$scope.selectWebImage=function(url){$ionicLoading.show();$timeout(function(){ImageService.convertImgToBase64URL(url).then(function(data){$scope.file.file=data;$scope.image_src=data;$ionicLoading.hide()},function(){$ionicLoading.hide()})},1000)};$scope.file={};if($state.includes('reclip')){ClipService.nodeLoad($state.params.clipId).then(function(data){$scope.reclip=angular.copy(data.data[0]);$scope.image_src=$scope.reclip.img;if(CollectionService.collectionId){$scope.reclipClip($scope.reclip,CollectionService.collectionId,1);CollectionService.collectionId=0}})}
if($state.includes('edit-clip')){$scope.clip.node={};$scope.clip.node.nid=$state.params.clipId
ClipService.nodeLoad($state.params.clipId).then(function(data){if(!data.data[0]){ToastService.showMessage("danger","No such clip");$rootScope.back();return !1}
$scope.old_bid=parseInt(data.data[0].collection_id);$scope.clip.node=data.data[0];if($scope.clip.node.uid!=UserService.user.uid){$state.go('recent')}
$scope.clip.node.ph_bid=$scope.clip.node.collection_id;$scope.clip.node.ph_bid_title=$scope.clip.node.collection_name;$scope.clip.node.body_value=$scope.clip.node.desc;$scope.clip.category.tid=$scope.clip.node.category.tid||null;if($scope.clip.category.tid!==null&&$scope.clip.category.tid){$timeout(function(){angular.forEach($scope.categories,function(value,key){if(value.tid===$scope.clip.category.tid){$scope.clip.category.name=value.name}})},1000)}
$scope.clip.node.currency=$scope.clip.node.currency.code;$scope.clip.node.price_value=parseFloat($scope.clip.node.price)||""})}
function setCanvasImage(element,_url){var canvas=document.getElementById('canvas'),MAX_WIDTH=document.getElementById('canvas_wrapp').clientWidth,img=new Image();var f=element.files[0],url=window.URL||window.webkitURL,src=url.createObjectURL(f);var FR=new FileReader();FR.onload=function(e){$scope.file.file=e.target.result;img.src=src};FR.readAsDataURL(f);img.onload=function(){if(img.width>MAX_WIDTH){img.height*=MAX_WIDTH/img.width;img.width=MAX_WIDTH}
var ctx=canvas.getContext('2d');ctx.clearRect(0,0,canvas.width,canvas.height);canvas.style.display='block';canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0,img.width,img.height);url.revokeObjectURL(src)}}
function searchImages(url){AddClipService.searchImages(url).then(function(data){checkImages(data.data.imgs)},function(reason){ToastService.showMessage("danger",reason.data)})};function checkImages(imgs){$ionicLoading.show({duration:0});var prom=[]
angular.forEach(imgs,function(value,key){prom.push(ImageService.checkSizeFromUrl(value))});$q.all(prom).then(function(data){$scope.imgs=[];angular.forEach(data,function(value,key){if(value.status===1){$scope.imgs.push(value.url)}});if($scope.imgs.length===0){ToastService.showMessage("danger","Image not found or is too small to add - it should be more then 320*320")}
else{openImagesPopup()}
$ionicLoading.hide()})};function openImagesPopup(){$scope.images_popup=$ionicPopup.show({title:'Select Image',templateUrl:'views/popups/images.html',scope:$scope,buttons:[{text:'Cancel'}]})}});angular.module('bazaarr').service('AddClipService',function($q,$ionicLoading,HttpService,ImageService){this.deleteClip=function(nid){HttpService.view_url="node/"+nid;return HttpService.dell()}
this.addReclip=function(params){HttpService.view_url="reclip";HttpService.params=params;return HttpService.post()};this.saveClip=function(clip){HttpService.view_url="node";HttpService.params=clip;if(clip.node.nid){HttpService.view_url+='/'+clip.node.nid;return HttpService.put()}
return HttpService.post()};this.addFile=function(file){if(angular.isUndefined(file.file)){return $q.reject({'data':'Image field is required'})}
var that=this;return ImageService.checkSize(file.file).then(function(){return that.sendFile(file)},function(reason){return $q.reject({'data':reason.data})})};this.sendFile=function(file){file.filename="device.jpg";file.filepath="public://clip_images/"+file.filename;HttpService.view_url="file";HttpService.params=file;return HttpService.post()};this.searchImages=function(url){$ionicLoading.show();HttpService.view_url="search-web-images";HttpService.params={"url":url};var promise=HttpService.post();promise.then(function(){$ionicLoading.hide()},function(){$ionicLoading.hide()});return promise};this.postProcessClipInsert=function(bid,nid){var data={"action":"insert","nid":nid};this.postProcessClip(bid,data)};this.postProcessClipUpdate=function(bid,old_bid){if(bid===old_bid){return !1}
var data={"action":"update","old_bid":old_bid};this.postProcessClip(bid,data)};this.postProcessClipDelete=function(bid){var data={"action":"delete"};this.postProcessClip(bid,data)};this.postProcessClip=function(bid,data){HttpService.view_url="collection/collection_image/"+bid;HttpService.params={"data":data};HttpService.post()}});angular.module('bazaarr').service('ImageService',function($q,$ionicLoading,DeviceAdapterService){this.checkSize=function(file_base64){var def=$q.defer();if(file_base64.length>10000000){def.reject({'data':'Image size must be less than 10 MB'})}
var i=new Image();i.onload=function(){if(i.width<320||i.height<320){def.reject({'data':'Size of image is '+i.width+" x "+i.height+'. Your image must be more than 320 x 320'})}
def.resolve()};i.onerror=function(){def.reject({'data':'Error uploading photo'})};i.src=file_base64.indexOf("base64")===-1?"data:image/png;base64,"+file_base64:file_base64;return def.promise};this.checkSizeFromUrl=function(url){var def=$q.defer();var i=new Image();i.onload=function(){if(i.width<320||i.height<320){def.resolve({'status':0})}
else{def.resolve({'status':1,'url':url})}};i.onerror=function(){def.resolve({'status':0})};i.src=url;return def.promise};this.convertImgToBase64URL=function(url,outputFormat){var def=$q.defer();var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){var canvas=document.createElement('CANVAS'),ctx=canvas.getContext('2d'),dataURL;canvas.height=img.height;canvas.width=img.width;ctx.drawImage(img,0,0);var toDataURLFailed=!1;try{dataURL=canvas.toDataURL("image/jpeg",1)}
catch(e){toDataURLFailed=!0}
if((toDataURLFailed||dataURL.slice(0,"data:image/jpeg".length)!=="data:image/jpeg")){try{var encoder=new JPEGEncoder();dataURL=encoder.encode(ctx.getImageData(0,0,img.width,img.height),100)}
catch(e){def.reject({'data':'Error uploading image'})}}
def.resolve(dataURL);canvas=null};img.onerror=function(){def.reject({'data':'Error uploading image'})};img.src=url;return def.promise}});'use strict';angular.module('bazaarr').controller('ClipCtrl',function($scope,$state,$timeout,$rootScope,$ionicViewSwitcher,$ionicPopover,$ionicPopup,$cordovaSocialSharing,ClipsService,ClipService,UserService,FollowService,AccountService,ToastService,StateService,ConfigService,MetaService,clip){if(angular.isDefined(clip.data)&&clip.data[0]){$scope.clip=clip.data[0];$scope.action=!1;MetaService.set("clip","",{"description":$scope.clip.desc_text,"nid":$scope.clip.nid})}
$scope.orientation_changed=!1;$scope.$on('clip:like',function(event){$scope.clipActionLike()});$scope.$on('clip:block',function(event){$scope.clipActionBlock()});$scope.$on('clip:reclip',function(event){$scope.clipActionReclip(ClipService.clip.nid)});$scope.nextSlide=function(){if(!$scope.action){$timeout(function(){var prev_clip_nid=ClipService.clip.nid;var clip=ClipService.getClip(1);$ionicViewSwitcher.nextDirection('up');if(Object.keys(clip).length){goToClip(clip)}
else{ToastService.showMessage("danger","No more clips in collection")}
$scope.action=!1},200)}
$scope.action=!0};$scope.prevSlide=function(){if(!$scope.action){$timeout(function(){var clip=ClipService.getClip(-1);$ionicViewSwitcher.nextDirection('down');goToClip(clip);$scope.action=!1},200)}
$scope.action=!0};function goToClip(clip){if(clip.nid){$state.go("clip",{"clipId":clip.nid})}}
$scope.checkSlide=function(index){var page_list=this.page_list||ClipsService.page_api_url;var clips=ClipsService.clips[page_list];var clip={};angular.forEach(clips,function(value,key){if(value.nid===$state.params.clipId&&angular.isDefined(clips[key+index])){clip=clips[key+index]}});if(Object.keys(clip).length){return !0}else{return !1}};$scope.isList=function(){if(ClipService.page_list){return !0}};$scope.clipActionReclip=function(nid){if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
if(!UserService.is_login){UserService.post_login.redirect="clip";UserService.post_login.params={clipId:ClipService.clip.nid};UserService.post_login.broadcast="clip:reclip";ToastService.showMessage("danger","Please sign in to make reclips");$state.go('login');return !1}
if(!nid){nid=$state.params.clipId}
if(parseInt(ClipService.clip.uid)===parseInt(UserService.user.uid)){ToastService.showMessage("danger","You cannot reclip your clip");return !1}
$state.go('reclip',{clipId:nid})};$scope.clipActionEdit=function(nid){if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
$scope.clipPopover.hide();if(!nid){nid=$state.params.clipId}
$state.go('edit-clip',{clipId:nid})};$scope.clipActionComments=function(nid){if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
if(!nid){nid=$state.params.clipId}
$state.go('comments',{clipId:nid})};$scope.clipActionLike=function(){if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
if(!UserService.is_login){UserService.post_login.redirect="clip";UserService.post_login.params={clipId:ClipService.clip.nid};UserService.post_login.broadcast="clip:like";ToastService.showMessage("danger","Please sign in to like Clips");$state.go('login');return !1}
if(ClipService.clip.voted){ClipService.clip.voted=0}else{ClipService.clip.voted=1}
if(ClipService.clip.voted){ClipService.clip.like_count=(parseInt(ClipService.clip.like_count)||0)+1}else{ClipService.clip.like_count=(parseInt(ClipService.clip.like_count)-1||0)}
AccountService.updateCounters('liked_count',ClipService.clip.voted);ClipService.likeClip(ClipService.clip)};$scope.clipActionBlock=function(){if(!UserService.is_login){UserService.post_login.redirect="clip";UserService.post_login.params={clipId:ClipService.clip.nid};UserService.post_login.broadcast="clip:block";ToastService.showMessage("danger","Please sign in to make reports on Clip");if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
if($scope.clipPopover){$scope.clipPopover.hide()}
$state.go('login');return !1}
ClipService.blockClip().then(function(data){ClipService.clip.bloked=data.data.block||0;ClipsService.updateClipInList(ClipService.clip);if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
$scope.clipPopover.hide()})};$scope.clipFollowUser=function(){if(!UserService.is_login){ToastService.showMessage("danger","Please sign in to follow User");$state.go('login');if($scope.clipPopover){$scope.clipPopover.hide()}
return !1}
var type=ClipService.clip.is_follow_user?0:1;FollowService.followUser(ClipService.clip.uid,type).then(function(data){ClipService.clip.is_follow_user=type;FollowService.followUserCallback(type);if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
$scope.clipPopover.hide();ToastService.showMessage("success",data.data.message)})};$scope.clipFollowCollection=function(){if(!UserService.is_login){ToastService.showMessage("danger","Please sign in to follow Collection");$state.go('login');if($scope.clipPopover){$scope.clipPopover.hide()}
return !1}
var type=ClipService.clip.is_follow_collection?0:1;FollowService.followCollection(ClipService.clip.collection_id,type).then(function(data){ClipService.clip.is_follow_collection=type;if($scope.clip_actions_popup){$scope.clip_actions_popup.close()}
$scope.clipPopover.hide();ToastService.showMessage("success",data.data.message);FollowService.followUserCallback(type)})};$scope.checkBlocked=function(bloked){return bloked===0?!1:!0};$scope.isOwner=function(){if(!ClipService.clip){return !1}
return ClipService.clip.owner.id===UserService.user.uid};$scope.isLiked=function(){if(!ClipService.clip||angular.isUndefined(ClipService.clip.voted)){return ""}
return ClipService.clip.voted?"liked":""};$scope.isFollowUser=function(){if(!ClipService.clip){return !0}
return ClipService.clip.is_follow_user?!0:!1};$scope.isFollowCollection=function(){if(!ClipService.clip){return !0}
return ClipService.clip.is_follow_collection?!0:!1};$scope.isReport=function(){if(angular.isUndefined(ClipService.clip)){return !1}
if(angular.isDefined(ClipService.clip.bloked)&&0===ClipService.clip.bloked){return !0}
return !1};$scope.canReclip=function(){if($scope.isOwner()){return !1}
if(parseInt(ClipService.clip.reclip)===1){return !1}
if(parseInt(ClipService.clip.bloked)===0){return !1}
if(parseInt(ClipService.clip.shared_collection)===1){return !1}
return !0};$scope.backClip=function(){$rootScope.back();if($scope.orientation_changed){$timeout(function(){$rootScope.$broadcast("orientation:change")});$scope.orientation_changed=!1}};$scope.shareClip=function(){if(!$rootScope.is_app){return !1}
var link=ConfigService.server_url()+"/clip/"+$scope.clip.nid;var desc="Hi! Take a look at this clip on Bazaarr: "+$scope.clip.desc_text+"\n\r\n";$cordovaSocialSharing.share(desc,"This clip on Bazaarr may be interesting for you!",null,link).then(function(result){ToastService.showMessage("success","Successfully sent!")},function(err){ToastService.showMessage("danger","Error occured")})};$scope.goFeed=function(){if($scope.clip.source_url){$scope.openFeed($scope.clip.nid,$scope.clip.is_ebay)}}
$scope.toggleDescription=function(isAreaClick){if(isAreaClick&&!document.body.classList.contains('desc-open')){if(!$scope.clip.is_ebay&&!$scope.clip.source_url){$state.go("clip-full",{clipId:$scope.clip.nid});return}
$scope.openFeed($scope.clip.nid,$scope.clip.is_ebay)}
if($scope.clip.desc_text.length>50){if(document.body.classList.contains('desc-open')&&isAreaClick){var obj=new CutString($scope.clip.desc,50);$scope.clip.full_short_desc=obj.cut();document.body.classList.remove('desc-open');if($scope.clip.full_short_desc.length-$scope.clip.full_short_desc.lastIndexOf('...')==3){$scope.clip.full_short_desc=$scope.clip.full_short_desc.substr(0,$scope.clip.full_short_desc.lastIndexOf('...'))+'<span class="expand">...</span>'}}else if(!isAreaClick){$scope.clip.full_short_desc=$scope.clip.desc;document.body.classList.add('desc-open')}}};$scope.toggleHDescription=function(){if(document.body.classList.contains('desc-h-open')){document.body.classList.remove('desc-h-open')}else{document.body.classList.add('desc-h-open')}};$ionicPopover.fromTemplateUrl('views/menu/clip_popover.html',{scope:$scope}).then(function(popover){$scope.clipPopover=popover});$scope.openPopover=function($event){$scope.clipPopover.show($event)};$scope.onHold=function(clip){ClipService.clip=clip;$scope.clip=ClipService.clip;$scope.clip_owner=ClipService.clip.uid==UserService.user.uid;$scope.clip_actions_popup=$ionicPopup.show({title:'Clip actions',cssClass:'popup-actions',templateUrl:'views/popups/clip_actions.html',buttons:[{text:'Cancel'}],scope:$scope})};$scope.openFeed=function(nid,is_ebay){StateService.goFeed(nid,is_ebay)};$scope.checkClipSize=function(){window.wideClip=$scope.clip.wideClip};$scope.clipResize=function(){var containers=document.getElementsByClassName("uname-container");if(containers.length>0){var container=containers[1]?containers[1]:containers[0];var name=container.getElementsByClassName("resizable-text")[0];var containerChildren=container.children;var containerWidth=container.offsetWidth;var fontSize=16;while(fontSize>8){fontSize--;name.style.fontSize=fontSize+'px';var widthSumm=0;for(var i=0;i<containerChildren.length;i++){widthSumm+=containerChildren[i].offsetWidth+2}
if(containerWidth>widthSumm){break}}}
if(window.wideClip){setTimeout(function(){var ratio=$scope.clip.img_h/$scope.clip.img_w;var clipArticle=document.querySelectorAll(".clip.article");if(clipArticle.length>0){clipArticle=(clipArticle[1]?clipArticle[1]:clipArticle[0]);var image=clipArticle.querySelector(".clip .image img");var bottomWrapper=clipArticle.getElementsByClassName('bottom-wrapper')[0];var bottomHeight=bottomWrapper.offsetHeight;var textWrapper=clipArticle.getElementsByClassName('text-wrapper')[0];var text=clipArticle.getElementsByClassName('text')[0];var textInner=text.getElementsByClassName('text-inner')[0];var textWrapperTop=25+window.innerWidth*ratio+text.offsetTop;var textWrapperHeight=window.innerHeight-(textWrapperTop+bottomHeight);var linesCount=(textWrapperHeight-textWrapperHeight%Math.floor(16*1.3))/Math.floor(16*1.3);text.style.webkitLineClamp=linesCount?linesCount:1;text.style.mozLineClamp=linesCount?linesCount:1;var hDiff=textWrapper.offsetTop+textWrapper.offsetHeight-bottomWrapper.offsetTop;if(hDiff>=10){image.style.maxHeight=(image.offsetHeight-hDiff+10)+'px'}else{image.style.maxHeight=''}
if(text.offsetHeight-textInner.offsetHeight<0){document.body.classList.add('desc-short')}else{document.body.classList.remove('desc-short')}}},100)}}
$scope.$on('orientation:change',function(event){$scope.orientation_changed=!0;$scope.clipResize()});if($state.includes("clip")){$timeout(function(){$scope.checkClipSize();$scope.clipResize()})}});angular.module('bazaarr').controller('CommentCtrl',function($scope,$state,$ionicPopup,$ionicLoading,CommentService,UserService,ClipService,ToastService,ClipsService,comments,reclip_users,like_users){$scope.comments=comments.data;$scope.reclip_users=reclip_users.data;$scope.like_users=like_users.data;$scope.new_comment={};$scope.new_comment.body_value="";$scope.addComment=function(){$ionicLoading.show();$scope.new_comment.nid=$state.params.clipId;CommentService.add($scope.new_comment).then(function(data){$scope.new_comment.picture={};$scope.new_comment.picture.small=UserService.user.picture;$scope.new_comment.name=UserService.user.name;$scope.new_comment.uid=UserService.user.uid;$scope.new_comment.cid=data.data.cid;$scope.comments.push($scope.new_comment);$scope.new_comment={};ClipService.clip.comment_count++;$ionicLoading.hide()},function(reason){ToastService.showMessage("danger",reason.data);$ionicLoading.hide()})};$scope.goLogin=function(){UserService.post_login.redirect="comments";UserService.post_login.params={clipId:$state.params.clipId};$state.go('login')};$scope.openActionsPopup=function(comment){if(comment.uid!==UserService.user.uid){return !1}
comment.index=this.$parent.$index;CommentService.comment=comment;$scope.comment_actions_popup=$ionicPopup.show({title:'Comment actions',cssClass:'popup-actions',templateUrl:'views/popups/comment-actions.html',buttons:[{text:'Cancel',onTap:function(e){$scope.closeActionsPopup()}}],scope:$scope})};$scope.openEditPopup=function(){$scope.comment=CommentService.comment;$scope.comment_edit_popup=$ionicPopup.show({title:'Edit comment',templateUrl:'views/popups/inputs/comment-edit.html',buttons:[{text:'Cancel'},{text:'Save',onTap:function(e){CommentService.save().then(function(data){$scope.comments[CommentService.comment.index].body_value=$scope.comment.body_value},function(reason){ToastService.showMessage("danger",reason.data)})}}],scope:$scope});$scope.closeActionsPopup()};$scope.deleteComment=function(){var confirmPopup=$ionicPopup.confirm({title:'Delete comment',template:'<div class="delete-text">Are you sure you want to delete this comment?</div>'});confirmPopup.then(function(res){if(res){CommentService.delete().then(function(data){ClipService.clip.comment_count--;$scope.comments.splice(CommentService.comment.index,1);ToastService.showMessage("success","Comment successfully deleted!")},function(reason){ToastService.showMessage("danger",reason.data)})}});$scope.closeActionsPopup()};$scope.closeActionsPopup=function(){$scope.comment_actions_popup.close()};$scope.textareaLimit=function(textarea,rows,chars){var newValue;if($scope.new_comment.body_value){var valueSegments=$scope.new_comment.body_value.split('\n');if(rows!=undefined&&valueSegments.length>rows){newValue=valueSegments.slice(0,rows).join("\n")}
if(chars!=undefined&&$scope.new_comment.body_value.length>chars){if(newValue!=undefined)
newValue=newValue.substring(0,chars);else newValue=$scope.new_comment.body_value.substring(0,chars)}
if(newValue!=undefined)$scope.new_comment.body_value=newValue}}});angular.module('bazaarr').controller('FeedCtrl',function($scope,$state,ClipService,feed){if($state.includes("ebay")){if(feed.data.ConditionDescription){feed.data.ConditionDescriptionShort=new CutString(feed.data.ConditionDescription,60).cut()}else{feed.data.ConditionDescriptionShort=''}
feed.data.isSinglePic=typeof feed.data.PictureURL=='string';$scope.product=feed.data;console.log($scope.product)}
else{$scope.feed_html=feed.data}
$scope.clip=ClipService.clip;$scope.$on("clip:load",function(){$scope.clip=ClipService.clip})});angular.module('bazaarr').service('FeedService',function($rootScope,HttpService,ClipService,ToastService){this.load=function(nid){this.clipLoad(nid);HttpService.view_url="source-feed/"+nid;HttpService.is_auth=!1;var promise=HttpService.get();return promise};this.loadEbay=function(nid){this.clipLoad(nid);HttpService.view_url="ebay-source/"+nid;HttpService.is_auth=!1;var promise=HttpService.get();promise.then(function(){},function(reason){ToastService.showMessage("danger",reason.data)});return promise};this.clipLoad=function(nid){if(angular.isUndefined(ClipService.clip.nid)||ClipService.clip.nid!=nid){ClipService.load(nid).then(function(){$rootScope.$broadcast("clip:load")})}}});angular.module('bazaarr').service('CommentService',function($q,HttpService){this.comment={};this.load=function(clip_id){HttpService.view_url="comments";HttpService.params={"nid":clip_id};return HttpService.get()};this.add=function(comment){if(!comment.body_value){return $q.reject({"data":"Comment field is required!"})}
HttpService.view_url="comment";HttpService.params=comment;return HttpService.post()};this.save=function(){HttpService.view_url="comment/"+this.comment.cid;HttpService.params={"data":this.comment};return HttpService.put()};this.delete=function(){HttpService.view_url="comment/"+this.comment.cid;return HttpService.delete()}});angular.module('bazaarr').controller('SingleClipCtrl',function($scope,$state,$timeout,$ionicScrollDelegate,ClipService,ClipsService,UserService,ArrayService,SliderService){});angular.module('bazaarr').service('ClipService',function($q,$ionicLoading,$state,HttpService,ClipsService,SearchService){this.clip={};this.load_from_server=!1;this.load=function(id){$state.params.clipId=id;var clip=this.getClip();if(clip.nid&&!this.load_from_server){this.clip=clip;return $q.when({"data":[clip]})}
this.load_from_server=!1;HttpService.view_url="recent";HttpService.params={"nid":id};HttpService.is_auth=!1;var promise=HttpService.get();var that=this;this.page_list=this.page_api_url;this.preloadImage(clip.img_large);promise.then(function(data){that.clip=ClipsService.preRenderSingle(data.data[0])});return promise};this.nodeLoad=function(nid){HttpService.view_url="recent";HttpService.params={nid:nid};return HttpService.get()};this.likeClip=function(clip){HttpService.addNoCache("likes");HttpService.view_url="vote/"+clip.nid;var promise=HttpService.put();promise.then(function(){$ionicLoading.hide()});return promise};this.formatReclip=function(clip,bid){return{ph_bid:bid,desc:clip.desc,nid:clip.nid,send_to_facebook:clip.send_to_facebook}};this.blockClip=function(){HttpService.view_url="block";HttpService.params={nid:this.clip.nid,block:typeof this.clip.bloked==='undefined'?1:this.clip.bloked};return HttpService.post()};this.loadMore=function(){$ionicLoading.show();var that=this;var promise={};if(this.page_list==="search"){promise=SearchService.loadMore()}
else{promise=ClipsService.loadMore()}
promise.then(function(data){ClipsService.prepare(data.data);if(angular.isDefined(data.data[0])){that.preloadImage(data.data[0].img_large)}
$ionicLoading.hide()});return promise};this.getClip=function(index){index=index||0;var preload_index=index>=0?1:-1;var clip={};var page_list=this.page_list||ClipsService.page_api_url;var clips=ClipsService.clips[page_list];var that=this;angular.forEach(clips,function(value,key){if(value.nid===$state.params.clipId&&angular.isDefined(clips[key+index])){clip=clips[key+index];if(angular.isDefined(clips[key+index+preload_index])){that.preloadImage(clips[key+index+preload_index].img_large)}
if(clips.length>2&&key>clips.length-2){that.loadMore()}}});return clip};this.preloadImage=function(src){var i=new Image();i.src=src;i.onload=function(){}}});angular.module('bazaarr').service('SliderService',function($q,$state,$ionicLoading,ClipsService,ClipService){this.clips=[]});'use strict';angular.module('bazaarr').controller('SearchCtrl',function($scope,$rootScope,$state,$timeout,$ionicTabsDelegate,$cordovaKeyboard,SearchService,ToastService,CollectionService,ClipsService,ClipService,MetaService){var SEARCH_TAGS_COUNT=6,SEARCH_USERS_COUNT=5,SEARCH_COLLS_COUNT=3;$scope.resetSearchResults=function(is_manual){$scope.search={search_api_views_fulltext:"",price:",",price_title:"All",field_category:"All",price_type:0,price_value:0,type:0,search_api_clips_types:0,sort_order:"DESC",sort_order_title:"Descending",sort_by:"created",sort_by_title:"Date"};$scope.searchColors=[{"hex":"ffd6f6","name":"rose"},{"hex":"e77fbf","name":"pink"},{"hex":"e934aa","name":"magneta"},{"hex":"cc6f6f","name":"coral"},{"hex":"b13a3a","name":"carmine"},{"hex":"c1272d","name":"red"},{"hex":"652127","name":"maroon"},{"hex":"450f0f","name":"blood"},{"hex":"850012","name":"crimson"},{"hex":"ba311c","name":"tomato"},{"hex":"8b3220","name":"rust"},{"hex":"48260e","name":"chocolate"},{"hex":"755136","name":"brown"},{"hex":"5a4534","name":"soil"},{"hex":"564d48","name":"slate"},{"hex":"969182","name":"stone"},{"hex":"cabba2","name":"beige"},{"hex":"b27749","name":"sand"},{"hex":"ff7360","name":"tangerine"},{"hex":"ef5c23","name":"fire"},{"hex":"d5602b","name":"orange"},{"hex":"fa912b","name":"sunshine"},{"hex":"e8af49","name":"gold"},{"hex":"ffd297","name":"ivory"},{"hex":"fdff72","name":"banana"},{"hex":"ffe63b","name":"lemon"},{"hex":"948647","name":"goldenrod"},{"hex":"a9a032","name":"spring"},{"hex":"a5e32d","name":"leaf"},{"hex":"629c3f","name":"green"},{"hex":"567c34","name":"avacado"},{"hex":"687f67","name":"swamp"},{"hex":"425035","name":"forest"},{"hex":"1e361a","name":"jungle"},{"hex":"20603f","name":"emerald"},{"hex":"61ab89","name":"jade"},{"hex":"aaf1b1","name":"seafoam"},{"hex":"72c4c4","name":"aqua"},{"hex":"2b768f","name":"teal"},{"hex":"0086ce","name":"carribean"},{"hex":"052343","name":"azure"},{"hex":"2f4557","name":"denim"},{"hex":"556979","name":"steel"},{"hex":"7996c2","name":"stonewash"},{"hex":"aec8ff","name":"sky"},{"hex":"6394dd","name":"splash"},{"hex":"324ba9","name":"blue"},{"hex":"212b5f","name":"navy"},{"hex":"757adb","name":"storm"},{"hex":"4d2c89","name":"royal"},{"hex":"643f9c","name":"violet"},{"hex":"a261cf","name":"purple"},{"hex":"cca4e0","name":"lavender"},{"hex":"8f7c8b","name":"thistle"},{"hex":"6e235d","name":"mulberry"},{"hex":"3a2e44","name":"shadow"},{"hex":"292b38","name":"midnight"},{"hex":"000000","name":"obsidian"},{"hex":"333333","name":"black"},{"hex":"4b4946","name":"coal"},{"hex":"545454","name":"charcoal"},{"hex":"7e7e7e","name":"grey"},{"hex":"bbbabf","name":"silver"},{"hex":"c8bece","name":"platinum"},{"hex":"dae0f3","name":"ice"},{"hex":"ffffff","name":"white"},{"hex":"fffdea","name":"maize"}];$scope.users=[];$scope.tags=[];$scope.collections=[];if(is_manual){document.getElementsByClassName('search-top-input')[0].value='';$state.go($state.current.name,{query:''},{notify:!1,reload:!1})}};$scope.resetSearchResults();$scope.users=[];$scope.collections=[];CollectionService.getCategories(2).then(function(data){$scope.categories=data.data});if($state.params&&$state.params.query){$scope.search.search_api_views_fulltext=$state.params.query;if($state.current.name=='search-users'){SearchService.userSearch($scope.search.search_api_views_fulltext).then(function(data){$scope.users=data.data})}else if($state.current.name=='search-collections'){SearchService.collectionSearch($scope.search.search_api_views_fulltext).then(function(data){$scope.collections=data.data})}else if($state.current.name=='search-clips'){SearchService.params=$scope.search;SearchService.load().then(function(data){$scope.$parent.$parent.clips=data.data})}else if($state.current.name=='search-tags'){SearchService.tagSearch($scope.search.search_api_views_fulltext,30).then(function(data){if(data.data.length>0){for(var i=0;i<data.data.length;i++){data.data[i].name=data.data[i].name.substr(1,data.data[i].name.length)}}
$scope.tags=data.data})}else if($state.current.name=='search'){SearchService.tagSearch($scope.search.search_api_views_fulltext,30).then(function(data){if(data.data.length>0){for(var i=0;i<data.data.length;i++){data.data[i].name=data.data[i].name.substr(1,data.data[i].name.length)}}
$scope.tags=data.data});SearchService.userSearch($scope.search.search_api_views_fulltext,SEARCH_USERS_COUNT).then(function(data){$scope.users=data.data});SearchService.collectionSearch($scope.search.search_api_views_fulltext,SEARCH_COLLS_COUNT).then(function(data){$scope.collections=data.data});$scope.is_load_more=!1;SearchService.params=$scope.search;SearchService.load().then(function(data){$scope.clips=data.data})}}
function unfocusSearch(){document.activeElement.blur();if($rootScope.is_app&&ionic.Platform.isIOS()){$cordovaKeyboard.close()}}(function(timer,delay){$scope.goSearchResults=function(search){if(timer){$timeout.cancel(timer)}
timer=$timeout(function(){if(search.search_api_views_fulltext&&search.search_api_views_fulltext.length>=1){if($state.current.name=='search-users'){SearchService.userSearch(search.search_api_views_fulltext).then(function(data){$scope.users=data.data})}else if($state.current.name=='search-collections'){SearchService.collectionSearch(search.search_api_views_fulltext).then(function(data){$scope.collections=data.data})}else if($state.current.name=='search-clips'){SearchService.params=search;SearchService.load().then(function(data){$scope.$parent.$parent.clips=data.data})}else if($state.current.name=='search-tags'){SearchService.params=search;SearchService.tagSearch(search.search_api_views_fulltext,30).then(function(data){if(data.data.length>0){for(var i=0;i<data.data.length;i++){data.data[i].name=data.data[i].name.substr(1,data.data[i].name.length)}}
$scope.tags=data.data})}else if($state.current.name=='search'){SearchService.tagSearch(search.search_api_views_fulltext,SEARCH_TAGS_COUNT).then(function(data){if(data.data.length>0){for(var i=0;i<data.data.length;i++){data.data[i].name=data.data[i].name.substr(1,data.data[i].name.length)}}
$scope.tags=data.data});SearchService.userSearch(search.search_api_views_fulltext,SEARCH_USERS_COUNT).then(function(data){$scope.users=data.data});SearchService.collectionSearch(search.search_api_views_fulltext,SEARCH_COLLS_COUNT).then(function(data){$scope.collections=data.data});$scope.is_load_more=!1;SearchService.params=search;SearchService.load().then(function(data){$scope.clips=data.data})}
$state.go($state.current.name,{query:search.search_api_views_fulltext},{notify:!1,reload:!1})}else{ToastService.showMessage("danger","Please enter 1 or more symbols")}},delay)}})(!1,600);$scope.goSearch=function(){$state.go('search')};$scope.isSearch=function(){return SearchService.isSearch()};$scope.selectColor=function(hex){if($scope.search.colors_hex==hex){$scope.search.colors_hex=''}else{$scope.search.colors_hex=hex}};$scope.checkColor=function(hex){if($scope.search.colors_hex==hex){return 'active'}};$scope.selectType=function(type,from,to){$scope.search.price=from+','+to;$scope.search.price_value=from;if(type==1){if($scope.search.price_type!=type){$scope.search.lastSort=$scope.search.sort_by}
$scope.search.sort_by='created';$scope.search.sort_by_title='Date'}else{if($scope.search.lastSort&&$scope.search.lastSort=='price_value'){$scope.search.sort_by='price_value';$scope.search.sort_by_title='Price'}}
if(type==2&&$scope.search.price_value_1>0){$scope.search.price_type=type}else{$scope.search.price_value_1=to;$scope.search.price_type=type}};$scope.selectSeachType=function(type){$scope.search.type=type};$scope.searchInputKeyPress=function(e,search){$timeout(function(){if(e.keyCode==13||search.search_api_views_fulltext.length>1){$scope.goSearchResults(search)}})};$scope.openClip=function(clip){ClipService.page_list=ClipsService.page_api_url;ClipService.preloadImage(clip.img_large);$state.go("clip",{clipId:clip.nid}).then(function(){})}});angular.module('bazaarr').service('SearchService',function($state,$ionicLoading,UserService,server_url,HttpService,ClipsService,MetaService){this.params={};this.page=0;this.init=function(){MetaService.set("search")};this.loadMore=function(){ClipsService.is_more=!0;this.page+=1;return this.load()};this.collectionSearch=function(search,limit){HttpService.view_url='collections-search';HttpService.is_auth=!1;HttpService.show_loading=!1;HttpService.params={name:search};if(limit){HttpService.params.limit=limit}
return HttpService.get()}
this.userSearch=function(search,limit){HttpService.view_url='user-search';HttpService.is_auth=!1;HttpService.show_loading=!1;HttpService.params={name:search};if(limit){HttpService.params.limit=limit}
return HttpService.get()}
this.tagSearch=function(search,limit){HttpService.view_url='search-tags';HttpService.is_auth=!1;HttpService.show_loading=!1;HttpService.params={name:search};if(limit){HttpService.params.limit=limit}
return HttpService.get()}
this.load=function(){HttpService.view_url='views/solr_clip_search';HttpService.page=this.page;HttpService.params=this.params;HttpService.cache=!1;HttpService.is_auth=!1;HttpService.show_loading=!1;if(!HttpService.page){ClipsService.newArr.search=[];ClipsService.newArrSize.search=[];ClipsService.is_more=!1;ClipsService.page_api_url="search";ClipsService.is_user_page=!1}
var ret=HttpService.get();ret.then(function(data){})
return ret};this.getTitle=function(){if(!Object.keys(this.params).length||!!this.params.search_api_views_fulltext===!1||!this.params.search_api_views_fulltext){return ""}
return decodeURIComponent(this.params.search_api_views_fulltext)};this.isSearch=function(){if($state){return $state.includes('search-results')}
if(Object.keys(this.params).length){return !0}
return !1}});'use strict';angular.module('bazaarr').controller('AccountCollectionListCtrl',function($scope,$rootScope,$state,$ionicHistory,CollectionService,FollowService,AccountService,ClipsService,HttpService,collections,ToastService){$scope.col_width=Math.round(100/ClipsService.getColsNumber());$scope.grouped_list={};FollowService.colls=$scope.grouped_list;for(var type in collections.data){$scope.grouped_list[type]=setCollections(collections.data[type],type)}
$scope.goAddCollection=function(){$scope.collection={bid:"new"};$state.go("add-collection").then(function(){$rootScope.$broadcast("form:clear")})};function setCollections(collections,type){if($state.includes('account.collections')&&AccountService.is_my_account&&collections&&collections[0].bid!=0&&type=='public'){collections.unshift({"bid":0})}
return CollectionService.prepare(collections)}
$scope.isFirst=function(bid){return !!bid===!1?!0:!1};$scope.openCollection=function(id){$state.go("collection",{colId:id}).then(function(){$rootScope.$broadcast('update:collection_titles',{bid:id})})};$scope.accept_collection=function(coll,type){var index=this.$parent.$parent.$parent.$index,parent_index=this.$parent.$parent.$parent.$parent.$index,bid=coll.bid;CollectionService.accept_collection(bid,type).then(function(data){HttpService.addNoCache("get_user_collections/"+$rootScope.user.uid);if(type==0||type==3){$scope.grouped_list[coll.type][parent_index].splice(index,1);if(!$scope.grouped_list[coll.type][parent_index].length){$scope.grouped_list[coll.type].splice(parent_index,1)}
if(angular.isDefined($scope.grouped_list.shared)&&(!$scope.grouped_list.shared||$scope.grouped_list.shared.length==0)){delete $scope.grouped_list.shared}
HttpService.clearCache()}else{$scope.grouped_list[coll.type][parent_index][index].accepted=1}
ToastService.showMessage("success",data.data.message)})};$scope.goEditCollection=function(bid){$state.go("edit-collection",{collectionId:bid})};$scope.followCollection=function(coll,type){var send_type=(1===type)?0:1,bid=coll.bid,parent_index=this.$parent.$parent.$parent.$parent.$index,index=this.$parent.$parent.$parent.$index,is_follow=$scope.account.is_follow;FollowService.followCollection(bid,send_type).then(function(data){if(send_type){$scope.account.is_follow=1}
if(!data.data.user_follow){$scope.account.is_follow=0}
if(data.data.message){ToastService.showMessage("success",data.data.message)}
$scope.grouped_list[coll.type][parent_index][index].follow=send_type;FollowService.followUserCallback(send_type);if(is_follow!==$scope.account.is_follow){AccountService.updateCounters('followers_count',send_type,!0)}})};$scope.$parent.doRefresh=function(){var promise={};HttpService.addNoCache("get_user_collections/"+AccountService.getAccountId());promise=CollectionService.load2();AccountService.update();promise.then(function(data){for(var type in data.data){$scope.grouped_list[type]=setCollections(data.data[type],type)}
$rootScope.$broadcast('scroll.refreshComplete')});};$scope.$on('collections:follow',function(event,args){for(var type in collections.data){collections.data[type]=CollectionService.revertFollow(collections.data[type],args.type);$scope.grouped_list[type]=setCollections(collections.data[type],type)}});$scope.$on('orientation:change',function(event){$scope.$apply(function(){$scope.col_width=Math.round(100/ClipsService.getColsNumber());for(var type in collections.data){$scope.grouped_list[type]=setCollections(collections.data[type],type)}});$ionicHistory.clearCache();})});angular.module('bazaarr').controller('CollectionListCtrl',function($scope,$rootScope,$state,$timeout,$ionicHistory,$ionicPosition,$ionicScrollDelegate,CollectionService,FollowService,AccountService,ToastService,HttpService,collections){setCollections(collections);setCover(0);$timeout(function(){setPositions()});$scope.col_width=Math.round(100/CollectionService.getColsNumber());$scope.openClip=function(id,display_id,page,collection_id){$state.go("clip",{clipId:id,displayId:display_id,pageId:page,collectionId:collection_id})};$scope.openCollection=function(id){$state.go("collection",{colId:id})};$scope.isFirst=function(bid){return !!bid===!1?!0:!1};$scope.goAddCollection=function(){$scope.collection={};$state.go("add-collection")};$scope.goEditCollection=function(bid){$state.go("edit-collection",{collectionId:bid})};$scope.followCollection=function(coll,type){var send_type=(1===type)?0:1;var parent_index=this.$parent.$parent.$parent.$parent.$index;var index=this.$parent.$parent.$parent.$index;var bid=coll.bid
FollowService.followCollection(bid,send_type).then(function(data){$scope.collections[parent_index][index].follow=send_type;FollowService.followCollectionCallback(data.data.user_follow)})};$scope.canEdit=function(){if($rootScope.isMyAccount()&&$state.includes("account.collections")){return !0}
return !1}
$scope.$parent.doRefresh=function(){var promise={};if($state.includes("account.following-collections")){HttpService.addNoCache("collections-followed");promise=FollowService.loadCollections()}
else if($state.includes("account.collections")){HttpService.addNoCache("get_user_collections/"+AccountService.getAccountId());promise=CollectionService.load2()}
else{return !1}
AccountService.update();promise.then(function(data){setCollections(data);$rootScope.$broadcast('scroll.refreshComplete')})};$scope.changeCollection=function(index){setCover(index)};$scope.getCover=function(){return{'background-image':'url('+$scope.cover_img+')'}}
var already_scroll=!1;$scope.scrollCollections=function(){if(already_scroll){return !1}
already_scroll=!0;$timeout(function(){setNearestCollection($ionicScrollDelegate.getScrollPosition().top)},1000)}
$scope.accept_collection=function(coll,type){var index=this.$parent.$parent.$parent.$index,parent_index=this.$parent.$parent.$parent.$parent.$index,bid=coll.bid;CollectionService.accept_collection(bid,type).then(function(data){HttpService.addNoCache("get_user_collections/"+$rootScope.user.uid);if(type==0||type==3){$scope.collections[parent_index].splice(index,1);if(!$scope.collections[parent_index].length){$scope.collections.splice(parent_index,1)}}else{$scope.collections[parent_index][index].accepted=1}
ToastService.showMessage("success",data.data.message);HttpService.clearCache()})};var collection_top_positions=[];function setPositions(){var collection_elements=document.querySelectorAll(".collection");angular.forEach(collection_elements,function(value,key){collection_top_positions[key]=$ionicPosition.offset(angular.element(value)).top-160});collection_top_positions.push(100000)}
function setNearestCollection(scroll_pos){var find_nearest=!1;var scroll_to=0;var index=0;angular.forEach(collection_top_positions,function(value,key){if(!find_nearest&&scroll_pos<value){scroll_to=collection_top_positions[key];index=key;if((collection_top_positions[key]-scroll_pos)>(scroll_pos-collection_top_positions[key-1])){scroll_to=collection_top_positions[key-1];index=key-1}
scroll_to=0===index?0:scroll_to;$ionicScrollDelegate.scrollTo(0,scroll_to,!0);setCover(index);find_nearest=!0;$timeout(function(){already_scroll=!1},500)}})}
function setCollections(collections){if($state.includes('account.collections')&&AccountService.is_my_account&&collections.data[collections.data.length-1].bid!=0){collections.data.push({"bid":0})}
$scope.collections=CollectionService.prepare(collections.data)}
function setCover(index){$scope.cover_img=$scope.collections[index].cover_img}
$scope.$on('collections:follow',function(event,args){collections.data=CollectionService.revertFollow(collections.data,args.type);setCollections(collections)});$scope.$on('orientation:change',function(event){$scope.$apply(function(){$scope.col_width=Math.round(100/CollectionService.getColsNumber());$scope.collections=CollectionService.prepare(collections.data)});$ionicHistory.clearCache()})});angular.module('bazaarr').controller('CollectionCtrl',function($scope,$state,$ionicTabsDelegate,$ionicPopup,$timeout,CollectionService,AccountService,CollSharedService,HttpService,UserService,ToastService,collection){if($state.includes('edit-collection')){CollectionService.tmp_collection=angular.isUndefined(collection.data)?{}:collection.data[0]}else{if(!CollectionService.tmp_collection){CollectionService.tmp_collection={}}}
CollectionService.getCategories(2).then(function(data){$scope.categories=data.data});if(angular.isUndefined(CollectionService.tmp_collection)||angular.isUndefined(CollectionService.tmp_collection.bid)){CollectionService.tmp_collection={bid:'new'}}
$scope.collection=CollectionService.tmp_collection;$scope.shared={};$scope.shared.user_list={};$scope.search="";$scope.ionicTabsDelegate=$ionicTabsDelegate.$getByHandle('shared-tabs');var sent=0;var timeout_id=0;$scope.checked_data={};$scope.$on('form:clear',function(event,args){CollectionService.tmp_collection={bid:'new'};$scope.collection=CollectionService.tmp_collection;$scope.checked_data={}});if($state.includes('shared')){$scope.u_list={};CollectionService.users[UserService.user.uid]=UserService.user.name;$scope.saveShared=function(data,bid){var tab=$scope.ionicTabsDelegate.selectedIndex(),params={"bid":bid,"type":"can_view"};params.uid={};switch(tab){case 0:params.uid[0]=1;$scope.checked_data={};break;case 1:params.uid[UserService.user.uid]=1;$scope.checked_data={};break;case 2:for(var i in data){if(data[i]){params.uid[i]=1}}
if(!Object.keys(params.uid).length){ToastService.showMessage("danger","Please select users");return}
break}
CollectionService.tmp_collection.shared=params;if(params.bid&&/^-{0,1}\d*\.{0,1}\d+$/.test(params.bid)){$state.go('edit-collection',{"collectionId":params.bid});return}
$state.go('add-collection',{'action':'account'})};$scope.searchUsers=function(text,fromButton){if(timeout_id){clearTimeout(timeout_id);timeout_id=0}
if(text.length>2||fromButton&&!sent){sent=1;timeout_id=setTimeout(function(){CollSharedService.searchText(text).then(function(data){for(var j in $scope.checked_data){if(!$scope.checked_data[j]){delete $scope.checked_data[j]}}
var ln=data.data.length;if(ln){for(var i=0;i<ln;i++){$scope.u_list[data.data[i].uid]=data.data[i].name;CollSharedService.users[data.data[i].uid]=data.data[i].name;if($scope.checked_data[data.data[i].uid]){continue}
$scope.checked_data[data.data[i].uid]=!1}}
$scope.shared.user_list=data.data;sent=0})},1000)}};if(angular.isUndefined(CollectionService.tmp_collection.shared)&&$scope.collection.bid!='new'){CollSharedService.loadData($scope.collection.bid).then(function(data){$scope.shared=data.data.shared_data;try{var d=data.data.shared_data.can_view;for(var i=0;i<d.length;i++){$scope.u_list[d[i].uid]=d[i].name;CollSharedService.users[d[i].uid]=d[i].name}}catch(e){console.error(e)}
if(typeof $scope.shared=='undefined'){return}
setTab($scope.shared.can_view)})}else{var shared=[];if(angular.isDefined(CollectionService.tmp_collection.shared)){for(var u in CollectionService.tmp_collection.shared.uid){shared.push({name:CollSharedService.users[u],uid:u,})}
setTab(shared)}}}
function setTab(can_view){if(can_view.length){for(var i=0;i<can_view.length;i++){$scope.u_list[can_view[i].uid]=can_view[i].name;if(can_view[i].uid>0){$scope.checked_data[can_view[i].uid]=!0}}
var index=0;if(can_view){if(can_view[0].uid==0){index=0;$scope.checked_data={}}else if(i>1){index=2}else if(i==1&&can_view[0].uid==UserService.user.uid){index=1;$scope.checked_data={}}else{index=2}}
$timeout(function(){$scope.ionicTabsDelegate.select(index)},200)}}
$scope.checkWhoCanAdd=function(bid){if(angular.isUndefined(bid)){bid="new"}
CollSharedService.loadData(bid).then(function(data){$scope.shared=data.data.shared_data;if($scope.shared&&$scope.shared.can_add.length){for(var i=0;i<$scope.shared.can_add.length;i++){$scope.checked_data[$scope.shared.can_add[i].uid]=!0}}
if($scope.shared&&$scope.shared.followed.length>0){$scope.popup=$ionicPopup.show({title:'Who can add clips',templateUrl:'views/popups/inputs/collection-can-add.html',scope:$scope,buttons:[{text:'Cancel'},{text:'Save',onTap:function(){var params={bid:bid,type:'can_add',uid:{}};params[AccountService.account.uid]=1;$scope.shared.can_add=[];for(var i in $scope.checked_data){if($scope.checked_data[i]){params.uid[i]=1;$scope.shared.can_add.push({"uid":i})}}
CollectionService.tmp_collection.can_add=params}}]})}else{ToastService.showMessage("danger","You don't have followers")}})}
$scope.title_text=Object.keys($scope.collection).length?'Edit collection':'Add Collection';if($state.includes('add-collection')){$scope.collection={};CollectionService.tmp_collection={}}
if(!$scope.collection.name||$scope.collection.name==''){$scope.title_text='Add Collection'}
$scope.addCollection=function(){if($state.includes('add-collection')){for(var s in CollectionService.tmp_collection){$scope.collection[s]=CollectionService.tmp_collection[s]}
CollectionService.tmp_collection=$scope.collection}
if(!CollectionService.tmp_collection.name){ToastService.showMessage("danger","Name of Collection is required");return}
if(CollectionService.tmp_collection.description&&CollectionService.tmp_collection.description.length>500){ToastService.showMessage("danger","Description should be under 500 symbols");return}
CollectionService.add(CollectionService.tmp_collection).then(function(data){$scope.succ_mess="Collection succesfully added";if($state.params.collectionId){CollectionService.editCollectionCallback($scope.collection)}
else{if($state.params.action!='account'){CollectionService.collectionId=data.data.bid;$state.go($state.params.action,{clipId:$state.params.clipId})}
CollectionService.addCollectionCallback($scope.collection)}
HttpService.addNoCache('user_collections')},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})}
$scope.deleteCollection=function(bid){var confirmPopup=$ionicPopup.confirm({title:'Delete Collection',cssClass:'confirm',template:'Are you sure you want to delete this collection?'});confirmPopup.then(function(res){if(res){CollectionService.delete(bid).then(function(data){ToastService.showMessage("success","Collection successfully deleted");HttpService.clearCache();$state.go("account.collections",{userId:UserService.user.uid})},function(reason){ToastService.showDrupalFormMessage("danger",reason.data)})}})}});angular.module('bazaarr').controller('CollectionCoverCtrl',function($scope,$rootScope,$state,$timeout,collection,FollowService,CollectionService,HttpService,ToastService,ClipsService,ClipService){$scope.collection=CollectionService.collections[$state.params.colId];$scope.openClip=function(clipId){ClipsService.load("collection_clips",!1,{bid:$state.params.colId}).then(function(data){ClipsService.prepare(data.data,"",!0);ClipService.page_list=ClipsService.page_api_url;$state.go("clip",{"clipId":clipId})})};$scope.followCollection=function(bid,type){var send_type=(1===type)?0:1;FollowService.followCollection(bid,send_type).then(function(data){$scope.collection.follow=send_type;FollowService.followCollectionCallback(data.data.user_follow)})};$scope.accept_collection=function(coll,type){var bid=coll.bid;CollectionService.accept_collection(bid,type).then(function(data){if(type==0||type==3){$state.go('account.collections',{"userId":$rootScope.user.uid})}else{$scope.collection.accepted='1'}
HttpService.clearCache();ToastService.showMessage("success",data.data.messages.status[0])})};$scope.addClipFromCollection=function(collection){CollectionService.add_clip_collection=collection;$state.go("add")}
$scope.goEditCollection=function(bid){$state.go("edit-collection",{collectionId:bid})};$scope.$on('update:collection_titles',function(event,args){if(angular.isDefined(CollectionService.collections[args.bid])){$scope.collection=CollectionService.collections[args.bid]}})});angular.module('bazaarr').controller('InputCtrl',function($scope,$rootScope,$ionicPopup,$timeout,$cordovaKeyboard,ValidateService,ToastService){$scope.openPopup=function(type,scope_var,value,title,buttons){$scope.popup={};$scope.popup.model=value;$scope.popup.add={};if(angular.isDefined($scope.$parent.$parent.clip)&&angular.isDefined($scope.$parent.$parent.clip.category)){$scope.tid=$scope.$parent.$parent.clip.category.tid}
else if(angular.isDefined($scope.$parent.$parent.collection)){$scope.tid=$scope.$parent.$parent.collection.tid}
if(type.indexOf('select')===0){var default_buttons=[{text:'Cancel'}]}
if(type=='select-color'){var default_buttons=[{text:'Select'}]}else if(type=='full-text'){var default_buttons=[{text:'<i class="ion-checkmark"></i>'}]}else{var default_buttons=[{text:'<i class="ion-close"></i>'},{text:'<i class="ion-checkmark"></i>',onTap:function(e){if(angular.isDefined($scope.popup.add.validate)){if(angular.isUndefined($scope.popup.add.current_pass)||!$scope.popup.add.current_pass||$scope.popup.add.current_pass==''){ToastService.showMessage("danger","Please set your password!");e.preventDefault();return}}
if(!ValidateService.validate($scope.popup.model,type,title)){e.preventDefault();return !1}
p(scope_var);scope_var=scope_var.split(".");if(typeof scope_var[2]!='undefined'){if(typeof $scope[scope_var[0]][scope_var[1]]=='undefined'){$scope[scope_var[0]][scope_var[1]]={}}
$scope[scope_var[0]][scope_var[1]][scope_var[2]]=$scope.popup.model}else{$scope[scope_var[0]][scope_var[1]]=$scope.popup.model}
for(var i in $scope.popup.add){$scope[scope_var[0]][i]=$scope.popup.add[i]}}}]}
if(buttons){default_buttons=buttons}
var cssClass=type+(type.indexOf('select')===0?' select ':'');if(type=='full-text'){cssClass='full-text'}
$scope.popup.sel=$ionicPopup.show({title:title,templateUrl:'views/popups/inputs/'+type+'.html',scope:$scope,cssClass:cssClass,buttons:default_buttons});$timeout(function(){var popupInput=document.querySelector('.popup-body textarea, .popup-body input');if(popupInput){popupInput.focus();if($rootScope.is_app){$cordovaKeyboard.show()}}},400)}
$scope.popupSelectClick=function(name,value,title){var scope_var=name.split(".");if(typeof value=='object'){$scope[scope_var[0]][scope_var[1]+'_from']=value[0];$scope[scope_var[0]][scope_var[1]+'_to']=value[1];if(title){$scope[scope_var[0]][scope_var[1]+'_title']=title}
$scope[scope_var[0]][scope_var[1]]=value}else{if(typeof scope_var[2]!='undefined'){if(typeof $scope[scope_var[0]][scope_var[1]]=='undefined'){$scope[scope_var[0]][scope_var[1]]={}}
$scope[scope_var[0]][scope_var[1]][scope_var[2]]=value;if(title){$scope[scope_var[0]][scope_var[1]][scope_var[2]+'_title']=title}}else{$scope[scope_var[0]][scope_var[1]]=value;if(title){$scope[scope_var[0]][scope_var[1]+'_title']=title}}}
$scope.popup.sel.close()}
$scope.popupCategorySelect=function(value,title){if(angular.isDefined($scope.clip)){$scope.clip.category={tid:value,name:title}}
if(angular.isDefined($scope.collection)){$scope.collection.tid=value;$scope.collection.category_name=title}
$scope.popup.sel.close()}});angular.module('bazaarr').service('ValidateService',function(ToastService){this.validate=function(value,type,title){title=title||type;if(angular.isDefined(this.validate[type])&&!this.validate[type](value)){ToastService.showMessage("danger","Please, enter correct "+title.toLowerCase());return !1}
return !0};this.validate.number=function(value){var re=/^([\d]+(\.{1}[\d]{1,2})?)$/i;if(!re.test(value)){return !1}
return !0};this.validate.url=function(value){var pattern=new RegExp('^(https?:\\/\\/)?'+'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+'((\\d{1,3}\\.){3}\\d{1,3}))'+'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+'(\\?[;&a-z\\d%_.~+=-]*)?'+'(\\#[-a-z\\d_]*)?$','i');if(!pattern.test(value)){return !1}
return !0}});angular.module('bazaarr').service('CollectionService',function($rootScope,$state,$q,$timeout,localStorageService,AccountService,ClipsService,HttpService,ToastService,UserService,MetaService){this.collections=[];this.collectionId=0;this.tmp_collection={};this.users={};this.add_clip_collection={};this.accept_collection=function(bid,type){HttpService.view_url="collection/shared/"+bid;HttpService.params={"data":{"type":type}};return HttpService.post()};this.singleLoad=function(bid){if(this.collections[bid]){return $q.when({"data":[this.collections[bid]]})}
HttpService.view_url="user_collections";HttpService.params={"bid":bid};HttpService.is_auth=!1;HttpService.cache=!1;var promise=HttpService.get();var that=this;promise.then(function(data){that.collections[bid]=data.data[0];that.getCounters(bid)});return promise};this.load=function(uid){var cur_uid=AccountService.account_id||UserService.user.uid;uid=uid||cur_uid;HttpService.view_url="user_collections";HttpService.params={"uid":uid};HttpService.is_auth=!1;return HttpService.get()};this.load2=function(uid){var cur_uid=AccountService.account_id||UserService.user.uid;uid=uid||cur_uid;HttpService.view_url="get_user_collections/"+uid;HttpService.is_auth=!1;var promise=HttpService.get();promise.then(function(){var account=AccountService.getAccount();MetaService.set("user","",{"name":account.name,"about":account.about})});return promise};this.prepare=function(data){var j=0;for(var i in data){if(typeof data[i].accepted!='undefined'){data[i].accepted=parseInt(data[i].accepted)}
if(angular.isUndefined(data[i].follow)){data[i].follow=parseInt(data[i].followed)}
if($rootScope.isMyAccount()&&$state.includes("account.following-collections")){data[i].follow=1}
if($rootScope.isMyAccount()&&$state.includes("account.collections")){data[i].can_edit=!0}
else{data[i].can_edit=!1}
if(data[i].access_add&&data[i].access_add.length>1){data[i].is_shared=!0}
else{data[i].is_shared=!1}
this.collections[data[i].bid]=data[i]}
return this.applyOrientation(data)};this.applyOrientation=function(data){var cols=this.getColsNumber();return ClipsService.chunk_table(data,cols)};this.getColsNumber=function(){var cols=3;if(window.matchMedia("(orientation: landscape)").matches){cols=5}
if(ionic.Platform.isIPad()){cols++}
return cols};this.add=function(collection){var method="post";HttpService.view_url="collection";HttpService.params=collection;if(collection.bid&&collection.bid!='new'){HttpService.view_url+="/"+collection.bid;return HttpService.put()}
return HttpService.post()};this.delete=function(bid){HttpService.view_url="collection/"+bid;return HttpService.dell()};this.getCategories=function(vid){HttpService.view_url="getCategories";HttpService.is_auth=!1;HttpService.params={};return HttpService.get()};this.addCollectionCallback=function(collection){ToastService.showMessage("success","The collection "+collection.name+" is created");AccountService.updateCounters('collections_count',1);this.editCollectionCallback(collection)};this.editCollectionCallback=function(collection){if(!this.collectionId){HttpService.addNoCache("user_collections");HttpService.clearCache();$state.go("account.collections",{userId:UserService.user.uid})}};this.findCollection=function(bid){var ret="";var session=localStorageService.get("session");angular.forEach(session.collections,function(value,key){if(value.bid===bid){ret=value}});return ret};this.revertFollow=function(collections,type){angular.forEach(collections,function(value,key){value.follow=type?1:0});return collections};this.updateCollectionField=function(bid,field,value,operation){if(!this.collections[bid]||!this.collections[bid][field]){return !1}
switch(operation){case "increment":this.collections[bid][field]=parseInt(this.collections[bid][field])+value;break;case "update":this.collections[bid][field]=value;break}};this.clear=function(bid){if(!this.collections[bid]){return !1}
delete this.collections[bid];return !0};this.getCounters=function(bid){if(angular.isUndefined(this.collections[bid])||angular.isDefined(this.collections[bid].count_clips)){return !1}
HttpService.view_url="collection-counters/"+bid;HttpService.is_auth=!1;var that=this;HttpService.get().then(function(data){angular.extend(that.collections[bid],data.data)})}});angular.module('bazaarr').service('CollSharedService',function(AccountService,ClipsService,HttpService){this.type={};this.users={};this.saveShared=function(params){HttpService.view_url="shared/";HttpService.params=params;return HttpService.post()}
this.loadData=function(bid){HttpService.view_url="collection/"+bid;HttpService.params={"data":1};HttpService.cache=!1;return HttpService.get()}
this.searchText=function(text){HttpService.view_url="collection/getUsers";HttpService.params={"text":text};HttpService.cache=!1;return HttpService.post()}})